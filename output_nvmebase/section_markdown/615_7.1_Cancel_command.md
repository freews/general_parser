### 7.1 Cancel command

> **Section ID**: 7.1 | **Page**: 524-526

The Cancel command is used to request an abort for specified commands submitted on the same I/O
Submission Queue to which the Cancel command is submitted. The Cancel command may apply to a single
namespace or to multiple namespaces. The Cancel command may be deeply queued. Some of the
commands to abort may have already completed, currently be processing, or be deeply queued. As a result,
the performance of the Cancel command may be impacted.
To abort an Admin command, the host uses the Abort command (refer to section 5.2.1). To abort a Cancel
command, the host may:
â€¢
use the Abort command;
â€¢
use a second Cancel command with a Cancel Action set to Single Command Cancel (i.e., 00b) that
specifies the CID of the Cancel command to abort; or
â€¢
follow the procedure described in section 3.3.1.3 to delete the I/O Submission Queue and recreate
the I/O Submission Queue.
The controller applies the specified Cancel Action (refer to Figure 591) to all outstanding commands that
have been fetched prior to the processing of the Cancel command. The controller may or may not apply
the specified Cancel Action to commands that are fetched:
â€¢
after the start of processing of the Cancel command; and
â€¢
before the completion of the Cancel command.
There is no requirement to apply the specified Cancel Action to commands that have not been fetched by
the controller.
If an abort action is performed on a command to abort, that action may be:
â€¢
an immediate abort (i.e., the abort action occurs prior to posting the completion queue entry for the
Cancel command); or
â€¢
a deferred abort (i.e., the abort action may or may not occur prior to posting the completion queue
entry for the Cancel command).
For each command on which an immediate abort is performed, the controller shall meet the immediate
abort requirements (refer to section 5.2.1.1) for that command before posting the completion queue entry
for the Cancel command.
For each command on which a deferred abort is performed, there are no requirements on the ordering of
posting of the completion queue entry for the Cancel command (refer to section 7.1.1).
For each command on which an abort action is performed (i.e., immediate abort or deferred abort) the
status code shall be set to Command Abort Requested in the completion queue entry for that command.
If the Cancel command is supported, then the Commands Supported and Effects log page shall be
supported.
The Cancel command uses the Command Dword 10 and Command Dword 11 fields. All other command
specific fields are reserved.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_7_1_Cancel_command
![Table_7_1_Cancel_command](../section_images/Table_7_1_Cancel_command.png)

| Bits | Description |
| :--- | :--- |
| 31:16 | **Command Identifier (CID):** This field specifies the command identifier of the command to be aborted (i.e., the CDW0.CID field within the command to be aborted).<br><br>If the Action Code field is set to Single Command Cancel and this field is set to the CID for this Cancel command, then the controller shall abort the command with a status code of Invalid Command ID.<br><br>If the Action Code field is set to Multiple Command Cancel and this field is not set to FFFFh, then the controller shall abort the command with a status code of Invalid Field in Command. |
| 15:00 | **Submission Queue Identifier (SQID):** This field specifies the identifier of the Submission Queue that the Cancel command is associated with.<br><br>If the SQID does not match the Submission Queue Identifier of the submission queue to which the Cancel command is submitted, then the controller shall abort the command with a status code of Invalid Field in Command. |
| | |
| Bits | Description |
| 31:02 | Reserved |
| 01:00 | **Action Code (ACODE):** |
| | <table><tbody><tr><th>Value</th><th>Cancel Action</th></tr><tr><td>00b</td><td>Single Command Cancel: The hosts requests that the controller abort the specific command submitted to the specified namespace with the specified CID.<br><br>If the NSID field is set to FFFFFFh then, the host requests that the controller abort the specific command submitted to any NSID with the specified NSID.<br><br>If the NSID is not set to FFFFFFh and the specified CID is not associated with the specified NSID then, the controller shall abort the Cancel command with a status code of Invalid Field in Command.<br><br>If the specified CID is not found, then the controller shall complete the Cancel command with the Commands Eligible for Deferred Abort field cleared to 0h and the Commands Aborted field cleared to 0h.</td></tr><tr><td>01b</td><td>Multiple Command Cancel: The hosts requests that the controller abort all commands, other than this Cancel command, on the I/O Submission Queue to which the Cancel command was submitted, that were submitted for the specified NSID.<br><br>If the NSID is set to FFFFFFh then the host requests that the controller abort all commands, other than this Cancel command, submitted to the I/O Submission Queue to which the Cancel command was submitted for all namespaces.</td></tr><tr><td>All others</td><td>Reserved</td></tr></tbody></table> |

