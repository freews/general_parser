#### 5.2.9 Firmware Image Download command

> **Section ID**: 5.2.9 | **Page**: 223-224

The Firmware Image Download command is used to download all or a portion of an image for a future
update to the controller. The Firmware Image Download command may be submitted while other
commands on the Admin Submission Queue or I/O Submission Queues are outstanding. The Firmware
Image Download command downloads a new image (in whole or in part) to the controller.
The image may be constructed of multiple pieces that are individually downloaded with separate Firmware
Image Download commands. Each Firmware Image Download command includes a Dword Offset and
Number of Dwords that specify a dword range. The host should ensure that image pieces do not have
dword ranges that overlap and that the NUMD field and OFST field meet the alignment and granularity
requirements indicated in the FWUG field (refer to Figure 328). Firmware portions may be submitted out of
order to the controller. The host shall submit image portions in order when updating a Boot Partition. If
ranges overlap, the controller may return an error of Overlapping Range.
The new firmware image is not activated as part of the Firmware Image Download command. Refer to
section 3.11 for details on the firmware update process. The firmware update process does not modify the
contents of Boot Partitions. Refer to section 8.1.3.2 for details on the Boot Partition update process.
The host should not overlap command sequences that update Boot Partitions and/or firmware images (refer
to section 3.11 and section 8.1.3.2).
If a change to the settings of any personality is pending (refer to section 8.1.6.1), then the controller shall
abort the Firmware Image Download command with a status code of Access Denied.
After downloading an image, the host issues a Firmware Commit command before downloading another
image. Processing of the first Firmware Image Download command after completion of a Firmware Commit
command shall cause the controller to discard all remaining portion(s), if any, of downloaded images. If a
Controller Level Reset occurs between a firmware download and completion of the Firmware Commit
command, then the controller shall discard all portion(s), if any, of downloaded images.
The Firmware Image Download command uses the Data Pointer, Command Dword 10, and Command
Dword 11 fields. All other command specific fields are reserved.


---
### üñºÔ∏è Figures (2)

#### Figure 1: Figure 188: Firmware Image Download ‚Äì Data Pointer
![Figure 188: Firmware Image Download ‚Äì Data Pointer](../section_images/Figure_5_2_9_Firmware_Image_Download_command_1.png)


#### Figure 2: Figure 189: Firmware Image Download ‚Äì Command Dword 10
![Figure 189: Firmware Image Download ‚Äì Command Dword 10](../section_images/Figure_5_2_9_Firmware_Image_Download_command_2.png)

