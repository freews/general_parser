##### 8.1.1.1 Asymmetric Namespace Access Reporting Overview

> **Section ID**: 8.1.1.1 | **Page**: 539-541

Asymmetric Namespace Access (ANA) occurs in environments where namespace access characteristics
(e.g., performance or ability to access the media) may vary based on:
•
the controller used to access the namespace (e.g., Fabrics); and
•
the internal configuration of the NVM subsystem. Asymmetric Namespace Access Reporting is
used to indicate to the host information about those access characteristics.
Shared namespaces may be accessed through controllers via multiple PCIe ports or fabric ports (refer to
section 2.4.1). The controllers that provide access to a shared namespace may provide identical access
characteristics through all controllers (i.e., symmetric access), or may provide different access
characteristics through some controllers (i.e., asymmetric access).
Private namespaces are accessed by only one controller at a time. The access characteristics of the
namespace through that controller may be impacted as a result of changes to the internal configuration of
the NVM subsystem. If the access characteristics of the namespace through that controller are impacted
by the internal configuration of the NVM subsystem, then asymmetric access occurs.
Symmetric access to a namespace occurs when:
•
the access characteristics using one controller are identical to the access characteristics when
using a different controller; and
•
changes to the internal configuration of the NVM subsystem do not impact the access
characteristics.
Asymmetric access to a namespace occurs when:
•
the access characteristics using one controller may differ from the access characteristics when
using a different controller; or
•
changes to the internal configuration of the NVM subsystem may impact the access characteristics.
While commands may be sent to a shared namespace through any attached controller with asymmetric
access, the characteristics (e.g., performance or ability to access the media) may differ based on which
controller is used; as a result, the host should consider those characteristics when selecting which controller
to use for each command that accesses the namespace. The NVM subsystem may perform autonomous
internal reconfiguration that results in a change to the access characteristics.
If an NVM subsystem supports Asymmetric Namespace Access Reporting, then all controllers in that NVM
subsystem shall:
•
set the Asymmetric Namespace Access Reporting Support (ANARS) bit to ‘1’ in the Controller
Multi-path I/O and Namespace Sharing Capabilities (CMIC) field in the Identify Controller data
structure (refer to Figure 328) to indicate support for Asymmetric Namespace Access Reporting;
•
set the Report ANA Optimized State (RANAOS) bit to ‘1’ in the Asymmetric Namespace Access
Capabilities (ANACAP) field in the Identify Controller data structure to indicate that the ANA
Optimized state is able to be reported;
•
set the Report ANA Non-Optimized State (RANANOS) bit to ‘1’ in the ANACAP field in the Identify
Controller data structure if ANA Non-Optimized state is able to be reported;
•
set the Report ANA Inaccessible State (RANAIS) bit to ‘1’ in the ANACAP field in the Identify
Controller data structure if ANA Inaccessible state is able to be reported;
•
set the Report ANA Persistent Loss State (RANAPLS) bit to ‘1’ in the ANACAP field in the Identify
Controller data structure if ANA Persistent Loss state is able to be reported;
•
set the Report ANA Change State (RANACS) bit to ‘1’ in the ANACAP field in the Identify Controller
data structure if ANA Change state is able to be reported;
•
support Asymmetric Namespace Access Change Notices (refer to section 5.2.26.1.5); and
•
support the Asymmetric Namespace Access log page (refer to section 5.2.12.1.13).
Namespaces attached to a controller that supports Asymmetric Namespace Access Reporting shall:
•
be members of an ANA Group; and
•
supply a valid ANA Group Identifier in the ANA Group Identifier (ANAGRPID) field in the Identify
Namespace data structure (refer to the applicable NVM Express I/O Command Set specification).
A controller that supports Asymmetric Namespace Access Reporting may also support multiple domains
(refer to section 3.2.5).
Figure 619 shows an example of an NVM subsystem where access characteristics vary as a result of the
presence of two independent domains. In this example, the non-volatile storage media for namespace B
and for namespace C are contained within the same domain that contains controller 2. As a result, controller
2 provides optimized access to namespace B and to namespace C while controller 1 does not provide
optimized access to namespace B or to namespace C. In an NVM subsystem that supports multiple
domains (refer to section 3.2.5), the Media Access Boundary shown in Figure 619 may be a Communication
boundary as shown in Figure 71 and Figure 72.
To provide optimized access to namespace B through controller 1, the NVM subsystem may be
administratively reconfigured, or may perform autonomous internal reconfiguration actions that change the
access characteristics of namespace B when accessed through controller 1 and controller 2 as shown in
Figure 620. Controller 2 provides optimized access to namespace C while controller 1 provides optimized
access to namespace B. In an NVM subsystem that supports multiple domains (refer to section 3.2.5), the
Media Access Boundary shown in Figure 620 may be a Communication boundary as shown in Figure 71
and Figure 72.
