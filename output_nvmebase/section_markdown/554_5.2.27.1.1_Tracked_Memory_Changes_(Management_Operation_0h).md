###### 5.2.27.1.1 Tracked Memory Changes (Management Operation 0h)

> **Section ID**: 5.2.27.1.1 | **Page**: 474-475

The Tracked Memory Changes management operation of the Track Receive command is used to report
host memory changes by the controller specified by the Controller Identifier (CNTLID) field (refer to Figure
488) processing any and all commands (e.g., Admin commands, I/O command) as a result of tracking host
memory modifications being started by a Tracked Memory Changes management operation of the Track
Send command (refer to section 5.2.28.1.2).
The data returned is a Tracked Memory Change data structure defined by Figure 489. The identifier for the
controller that is tracked is specified in the Controller Identifier field in the Command Dword 11 field as
defined in Figure 488.
If the Track Receive command for this management operation completes successfully, then the controller
shall remove the tracked memory changes that were reported in the returned data. The reported memory
ranges identify the host memory that has changed due to the specified controller processing commands
since:
â€¢
Track Memory Changes was enabled (refer to 5.2.28.1.2) and no tracked memory changes have
been reported by the controller; or
â€¢
the controller last reported tracking change while the memory tracking remained enabled.
If tracked memory changes occur for the same memory address at a high frequency, the controller reporting
of the Tracking Memory Changed Descriptors for that address may be delayed by a vendor specific amount
of time so that Tracking Memory Changed Descriptors for other addresses are able to be reported during
that vendor specific amount of time.
If the Suspended bit is set to â€˜1â€™ and the More To Report (MTR) bit is cleared to â€˜0â€™ in the returned Track
Memory Changed data structure, then all host memory changes have been reported to the host. If the
controller specified by the CNTLID field remains suspended, then the controller has no more tracked host
memory changes to report to the host until the controller specified by the CNTLID field is resumed.
If the Suspended bit is cleared to â€˜0â€™ and the More To Report (MTR) bit is cleared to â€˜0â€™ in the returned Track
Memory Changed data structure, then no additional tracked host memory changes are available to report
to the host in a subsequent commands at the time of processing this command.
Figure 492 defines a Tracked Memory Changed Descriptor.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_5_2_27_1_1_Tracked_Memory_Changes_Management_Operation_0h
![Table_5_2_27_1_1_Tracked_Memory_Changes_Management_Operation_0h](../section_images/Table_5_2_27_1_1_Tracked_Memory_Changes_Management_Operation_0h.png)

| Bits | Description |
| :--- | :--- |
| 31:16 | Reserved |
| 15:00 | **Controller Identifier (CNTLID):** This field specifies the identifier of the controller for which the tracked memory changes, if any, are to be returned. |
| **Bytes** | **Description** |
| | **Header** |
| 00 | **Version (VER):** This field indicates the version of this data structure.<br>This field shall be cleared to 0h. |
| **Bytes** | **Description** |
| | **Attributes (ATTRB):** This field identifies attributes associated with the tracked memory changes. |
| | | **Bits** | **Description** |
| | | 7:2 | Reserved |
| | | 1 | **Suspended (SUSP):** If this bit is set to '1', then the controller was suspended during the processing of the command. If this bit is cleared to '0', then the controller was not suspended during the processing of the command. |
| | | 0 | **More To Report (MTR):** If this bit is set to '1', then the controller was not able to report all of the tracked memory changes available to be reported in this returned data structure. The host should issue a subsequent Track Receive command to obtain any tracked memory changes not reported.<br>If this bit is cleared to '0', the controller reported all of the tracked memory changes available to be reported, if any, at the time the Track Receive command was processed.<br>If the NTMCD field is cleared to 0h, then this bit shall be cleared to '0'. |
| 01 | |
| | **Controller Identifier (CNTLID):** This field indicates the identifier for the controller whose memory modifications are being tracked and reported in the Tracked Memory Changed Descriptor list. (i.e., the same controller identifier as specified by the host in the Management Operation Specific field (refer to Figure 488)). |
| 03:02 | |
| | **Number of Tracked Memory Changed Descriptors (NTMCD):** This field indicates the number of Tracked Memory Changed Descriptors in this data structure. A value of 0h indicates that at the time of processing the Track Receive command, there was no tracked memory changes to report. |
| 07:04 | |
| | **Reported Memory Range Granularity (RMPMG):** This field specifies the granularity unit size of the Length field in each Tracked Memory Changed Descriptor containing in this data structure. The value specified is a power of two (2^n) times 4 KiB. For example, a value of 8h indicates that the granularity of the power is (2^8) * 4 KiB which is equal to 1 MiB. |
| 09:08 | |
| 15:10 | Reserved |
| | **Tracked Memory Changed Descriptor List** |
| | **Tracked Memory Changed Descriptor 1:** This field contains the first Tracked Memory Change Descriptor as defined in Figure 492, if any. |
| | **Tracked Memory Changed Descriptor 2:** This field contains the second Tracked Memory Changed Descriptor as defined in Figure 492, if any. |
| | ... |
| | **(NTMCD*16)+15:** **Tracked Memory Changed Descriptor NTMCD:** This field contains the last Tracked Memory Changed Descriptor as defined in Figure 492, if any. |
| | ... |
| **Bytes** | **Description** |
| | |
| 07:00 | **Start Address (SADDR):** This field indicates the 64-bit starting address of a memory range in which one or more bytes of data have been written. The address in this field shall be aligned to the granularity specified by the RMPMG field. For example, if the value in the RMPMG field is 8h, then the value in this field is required to be aligned to 1 MiB (i.e., bits 19:0 are cleared to 0h). |
| 11:08 | **Length (LEN):** This field specifies the length of this memory range in units of the tracking granularity as indicated in the RMPMG field. For example, if the value in the RMPMG field is 8h and the value of this field is 4h then the length of this length of this memory range is 1 MiB * 4h which is 4 MiB. |
| 15:12 | Reserved |

