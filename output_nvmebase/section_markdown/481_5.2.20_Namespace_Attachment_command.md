#### 5.2.20 Namespace Attachment command

> **Section ID**: 5.2.20 | **Page**: 411-412

The Namespace Attachment command is used to attach and detach controllers from a namespace. The
attach and detach operations (refer to section 8.1.16) are persistent across all reset events. Namespace
attach and detach operations are persistent across Virtualization Management commands that set a
secondary controller offline.
The Namespace Attachment command uses the Data Pointer and Command Dword 10 fields. All other
command specific fields are reserved.
The Select field determines the data structure used as part of the command. The data structure is 4,096
bytes in size. The data structure used for Controller Attach and Controller Detach is a Controller List (refer
to section 4.6.1). The controllers that are to be attached or detached, respectively, are described in the data
structure.
If the SEL field specifies the Controller Attach value, then:
â€¢
If the Maximum Domain Namespace Attachments (MAXDNA) field in the Identify Controller data
structure (refer to Figure 328) is non-zero, then:
For each controller specified in the controller list, if attaching the namespace to that I/O
controller causes the sum of the number of namespaces attached to each I/O controller in
the Domain to be greater than the value specified in the MAXDNA field, then the controller
shall abort the command with a status code of Namespace Attachment Limit Exceeded;
and
â€¢
For each I/O controller specified in the controller list, if the Maximum I/O Controller Namespace
Attachments (MAXCNA) field in the Identify Controller data structure for that controller is non-zero,
then:
If attaching the namespace to that I/O controller causes that I/O controller to have the
number of attached namespaces to be greater than the value specified in the MAXCNA
field, then the controller shall abort the command with a status code of Namespace
Attachment Limit Exceeded.
If an attempt is made to attach a namespace to a controller that does not support the corresponding I/O
Command Set, then the command shall be aborted with a status code of I/O Command Set Not Supported.
If an attempt is made to attach a namespace to a controller that supports the corresponding I/O Command
Set and the corresponding I/O Command Set is not enabled by the I/O Command Set profile feature, then
the command shall be aborted with a status code of I/O Command Set Not Enabled.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_5_2_20_Namespace_Attachment_command
![Table_5_2_20_Namespace_Attachment_command](../section_images/Table_5_2_20_Namespace_Attachment_command.png)

| Bits | Description |
| :--- | :--- |
| 127:00 | **Data Pointer (DPTR):** This field specifies the start of the data buffer. Refer to Figure 92 for the definition of this field. If using PRPs, this field shall not be a pointer to a PRP List as the data buffer may not cross more than one page boundary. |
| 31:04 | Reserved |
| 03:00 | **Select (SEL):** This field selects the type of attachment to perform. <br> <table> <tr> <th>Value</th> <th>Definition</th> </tr> <tr> <td>0h</td> <td>Controller Attach</td> </tr> <tr> <td>1h</td> <td>Controller Detach</td> </tr> <tr> <td>2h to Fh</td> <td>Reserved</td> </tr> </table> |

