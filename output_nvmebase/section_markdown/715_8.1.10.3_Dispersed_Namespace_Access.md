##### 8.1.10.3 Dispersed Namespace Access

> **Section ID**: 8.1.10.3 | **Page**: 590-591

The host may discover if a namespace is capable of being accessed using controllers contained in two or
more participating NVM subsystems concurrently (i.e., may discover if a namespace may be a dispersed
namespace) by issuing an Identify command (i.e., CNS 00h if supported by the I/O Command Set or CNS
08h) to the controller for the specified NSID. If the namespace is capable of being accessed using
controllers contained in two or more participating NVM subsystem concurrently, then the controller shall set
the Dispersed Namespace (DISNS) bit to ‘1’ in the Namespace Multi-path I/O and Namespace Sharing
Capabilities (NMIC) field of the returned I/O Command Set Independent Identify Namespace data structure
(refer to Figure 335) or Identify Namespace data structure (refer to the NVM Express NVM Command Set
Specification).
All controllers in each participating NVM subsystem that are able to provide access to a specific dispersed
namespace shall support the I/O Command Set associated with that dispersed namespace.
The host may discover the NQNs of participating NVM subsystems which contain controllers that are able
to provide access to a dispersed namespace by issuing a Get Log Page command for the Dispersed
Namespace Participating NVM Subsystems log page (i.e., the Log Page Identifier (LID) field set to 17h
(refer to section 5.2.12.1.23)).
Hosts specify support for dispersed namespaces by setting the Host Dispersed Namespace Support
(HDISNS) field to 1h in the Host Behavior Support feature by issuing a Set Features command with Feature
Identifier (FID) set to 16h (refer to Figure 426).
If the HDISNS field is set to 1h, the host specifies support for:
•
treating all instances of a dispersed namespace as the same namespace, based upon the shared
globally unique namespace identifier (refer to section 8.1.10.2) when accessing that dispersed
namespace through multiple controllers on the same participating NVM subsystem;
•
treating all instances of a dispersed namespace as the same namespace, based upon the shared
globally unique namespace identifier when accessing that dispersed namespace through
controllers on multiple participating NVM subsystems; and
•
specifying a Host Identifier that is unique across all hosts that connect to any participating NVM
subsystem.
If the HDISNS field is set to 1h, the controller shall not abort any command that the host submits to
dispersed namespaces with a status code of Host Dispersed Namespace Support Not Enabled.
A participating NVM subsystem shall support prohibiting host access to dispersed namespaces when the
HDISNS field is cleared to 0h in the Host Behavior Support feature, as described in section 8.1.10.4. A
participating NVM subsystem may either:
•
allow host access to a dispersed namespace when the HDISNS field is cleared to 0h in the Host
Behavior Support feature if the host associated with the Host NQN in the connection is only able to
access the dispersed namespace from a single participating NVM subsystem; or
•
prohibit host access to dispersed namespaces when the HDISNS field is cleared to 0h in the Host
Behavior Support feature.
A participating NVM subsystem that allows host access to a dispersed namespace when the HDISNS field
is cleared to 0h in the Host Behavior Support feature if the host associated with the Host NQN in the
connection is only able to access the dispersed namespace from a single participating NVM subsystem
shall implement a method to determine if the host is able to access the dispersed namespace from multiple
participating NVM subsystems. The method used to determine if the host is able to access the dispersed
namespace from multiple participating NVM subsystems is outside the scope of this specification. If a
participating NVM subsystem determines that a Connect command requests a host with the HDISNS field
cleared to 0h in the Host Behavior Support feature having access to the same dispersed namespace
through multiple participating NVM subsystems, then that participating NVM subsystem shall either:
a) abort a Connect command with a status code of Connect Invalid Host if that Connect command
requests the host associated with the Host NQN in the connection having access to a dispersed
namespace through multiple participating NVM subsystems. Aborting a Connect command for this
reason may result in the host being unable to access other namespaces (i.e., namespaces that are
unrelated to the dispersed namespace) on that NVM subsystem. This enforces the requirement
that a host that has not set the HDISNS field to 1h in the Host Behavior Support feature be allowed
to access a dispersed namespace on only one participating NVM subsystem by preventing all
access to any other participating NVM subsystems (including all other namespaces on those other
participating NVM subsystems); or
b) allow a Connect command that requests the host associated with the Host NQN in the connection
having access to a dispersed namespace through multiple participating NVM subsystems, but
prohibit host access to that dispersed namespace from multiple participating NVM subsystems
(e.g., prohibit host access to that dispersed namespace on the second participating NVM
subsystem) as described in section 8.1.10.4. This enforces the requirement that a host that has not
set the HDISNS field to 1h in the Host Behavior Support feature be allowed to access a dispersed
namespace on only one participating NVM subsystem by, for each dispersed namespace,
preventing access to that dispersed namespace on any other participating NVM subsystems (and
allowing access to other namespaces that are not dispersed namespaces on those other
participating NVM subsystems).
