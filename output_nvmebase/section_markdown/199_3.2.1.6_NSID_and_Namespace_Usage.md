##### 3.2.1.6 NSID and Namespace Usage

> **Section ID**: 3.2.1.6 | **Page**: 102-103

NSIDs shall be unique within the NVM subsystem (e.g., NSID of 3 shall refer to the same physical
namespace regardless of the accessing controller) if:
a) Namespace Management (refer to section 8.1.16), ANA Reporting (refer to section 8.1.1), or NVM
Sets (refer to section 3.2.2) capabilities are supported; or
b) The Sanitize Namespace command is supported.
If the Namespace Management capability, the ANA Reporting capability, the NVM Sets capability, and the
Sanitize Namespace command are not supported, then NSIDs:
a) for shared namespaces shall be unique within the NVM subsystem; and
b) for private namespaces are not required to be unique within the NVM subsystem.
The Identify command (refer to section 5.2.13) may be used to determine the active NSIDs for a controller
and the allocated NSIDs in the NVM subsystem.
If the MNAN field (refer to Figure 328) is cleared to 0h, then the maximum number of allocated NSIDs is
the same as the value reported in the NN field (refer to Figure 328). If the MNAN field is non-zero, then the
maximum number of allocated NSIDs may be less than the number of namespaces (e.g., an NVM
subsystem may support a maximum valid NSID value (i.e., the NN field) set to 1,000,000 but support a
maximum of 10 allocated NSID values).
To determine the active NSIDs for a particular controller, the host may follow either of the following methods:
1. Issue an Identify command with the CNS field cleared to 0h for each valid NSID (based on the
Number of Namespaces value (i.e., MNAN field or NN field) in the Identify Controller data structure).
If a non-zero data structure is returned for a particular NSID, then that is an active NSID; or
2. Issue an Identify command with a CNS field set to 2h to retrieve a list of up to 1,024 active NSIDs.
If there are more than 1,024 active NSIDs, continue to issue Identify commands with a CNS field
set to 2h until all active NSIDs are retrieved.
To determine the allocated NSIDs in the NVM subsystem, the host may issue an Identify command with
the CNS field set to 10h to retrieve a list of up to 1,024 allocated NSIDs. If there are more than 1,024
allocated NSIDs, continue to issue Identify commands with a CNS field set to 10h until all allocated NSIDs
are retrieved.
Namespace IDs may change across power off conditions. However, it is recommended that namespace
IDs remain static across power off conditions to avoid issues with a host. To determine if the same
namespace has been encountered, the host may use the:
a) UUID field in the Namespace Identification Descriptor (refer to Figure 331), if present;
b) NGUID field in the Identify Namespace data (refer to the applicable NVM Express I/O Command
Set specification) or in the Namespace Identification Descriptor, if present; or
c) EUI64 field in the Identify Namespace data or in the Namespace Identification Descriptor, if present.
UIDREUSE bit in the NSFEAT field (refer to Figure 335 or the Identify Namespace data structure in the
NVM Express NVM Command Set Specification, if applicable) indicates NGUID and EUI64 reuse
characteristics.
If Asymmetric Namespace Access Reporting is supported (i.e., the Asymmetric Namespace Access
Reporting Support (ANARS) bit is set to ‘1’ in the CMIC field in the Identify Controller data structure (refer
to Figure 328)), refer to the applicable NVM Express I/O Command Set specification for additional detail, if
any.
A namespace may or may not have a relationship to a Submission Queue; this relationship is determined
by the host implementation. The controller shall support access to any attached namespace from any I/O
Submission Queue.
