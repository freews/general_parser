##### 3.1.4.5 Offset 14h: CC â€“ Controller Configuration

> **Section ID**: 3.1.4.5 | **Page**: 82-86

This property modifies settings for the controller. A host shall set the Arbitration Mechanism Selected
(CC.AMS), the Memory Page Size (CC.MPS), and the I/O Command Set Selected (CC.CSS) to valid values
prior to enabling the controller by setting CC.EN to â€˜1â€™. Attempting to create an I/O queue before initializing
the I/O Completion Queue Entry Size (CC.IOCQES) and the I/O Submission Queue Entry Size
(CC.IOSQES) shall cause a controller to abort a Create I/O Completion Queue command or a Create I/O
Submission Queue command with a status code of Invalid Queue Size.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_3_1_4_5_Offset_14h_CC_Controller_Configuration
![Table_3_1_4_5_Offset_14h_CC_Controller_Configuration](../section_images/Table_3_1_4_5_Offset_14h_CC_Controller_Configuration.png)

| Bits | Type | Reset | Description |
| :--- | :--- | :--- | :--- |
| 31:25 | RO | 0h | Reserved |
| 24 | RW/RO | 0b | **Controller Ready Independent of Media Enable (CRIME):** This bit controls the controller ready mode. The controller ready mode is determined by the state of this bit at the time the controller is enabled by transitioning the CC.EN bit from '0' to '1'.<br>If the CAP.CRMS field is set to 11b, then this bit is RW. If the CAP.CRMS field is not set to 11b, then this bit is RO and shall be cleared to '0'. Refer to sections 3.5.3 and 3.5.4 for more detail.<br>Changing the value of this field may cause a change in the time reported in the CAP.TO field. Refer to the definition of CAP.TO for more details.<br> |
| | | | <table><tr><th>Value</th><th>Definition</th></tr><tr><td>0b</td><td>Controller Ready With Media Enable: Enabling the controller (i.e., CC.EN transitions from '0' to '1') when this bit is cleared to '0' enables Controller Ready With Media mode.</td></tr><tr><td>1b</td><td>Controller Ready Independent Of Media Mode: Enabling the controller when this bit is set to '1' enables Controller Ready Independent of Media mode.</td></tr></table> |
| 23:20 | RW/RO | 0h | **I/O Completion Queue Entry Size (IOCQES):** This field defines the I/O completion queue entry size that is used for the selected I/O Command Set(s). The required and maximum values for this field are specified in the CQES field in the Identify Controller data structure in Figure 328 for each I/O Command Set. The value is in bytes and is specified as a power of two (2^n).<br>If any I/O Completion Queues exist, then write operations that change the value in this field produce undefined results.<br>If the controller does not support I/O queues, then this field shall be read-only with a value of 0h.<br>For Discovery controllers, this field is reserved. |
| 19:16 | RW/RO | 0h | **I/O Submission Queue Entry Size (IOSQES):** This field defines the I/O submission queue entry size that is used for the selected I/O Command Set(s). The required and maximum values for this field are specified in the SQES field in the Identify Controller data structure in Figure 328 for each I/O Command Set. The value is in bytes and is specified as a power of two (2^n).<br>If any I/O Submission Queues exist, then write operations that change the value in this field produce undefined results.<br>If the controller does not support I/O queues, then this field shall be read-only with a value of 0h.<br>For Discovery controllers, this field is reserved. |
| Bits | Type | Reset | Description |
| 15:14 | RW | 00b | **Shutdown Notification (SHN):** This field is used to initiate a controller shutdown when a power down condition is expected. For a normal controller shutdown, it is expected that the controller is given time to process the controller shutdown before power is removed. For an abrupt shutdown, the host may or may not wait for the controller shutdown to complete before power is removed.<br>The controller shutdown notification values are defined as:<br> |
| | | | <table><tr><th>Value</th><th>Definition</th></tr><tr><td>00b</td><td>No notification and no effect</td></tr><tr><td>01b</td><td>Normal shutdown notification</td></tr><tr><td>10b</td><td>Abrupt shutdown notification</td></tr><tr><td>11b</td><td>Reserved</td></tr></table> |
| | | | This field should be written by the host prior to any power down condition and prior to any change of the PCI power management state. It is recommended that this field also be written prior to a warm reset (refer to the PCI Express Base Specification). To determine when the controller shutdown processing is complete, refer to the definition of the CSTS.SHST field. Refer to section 3.6 for additional processing details.<br>Other fields in this property (including the EN bit) may be modified as part of updating this field to 01b or 10b to initiate a controller shutdown. If the host write to this property that initiates a shutdown also clears the EN bit from '1' to '0', then both a Controller Reset and a controller shutdown occur.<br>If an NVM Subsystem Shutdown is reported as in progress or is reported as complete (i.e., CSTS.ST is set to '1', and CSTS.SHST is set to either 01b or 10b), then writes to this field modify the field value but have no effect. Refer to section 3.6.3 for details. |
| 13:11 | RW | 000b | **Arbitration Mechanism Selected (AMS):** This field selects the arbitration mechanism to be used. This value can only be changed when CC.EN is cleared to '0'. The host shall only set this field to supported arbitration mechanisms indicated in CAP.AMS. If this field is set to an unsupported value, then controller behavior is undefined.<br>For Discovery controllers, this value shall be cleared to 0h. |
| | | | <table><tr><th>Value</th><th>Definition</th></tr><tr><td>000b</td><td>Round Robin</td></tr><tr><td>001b</td><td>Weighted Round Robin with Urgent Priority Class</td></tr><tr><td>010b to 110b</td><td>Reserved</td></tr><tr><td>111b</td><td>Vendor Specific</td></tr></table> |
| 10:07 | RW | 0h | **Memory Page Size (MPS):** This field indicates the host memory page size. The memory page size is (2 ^ (MPS + 12)) bytes. Thus, the minimum host memory page size is 4 KiB and the maximum host memory page size is 128 MiB. The value set by the host shall be a supported value as indicated by the CAP.MPSMAX and CAP.MPSMIN fields. If the host sets this field to a value that is not supported (i.e., a value greater than CAP.MPSMAX or a value that is less than CAP.MPSMIN), then controller behavior is undefined. This field also describes the value used for PRP entry size. This field shall only be modified by the host while CC.EN is cleared to '0'. If this field is modified by the host while CC.EN is set to '1', then controller behavior is undefined.<br>For Discovery controllers this property shall be cleared to 0h. |
| Bits | Type | Reset | Description |
| 06:04 | RW | 000b | **I/O Command Set Selected (CSS):** This field specifies the I/O Command Set or Sets that are selected. This field shall only be changed when the controller is disabled (i.e., CC.EN is cleared to '0'). The I/O Command Set or Sets that are selected shall be used for all I/O Submission Queues.<br> |
| | | | <table><tr><th>Value</th><th>Definition</th></tr><tr><td>000b</td><td><table><tr><th>CAP.CSS.NCQSS Bit</th><th>Definition</th></tr><tr><td>1b</td><td>NVM Command Set</td></tr><tr><td>0b</td><td>Reserved</td></tr></table></td></tr><tr><td>001b to 101b</td><td>Reserved</td></tr><tr><td>110b</td><td><table><tr><th>CAP.CSS.IOCQSS Bit</th><th>Definition</th></tr><tr><td>1b</td><td>All Supported I/O Command Sets</td></tr><tr><td>0b</td><td>The I/O Command Sets that are supported are reported in the Identify I/O Command Set data structure (refer to section 5.2.13.2.19).</td></tr></table></td></tr><tr><td>111b</td><td><table><tr><th>CAP.CSS.NOIOCSS Bit</th><th>Definition</th></tr><tr><td>1b</td><td>Admin Command Set only<br>I/O Command Set and I/O Command Set specific Admin commands are not supported.<br>Any I/O Command Set specific Admin command submitted on the Admin Submission Queue is aborted with a status code of Invalid Command Opcode.</td></tr><tr><td>0b</td><td>Reserved</td></tr></table></td></tr></table> |
| 03:01 | RO | 000b | Reserved |
| 00 | RW | 0b | **Enable (EN):** While set to '1', then the controller shall process commands. When cleared to '0', then the controller shall not process commands nor post completion queue entries to Completion Queues. If the host writes this property to clear this bit from '1' to '0', the controller is reset (i.e., a Controller Reset, refer to section 3.7.2.1). That Controller Reset results in a Controller Level Reset (refer to section 3.7.2) that deletes all I/O Submission Queues and I/O Completion Queue, resets the Admin Submission Queue and the Admin Completion Queue, and brings the hardware to an idle state. That Controller Level Reset does not affect transport specific state (e.g., PCI Express registers including MMIO MSI-X registers), nor the Admin Queue properties (AQA, ASQ, or ACQ). Refer to section 3.7.2 for the effects of that Controller Level Reset on all controller properties. Internal controller state (e.g., Feature values defined in section 5.2.26 that are not persistent across power states) are reset to their default values. The controller shall ensure that there is no impact (e.g., data loss) caused by that Controller Level Reset to the results of commands that have had corresponding completion queue entries posted to an I/O Completion Queue prior to that Controller Level Reset.<br>When this bit is cleared to '0', the CSTS.RDY bit is cleared to '0' by the controller once the controller is ready to be enabled. When this bit is set to '1', the controller sets the CSTS.RDY bit to '1' when the controller is ready to process commands. The CSTS.RDY bit may be set to '1' before namespace(s) are ready to be accessed.<br>Setting this bit from a '0' to a '1' when the CSTS.RDY bit is a '1' or clearing this bit from a '1' to a '0' when the CSTS.RDY bit is cleared to '0' has undefined results. The Admin Queue properties (AQA, ASQ, and ACQ) are only allowed to be modified when this bit is cleared to '0'.<br>If an NVM Subsystem Shutdown is reported as in progress or is reported as completed (i.e., the CSTS.ST is set to '1', and the CSTS.SHST field is set to 01b or 10b), then:<br>â€¢ setting this bit from '0' to '1' modifies the field value but has no effect (e.g., the controller does not respond by setting the CSTS.RDY bit to '1'); and<br>â€¢ clearing this bit from '1' to '0' resets the controller as defined by this field.<br>Refer to section 3.6.3 for details on NVM Subsystem Shutdown functionality. |

