#### 4.1.1 Admin Command and I/O Command Common SQE

> **Section ID**: 4.1.1 | **Page**: 159-163

Each Common Command Format command is 64 bytes in size.
Command Dword 0, Namespace Identifier, Metadata Pointer, PRP Entry 1, PRP Entry 2, SGL Entry 1, and
Metadata SGL Segment Pointer have common definitions for all Admin commands and I/O commands for
all I/O Command Sets. Metadata Pointer, PRP Entry 1, PRP Entry 2, and Metadata SGL Segment Pointer
are not used by all commands. Command Dword 0 is defined in Figure 91.
The Common Command Format is defined in Figure 92. Any additional I/O Command Set defined in the
future may use an alternate command size or format.
SGLs shall not be used for Admin commands in NVMe over PCIe implementations.
In addition to the fields commonly defined for the Common Command Format, Vendor Specific commands
may support the Number of Dwords in Data Transfer and Number of Dwords in Metadata Transfer fields. If
supported, the command format for the Vendor Specific commands is defined in Figure 93. For more
details, refer to section 8.1.28.


---
### üìä Tables (3)

#### Table 1: Table_4_1_1_Admin_Command_and_I_O_Command_Common_SQE_1
![Table_4_1_1_Admin_Command_and_I_O_Command_Common_SQE_1](../section_images/Table_4_1_1_Admin_Command_and_I_O_Command_Common_SQE_1.png)

| Bits | Description |
| :--- | :--- |
| 31:16 | **Command Identifier (CID):** This field specifies a unique identifier for the command when combined with the Submission Queue identifier.<br>The value of FFFFh should not be used as the Error Information log page (refer to section 5.2.12.1.2) uses this value to indicate an error is not associated with a particular command. |
| 15:14 | **PRP or SGL for Data Transfer (PSDT):** This field specifies whether PRPs or SGLs are used for any data transfer associated with the command. PRPs shall be used for all Admin commands for NVMe over PCIe implementations. SGLs shall be used for all Admin and I/O commands for NVMe over Fabrics implementations (i.e., this field set to 01b). An NVMe Transport may support only specific values (refer to the applicable NVMe Transport binding specification for details).<br> |
| | | **Value** | **Definition** |
| | | 00b | PRPs Used: PRPs are used for this transfer. |
| | | 01b | SGLs Used MPTR Address: SGLs are used for this transfer. If used, Metadata Pointer (MPTR) contains an address of a single contiguous physical buffer.<br>Refer to the Metadata Buffer Alignment (MBA) bit of the SGLS field in the Identify Controller data structure (refer to Figure 328) for alignment requirements. |
| | | 10b | SGLs Used MPTR SGL Segment: SGLs are used for this transfer. If used, Metadata Pointer (MPTR) contains an address of an SGL segment containing exactly one SGL Descriptor that is qword aligned. |
| | | 11b | Reserved |
| | | If there is metadata that is not interleaved with the user data, as specified in the Format NVM command, then the Metadata Pointer (MPTR) field is used to point to the metadata. The definition of the Metadata Pointer field is dependent on the setting in this field. Refer to Figure 92. |
| 13:10 | |
| 09:08 | **Fused Operation (FUSE):** In a fused operation, a complex command is created by ‚Äúfusing‚Äù together two simpler commands. Refer to section 3.4.2. This field specifies whether this command is part of a fused operation and if so, which command it is in the sequence. |
| | | **Value** | **Definition** |
| | | 00b | Normal operation |
| | | 01b | First command of Fused operation |
| | | 10b | Second command of Fused operation |
| | | 11b | Reserved |
| | |
| | **Bits** | **Description** |
| | **07:02** | **Function (FN):** This field contains a value that, in combination with the other fields in the Opcode data structure, creates a unique combined opcode value. |
| | **07:00** | **Data Transfer Direction (DTD):** This field indicates the direction of a data transfer, if any. All options of the command shall transfer data as specified or transfer no data. All commands, including vendor specific commands, shall follow this convention. |
| | | **Value** | **Definition** |
| | | 00b | No Data Transfer: No data is transferred. |
| | | 01b | Host to Controller Transfer: Data is transferred from the host to the controller. |
| | | 10b | Controller to Host Transfer: Data is transferred from the controller to the host. |
| | | 11b | Bi-Directional Transfer: Data is transferred from the host to the controller and from the controller to the host. |


#### Table 2: Table_4_1_1_Admin_Command_and_I_O_Command_Common_SQE_2
![Table_4_1_1_Admin_Command_and_I_O_Command_Common_SQE_2](../section_images/Table_4_1_1_Admin_Command_and_I_O_Command_Common_SQE_2.png)

| Bytes | Description |
| :--- | :--- |
| 03:00 | **Command Dword 0 (CDW0):** This field is common to all commands and is defined in Figure 91. |
| | **Namespace Identifier (NSID):** This field specifies the namespace that this command applies to. If the namespace identifier is not used for the command, then this field shall be cleared to 0h. The value FFFFFFFFh in this field is a broadcast value (refer to section 3.2.1.2), where the scope (e.g., the NVM subsystem, all attached namespaces, or all namespaces in the NVM subsystem) are dependent on the command. Refer to Figure 142 and Figure 589 for commands that support the use of the value FFFFFFFFh in this field. |
| | Specifying an inactive namespace identifier (refer to section 3.2.1.4) in a command that uses the namespace identifier shall cause the controller to abort the command with a status code of Invalid Field in Command, unless otherwise specified. Specifying an invalid namespace identifier (refer to section 3.2.1.2) in a command that uses the namespace identifier shall cause the controller to abort the command with a status code of Invalid Namespace or Format, unless otherwise specified. |
| | If the namespace identifier is used for the command (refer to Figure 142), the value FFFFFFFFh is not supported for that command, and the host specifies a value of FFFFFFFFh, then the controller shall abort the command with a status code of Invalid Field in Command, unless otherwise specified. |
| | If the namespace identifier is not used for the command and the host specifies a value from 1h to FFFFFFFFh, then the controller shall abort the command with a status code of Invalid Field in Command, unless otherwise specified. |
| 07:04 | **Command Dword 1 (CDW1):** This field is command specific. |
| 11:08 | **Command Dword 2 (CDW2):** This field is command specific Dword2. |
| 15:12 | **Command Dword 3 (CDW3):** This field is command specific Dword3. |
| Bytes | Description |
| :--- | :--- |
| 23:16 | **Metadata Pointer (MPTR):** If CDW0.PSDT (refer to Figure 91) is cleared to 00b, then this field shall contain the address of a contiguous physical buffer of metadata and that address shall be dword aligned (i.e., bits 1:0 cleared to 00b). The controller is not required to check that bits 1:0 are cleared to 00b. The controller may report an error of Invalid Field in Command if bits 1:0 are not cleared to 00b. If the controller does not report an error of Invalid Field in Command, then the controller shall operate as if bits 1:0 are cleared to 00b. |
| | If CDW0.PSDT is set to 01b, then this field shall contain the address of a contiguous physical buffer of metadata. Refer to the Metadata Buffer Alignment (MBA) bit of the SGLS field in the Identify Controller data structure for alignment requirements. |
| | If CDW0.PSDT is set to 10b, then this field shall contain the address of an SGL segment that contains exactly one SGL Descriptor. The address of that SGL segment shall be qword aligned (i.e., bits 2:0 cleared to 000b). The SGL Descriptor contained in that SGL segment is the first SGL Descriptor of the metadata for the command. If the SGL Descriptor contained in that SGL segment is an SGL Data Block descriptor, then that SGL Data Block Descriptor is the only SGL Descriptor and therefore describes the entire metadata data transfer. Refer to section 4.3.2. The controller is not required to check that bits 2:0 are not cleared to 000b. The controller may report an error of Invalid Field in Command if bits 2:0 are not cleared to 000b. If the controller does not report an error of Invalid Field in Command, then the controller shall operate as if bits 2:0 are cleared to 000b. |
| Bytes | Description |
| :--- | :--- |
| 39:32 | **Data Pointer (DPTR):** This field specifies the data used in the command. |
| | If CDW0.PSDT is cleared to 00b, then the definition of this field is: |
| | **PRP Entry 2 (PRP2):** This field: |
| | ‚Ä¢ is reserved if the data transfer does not cross a memory page boundary; |
| | ‚Ä¢ specifies the Page Base Address of the second memory page if the data transfer crosses exactly one memory page boundary. E.g., |
| | o the command data transfer length is equal in size to one memory page and the offset portion of the PBAO field of PRP1 is non-zero; or |
| | o the Offset portion of the PBAO field of PRP1 is equal to 0h and the command data transfer length is greater than one memory page and less than or equal to two memory pages in size; |
| | and |
| | ‚Ä¢ is a PRP List pointer if the data transfer crosses more than one memory page boundary. E.g.,: |
| | o the command data transfer length is greater than or equal to two memory pages in size but the offset portion of the PBAO field of PRP1 is non-zero; or |
| | o the command data transfer length is equal in size to more than two memory pages and the Offset portion of the PBAO field of PRP1 is equal to 0h. |
| | **PRP Entry 1 (PRP1):** This field contains: |
| | ‚Ä¢ the first PRP entry for the command; or |
| | ‚Ä¢ a PRP List pointer, |
| | depending on the command (e.g., the Create I/O Completion Queue command (refer to Figure 502)). |
| | If CDW0.PSDT is set to 01b or 10b, then the definition of this field is: |
| | **SGL Entry 1 (SGL1):** This field contains the first SGL segment for the command. |
| | If the SGL segment is an SGL Data Block or Keyed SGL Data Block or Transport SGL Data Block descriptor, then it describes the entire data transfer. If more than one SGL segment is needed to describe the data transfer, then the first SGL segment is a Segment, or Last Segment descriptor. Refer to section 4.3.2 for the definition of SGL segments and descriptor types. |
| | The NVMe Transport may support a subset of SGL Descriptor types and features as defined in the NVMe Transport binding specification. |
| 39:24 | |
| 43:40 | **Command Dword 10 (CDW10):** This field is command specific Dword 10. |
| 47:44 | **Command Dword 11 (CDW11):** This field is command specific Dword 11. |
| 51:48 | **Command Dword 12 (CDW12):** This field is command specific Dword 12. |
| 55:52 | **Command Dword 13 (CDW13):** This field is command specific Dword 13. |
| 59:56 | **Command Dword 14 (CDW14):** This field is command specific Dword 14. |
| 63:60 | **Command Dword 15 (CDW15):** This field is command specific Dword 15. |


#### Table 3: Table_4_1_1_Admin_Command_and_I_O_Command_Common_SQE_3
![Table_4_1_1_Admin_Command_and_I_O_Command_Common_SQE_3](../section_images/Table_4_1_1_Admin_Command_and_I_O_Command_Common_SQE_3.png)

| Bytes | Description |
| :--- | :--- |
| 03:00 | **Command Dword 0 (CDW0):** This field is common to all commands and is defined in Figure 91. |
| 07:04 | **Namespace Identifier (NSID):** This field indicates the namespace ID that this command applies to. If the namespace ID is not used for the command, then this field shall be cleared to 0h. Setting this value to FFFFFFFFh causes the command to be applied to all namespaces attached to the controller processing the command, unless otherwise specified. <br> The behavior of a controller in response to an inactive namespace ID for a vendor specific command is vendor specific. Specifying an invalid namespace ID in a command that uses the namespace ID shall cause the controller to abort the command with a status code of Invalid Namespace or Format, unless otherwise specified. |
| 15:08 | Reserved |
| 39:16 | **Metadata and Data Pointers (MDPTR):** Refer to Figure 92 for the definition of these fields. |
| 43:40 | **Number of Dwords in Data Transfer (NDT):** This field indicates the number of dwords in the data transfer. |
| 47:44 | **Number of Dwords in Metadata Transfer (NDM):** This field indicates the number of dwords in the metadata transfer. |
| 51:48 | **Command Dword 12 (CDW12):** This field is command specific Dword 12. |
| 55:52 | **Command Dword 13 (CDW13):** This field is command specific Dword 13. |
| 59:56 | **Command Dword 14 (CDW14):** This field is command specific Dword 14. |
| 63:60 | **Command Dword 15 (CDW15):** This field is command specific Dword 15. |

