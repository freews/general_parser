#### 5.3.6 Virtualization Management command

> **Section ID**: 5.3.6 | **Page**: 486-487

The Virtualization Management command is supported by primary controllers that support the Virtualization
Enhancements capability. This command is used for several functions:
â€¢
Modifying Flexible Resource allocation for the primary controller;
â€¢
Assigning Flexible Resources for secondary controllers; and
â€¢
Setting the Online and Offline state for secondary controllers.
Refer to section 8.2.6 for more on the Virtualization Enhancements capability and the Virtualization
Management command.
The Virtualization Management command uses the Command Dword 10 and Command Dword 11 fields.
All other command specific fields are reserved.
If the action requested specifies a range of controller resources that:
a) does not exist;
b) is a Private Resource (e.g., VQ resources are requested when VQ resources are not supported, VI
resources are requested when VI resources are not supported); or
c) is currently in use (e.g., the number of Controller Resources (NR) is greater than the number of
remaining available flexible resources),
then the command is aborted with a status code of Invalid Resource Identifier.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_5_3_6_Virtualization_Management_command
![Table_5_3_6_Virtualization_Management_command](../section_images/Table_5_3_6_Virtualization_Management_command.png)

| Bits | Description |
| :--- | :--- |
| 31:16 | **Controller Identifier (CNTLID):** This field indicates the controller for which controller resources are to be modified. |
| 15:11 | Reserved |
| 10:08 | **Resource Type (RT):** This field indicates the type of controller resource to be modified. <br> <table> <tr> <th>Value</th> <th>Definition</th> </tr> <tr> <td>000b</td> <td>VQ Resources</td> </tr> <tr> <td>001b</td> <td>VI Resources</td> </tr> <tr> <td>010b to 111b</td> <td>Reserved</td> </tr> </table> |
| 07:04 | Reserved |
| 03:00 | **Action (ACT):** This field indicates the operation for the command to perform as described below. <br> <table> <tr> <th>Value</th> <th>Definition</th> </tr> <tr> <td>0h</td> <td>Reserved</td> </tr> <tr> <td>1h</td> <td>**Primary Controller Flexible Allocation:** Set the number of Flexible Resources allocated to this primary controller following the next Controller Level Reset initiated by any method other than a Controller Reset. If the Controller Identifier field does not correspond to this primary controller, then a status code of Invalid Controller Identifier is returned. This value is persistent across power cycles and resets.</td> </tr> <tr> <td>2h to 6h</td> <td>Reserved</td> </tr> <tr> <td>7h</td> <td>**Secondary Controller Offline:** Place the secondary controller in the Offline state and remove all Flexible Resources. If the Controller Identifier field does not correspond to a secondary controller associated with this primary controller, then a status code of Invalid Controller Identifier is returned. <br> It is not an error to request a secondary controller be placed in the offline state if that secondary controller is already in the offline state.</td> </tr> <tr> <td>8h</td> <td>**Secondary Controller Assign:** Assign the number of controller resources specified in Number of Controller Resources to the secondary controller. If the Controller Identifier field does not correspond to a secondary controller associated with this primary controller, then an error of Invalid Controller Identifier is returned. If the secondary controller is not in the Offline state, then a status code of Invalid Secondary Controller State is returned.</td> </tr> <tr> <td>9h</td> <td>**Secondary Controller Online:** Place the secondary controller in the Online state. If the Controller Identifier field does not correspond to a secondary controller associated with this primary controller, then an error of Invalid Controller Identifier is returned. If the secondary controller is not configured appropriately (refer to section 8.2.6) or the primary controller is not enabled, then a status code of Invalid Secondary Controller State is returned. <br> It is not an error to request a secondary controller be placed in the online state if that secondary controller is already in the online state.</td> </tr> <tr> <td>Ah to Fh</td> <td>Reserved</td> </tr> </table> |
| | |
| Bits | Description |
| :--- | :--- |
| 31:16 | Reserved |
| 15:00 | **Number of Controller Resources (NR):** This field indicates a number of controller resources to allocate or assign. |

