###### 5.2.12.1.14.2.5 NVM Subsystem Hardware Error Event (Event Type 05h)

> **Section ID**: 5.2.12.1.14.2.5 | **Page**: 271-274

An NVM Subsystem Hardware Error event shall be recorded in the Persistent Event Log when a supported
NVM subsystem hardware error event is detected. Which of the NVM subsystem hardware error events
are supported is vendor specific. The NVM subsystem hardware error event shall set the Persistent Event
Log Event Header:
â€¢
Event Type field to 05h; and
â€¢
Event Type Revision Field to 02h.
All detected NVM Subsystem Hardware Error events supported by the NVM subsystem shall be logged
unless otherwise specified (e.g., suppressed due to reoccurrence frequency (refer to section 5.2.12.1.14)).
NVM Subsystem Hardware Error event fields reporting information that is not available (e.g., due to a PCIe
optional feature that is not implemented) shall be cleared to 0h unless otherwise specified in the NVM
Subsystem Hardware Error Event code description.
The NVM Subsystem Hardware Error Event data is specified in Figure 239.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_5_2_12_1_14_2_5_NVM_Subsystem_Hardware_Error_Event_Event_Type_05h
![Table_5_2_12_1_14_2_5_NVM_Subsystem_Hardware_Error_Event_Event_Type_05h](../section_images/Table_5_2_12_1_14_2_5_NVM_Subsystem_Hardware_Error_Event_Event_Type_05h.png)

| Bytes | Description |
| :--- | :--- |
| 01:00 | NVM Subsystem Hardware Error Event Code (NSHEEC): This field contains a code (refer to Figure 240) indicating the type of NVM subsystem hardware error that is being reported. |
| 03:02 | Reserved |
| M+3:04 | Additional Hardware Error Information (AHEI): This field contains additional information about the hardware error event indicated in the NVM Subsystem Hardware Error Event Code field (refer to Figure 240). Where M is the number of bytes of additional hardware error information. <br> This field is omitted if the subsystem hardware error being reported does not contain additional hardware error information (i.e., if the number of bytes of additional hardware error information, M, is 0h). |
| Value | Definition |
| 00h | Reserved |
| 01h | PCIe Correctable Error: Indicates that the NVM subsystem has detected that a PCIe correctable error occurred. <br> Refer to Figure 242 for the format of the Additional Hardware Error Information field. |
| 02h | PCIe Uncorrectable Non-fatal Error: Indicates that the NVM subsystem has detected that a PCIe uncorrectable non-fatal error occurred. <br> Refer to Figure 242 for the format of the Additional Hardware Error Information field. |
| 03h | PCIe Uncorrectable Fatal Error: Indicates that the NVM subsystem has detected that a PCIe uncorrectable fatal error occurred. <br> Refer to Figure 242 for the format of the Additional Hardware Error Information field. |
| 04h | PCIe Link Status Change: Indicates that a change in the values reported in the PCIe Express Link Status register (refer to the PCI Express Link Status section in the NVMe over PCIe Transport Specification) has changed due to an attempt to correct unreliable link operation. <br> The Additional Hardware Error Information field shall be set to the contents of the PCIe Express Link Status register at the time of the event. |
| 05h | PCIe Link Not Active: Indicates that the Data Link Control and Management State Machine (refer to PCI Express Base Specification) has transitioned out of the DL_Active state without a corresponding event (e.g., without an indication from the host that the link is to be disabled). <br> This NVM subsystem hardware error event does not contain additional hardware error information. |
| Value | Definition |
| 06h | Critical Warning Condition: Indicates the NVM subsystem has detected a condition that causes a bit in the Critical Warning field of the SMART / Health Information log (refer to section 5.2.12.1.3) to be set to '1'. <br> Bits in this field represent the associated state at the time of this event. <br> The Additional Hardware Error Information field shall be set at the time of the event using the same format as is specified for the Critical Warning field of the SMART / Health Information log. |
| 07h | Endurance Group Critical Warning Condition: Indicates that the NVM subsystem has detected a condition that causes a bit in the Critical Warning field of an Endurance Group Information log page (refer to section 5.2.12.1.10) to be set to '1'. <br> Bits in this field represent the state at the time this event is added to the Persistent Event log page. <br> The Additional Hardware Error Information field shall be four bytes long and contain the following: |
| Bytes | Description |
| 0 | Endurance Group Critical Warning (EGCW): This field shall be set at the time this event is added to the Persistent Event log page using the same format as is specified for the Critical Warning field of the Endurance Group Information log page. |
| 1 | Reserved |
| 3:2 | Endurance Group Identifier (EGID): This field shall be set to the Endurance Group Identifier for the associated Endurance Group. |
| 08h | Unexpected Power Loss: Indicates that the controller incremented the Unexpected Power Losses field value in the SMART / Health Information log page. <br> Note that this field was previously named Unsafely Shutdown. <br> Refer to Figure 241 for the format of the Additional Hardware Error Information field. |
| 09h | Controller Fatal Status: Indicates that the Controller Fatal Status (CSTS.CFS) bit has been set to '1'. <br> This NVM subsystem hardware error event does not contain additional hardware error information. |
| 0Ah | Media and Data Integrity Status: Indicates that a completion queue entry contained a Media and Data Integrity status code (refer to Figure 106) other than 86h (i.e., Access Denied) or 87h (i.e., Deallocated or Unwritten logical Block). <br> The Additional Hardware Error Information field shall be set to the contents of the completion queue entry. |
| 0Bh | Controller Ready Timeout Exceeded: Indicates that: <br> a) the controller was not ready to process at least one command without error as described in section 3.5.4.1 within the amount of time indicated by: <br> â€¢ the Controller Ready With Media Timeout (CRTO.CRWMT) field in Controller Ready With Media mode (CC.CRIME is cleared to '0'); or <br> â€¢ the Controller Ready Independent of Media Timeout (CRTO.CRIMT) field in Controller Ready Independent of Media mode (CC.CRIME is set to '1'), since the controller was enabled; or <br> b) at least one namespace attached to the controller or media required to process at least one Admin command was not ready within the amount of time indicated by the Controller Ready With Media Timeout (CRTO.CRWMT) field since the controller was enabled by transitioning CC.EN from '0' to '1'. <br> Refer to Figure 243 for the format of the Additional Hardware Error Information field. |
| 0Ch to FFh | Reserved |
| Bytes | Description |
| 15:0 | Unexpected Power Loss (UPL): This field shall indicate the value from the Unexpected Power Losses field in the SMART / Health Information log page at the time of the event. |
| | Unexpected Power Loss Information (UPLIA): This field contains additional information about the unexpected power loss. |
| Bits | Description |
| 7:1 | Reserved |
| 16 | 0 |
| 0 | Unexpected Power Loss Due to Out-Of-Band Activity (UPLOA): If the shutdown was unsafe because media was not in a shutdown state when main power was lost or because an Admin command that accesses media as defined by Figure 84 was processed via the out-of-band mechanism with the Ignore Shutdown bit set to '1' (refer to the NVM Express Management Interface Specification) while shutdown processing was reported as in progress or was reported as complete (i.e., while the value of the CSTS.SHST field was set to 01b or 10b), then this bit shall be set to '1'; otherwise, this bit shall be cleared to '0'. |
| Bytes | Description |
| 01:00 | PCIe Device Status Register (PCIEDSR): Contains the contents of the PCIe Device Status Register (refer to the PCI Express Base Specification) at the time of the event. |
| | PCIe AER Support (PCIEAS): |
| Bits | Description |
| 7:1 | Reserved |
| 02 | 0 |
| 0 | PCIe AER Supported (PCIEAERS): If this bit is set to '1', then the PCIe AER (refer to the PCI Express specification) is supported and the PCIe AER Error Status field, PCIe AER Error Mask field, PCIe AER Header Log Register field, and the PCIe AER TLP Log Register field are reported. If this bit is cleared to '0', then the PCIe AER is not supported and the PCIe AER Error Status field, PCIe AER Error Mask field, PCIe AER Header Log Register field, and PCIe AER TLP Log Register field are not reported (i.e., bytes 79:16 are either not returned or are cleared to 0h). |
| 15:03 | Reserved |
| 31:16 | PCIe AER Error Status (PCIEAES): Contains the contents of: <br> a) the PCIe AER Correctable Error Status Register (refer to the Advanced Error Reporting Capability section in the NVMe over PCIe Transport Specification) at the time of the event if the error is a correctable error; or <br> b) the PCIe AER Uncorrectable Error Status Register (refer to the Advanced Error Reporting Capability section in the NVMe over PCIe Transport Specification), at the time of the event if the error is an uncorrectable error. |
| 47:32 | PCIe AER Error Mask (PCIEAEM): Contains the contents of: <br> a) the PCIe AER Correctable Error Mask Register (refer to the Advanced Error Reporting Capability section in the NVMe over PCIe Transport Specification) at the time of the event if the error is a correctable error; or <br> b) the PCIe AER Uncorrectable Error Mask Register (refer to the Advanced Error Reporting Capability section in the NVMe over PCIe Transport Specification) at the time of the event if the error is an uncorrectable error. |
| 63:48 | PCIe AER Header Log Register (PCIEAHLR): Contains the contents of the PCIe AER Header Log Register (refer to the Advanced Error Reporting Capability section in the NVMe over PCIe Transport Specification), if supported, at the time of the event. |
| 79:64 | PCIe AER TLP Log Register (PCIEATPLR): Contains the contents of the PCIe AER TLP Prefix Log Register (refer to the Advanced Error Reporting Capability section in the NVMe over PCIe Transport Specification), if supported, at the time of the event. |
| Bytes | Description |
| 0 | Controller State (CST): Indicates the state of the controller at the time the Controller Ready Timeout Exceeded error occurred. |
| Bits | Description |
| 7:4 | Reserved |
| 3 | Controller Not Ready (CNR): Indicates the controller was not ready to process at least one command without error as described in section 3.5.4.1 within the amount of time indicated by: <br> a) the Controller Ready With Media Timeout (CRTO.CRWMT) field in Controller Ready With Media mode (CC.CRIME is cleared to '0'); or <br> b) the Controller Ready Independent of Media Timeout (CRTO.CRIMT) field in Controller Ready Independent of Media mode (CC.CRIME is set to '1'), since the controller was enabled. |
| 2 | Admin Command Media Not Ready (ACMNR): Indicates media required to process at least one Admin command was not ready within the amount of time indicated by the Controller Ready With Media Timeout (CRTO.CRWMT) field since the controller was enabled by transitioning CC.EN from '0' to '1'. |
| 1 | Namespace Not Ready (NNR): Indicates at least one namespace attached to the controller was not ready within the amount of time indicated by the Controller Ready With Media Timeout (CRTO.CRWMT) field since the controller was enabled by transitioning CC.EN from '0' to '1'. |
| 0 | Controller Ready Independent of Media Enable (CRIME): Indicates the value of the CC.CRIME bit when the Controller Ready Timeout Exceeded error occurred. |
| 3:1 | Reserved |

