##### 3.9.3.1 Command Based Keep Alive on the Controller

> **Section ID**: 3.9.3.1 | **Page**: 151-152

The controller is using Command Based Keep Alive if the controller supports the Keep Alive Timer feature
and the TBKAS bit is cleared to ‘0’ in the Controller Attributes field in the Identify Controller data structure
(refer to Figure 328).
For Command Based Keep Alive:
•
The controller shall start the Keep Alive Timer if the Keep Alive Timer becomes active (refer to
section 3.9.2).
•
The controller shall restart the Keep Alive Timer if the Keep Alive Timer is active, and:
a Keep Alive command completes successfully; or
a Set Features command specifying the Keep Alive Timer feature and a non-zero KATO
field (refer to section 5.2.26.1.8) completes successfully.
•
The controller shall expire the Keep Alive Timer if:
the Keep Alive Timer is active in the controller; and
KATT has elapsed since the Keep Alive Timer was most recently started or restarted.
If the Keep Alive Timer on the controller expires, then the controller shall consider a Keep Alive Timeout to
have occurred. Upon the occurrence of a Keep Alive Timeout, the controller shall perform the cleanup
actions described in section 3.9.5.
