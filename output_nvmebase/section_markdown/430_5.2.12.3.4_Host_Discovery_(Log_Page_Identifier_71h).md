###### 5.2.12.3.4 Host Discovery (Log Page Identifier 71h)

> **Section ID**: 5.2.12.3.4 | **Page**: 336-339

The Host Discovery log page shall only be supported by Discovery controllers. The Host Discovery log
page shall not be supported by controllers that expose namespaces for NVMe over PCIe or NVMe over
Fabrics. The Host Discovery log page provides an inventory of hosts that have registered discovery
information with the Discovery controller. A host or a Discovery controller may obtain the host inventory
from this log page. Depending on the parameters specified in a Get Log Page command, the Host Discovery
log page may contain entries for:
‚Ä¢
all known hosts; or
‚Ä¢
a subset of entries specific to the host or Discovery controller requesting the log page.
Each Host Extended Discovery Log Page Entry shall contain at least one extended attribute containing a
Host Identifier.
Figure 313 specifies the format for the LID Specific Parameter field in the Supported Log Pages log page
(refer to section 5.2.12.1.1) for the Host Discovery log page.
If a Discovery controller supports returning records for all hosts that are registered (i.e., the All Host Entries
Supported (ALLHOSTES) bit is set to ‚Äò1‚Äô in the LID Specific Parameter field as defined in Figure 313) and
that Discovery controller processes a Get Log Page command for this log page with the All Host Entries
(ALLHOSTE) bit set to ‚Äò1‚Äô in the Log Specific Parameter field (refer to Figure 314), then that Discovery
controller shall return records for all hosts that are registered. The list of records returned by the Discovery
controller shall not be filtered based upon the requesting HOSTNQN. If a Discovery controller returns
records for all hosts that are registered, then that Discovery controller shall set the All Hosts (ALLHOST)
bit to ‚Äò1‚Äô in the Host Discovery Log Page Flags (HDLPF) field. A Discovery controller may require
authentication before reporting the ALLHOSTES bit being set to ‚Äò1‚Äô or may require configuration outside the
scope of this specification.
The Log Page Offset may be used to retrieve specific records. If the Discovery controller supports an index
offset for this log page (i.e., the Index Offset Supported (IOS) bit is set to ‚Äò1‚Äô in the Supported Log Pages
log page (refer to section 5.2.12.1.1) for this log page), then the index values specified in the Log Page
Offset Lower (LPOL) field (refer to Figure 203) and Log Page Offset Upper (LPOU) field (refer to Figure
204) in the Get Log Page command shall be used to index into the header and list of entries within this log
page (e.g., specifying an index offset of 0 returns this log page starting at the header, specifying an index
offset of 1 returns this log page starting at the offset of Entry 0, etc.). The number of records is returned in
the header of the log page. The format for a Host Extended Discovery Log Page Entry is defined in Figure
315. The format for an extended attribute is defined in Figure 533. The format for the Host Discovery log
page is defined in Figure 316.
A single Get Log Page command used to read the Host Discovery log page shall be atomic. If the Host
Discovery log page is read using multiple Get Log Page commands, then the reader should validate the
Generation Counter field to ensure that there has not been a change in the contents of the data. The Host
Discovery log page contents should be processed in the following sequence:
1. read the Host Discovery log page contents in order (i.e., with increasing Log Page Offset values);
2. re-read the Generation Counter field after the entire log page is transferred; and
3. if the Generation Counter field does not match the original value read, then discard the log page
read, as the entries may be inconsistent, and restart the sequence; or
4. if the Generation Counter field does match the original value read, then process the returned data.
If the log page contents change during this command sequence, then the Discovery controller may return
a status code of Discover Restart.


---
### üñºÔ∏è Figures (5)

#### Figure 1: Figure 313 specifies the format for the LID Specific Parameter field in the Supported Log Pages log page
(refer to section 5.2.12.1.1) for the Host Discovery log page.
![Figure 313 specifies the format for the LID Specific Parameter field in the Supported Log Pages log page
(refer to section 5.2.12.1.1) for the Host Discovery log page.](../section_images/Figure_5_2_12_3_4_Host_Discovery_Log_Page_Identifier_71h_1.png)


#### Figure 2: Figure 313: Host Discovery ‚Äì LID Specific Parameter Field
![Figure 313: Host Discovery ‚Äì LID Specific Parameter Field](../section_images/Figure_5_2_12_3_4_Host_Discovery_Log_Page_Identifier_71h_2.png)


#### Figure 3: Figure 314: Host Discovery Log Specific Parameter Field
![Figure 314: Host Discovery Log Specific Parameter Field](../section_images/Figure_5_2_12_3_4_Host_Discovery_Log_Page_Identifier_71h_3.png)


#### Figure 4: Figure 315: Host Extended Discovery Log Page Entry
![Figure 315: Host Extended Discovery Log Page Entry](../section_images/Figure_5_2_12_3_4_Host_Discovery_Log_Page_Identifier_71h_4.png)


#### Figure 5: Figure 316: Host Discovery Log Page
![Figure 316: Host Discovery Log Page](../section_images/Figure_5_2_12_3_4_Host_Discovery_Log_Page_Identifier_71h_5.png)

