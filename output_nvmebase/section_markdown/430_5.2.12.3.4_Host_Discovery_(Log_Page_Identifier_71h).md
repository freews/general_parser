###### 5.2.12.3.4 Host Discovery (Log Page Identifier 71h)

> **Section ID**: 5.2.12.3.4 | **Page**: 336-339

The Host Discovery log page shall only be supported by Discovery controllers. The Host Discovery log
page shall not be supported by controllers that expose namespaces for NVMe over PCIe or NVMe over
Fabrics. The Host Discovery log page provides an inventory of hosts that have registered discovery
information with the Discovery controller. A host or a Discovery controller may obtain the host inventory
from this log page. Depending on the parameters specified in a Get Log Page command, the Host Discovery
log page may contain entries for:
â€¢
all known hosts; or
â€¢
a subset of entries specific to the host or Discovery controller requesting the log page.
Each Host Extended Discovery Log Page Entry shall contain at least one extended attribute containing a
Host Identifier.
Figure 313 specifies the format for the LID Specific Parameter field in the Supported Log Pages log page
(refer to section 5.2.12.1.1) for the Host Discovery log page.
If a Discovery controller supports returning records for all hosts that are registered (i.e., the All Host Entries
Supported (ALLHOSTES) bit is set to â€˜1â€™ in the LID Specific Parameter field as defined in Figure 313) and
that Discovery controller processes a Get Log Page command for this log page with the All Host Entries
(ALLHOSTE) bit set to â€˜1â€™ in the Log Specific Parameter field (refer to Figure 314), then that Discovery
controller shall return records for all hosts that are registered. The list of records returned by the Discovery
controller shall not be filtered based upon the requesting HOSTNQN. If a Discovery controller returns
records for all hosts that are registered, then that Discovery controller shall set the All Hosts (ALLHOST)
bit to â€˜1â€™ in the Host Discovery Log Page Flags (HDLPF) field. A Discovery controller may require
authentication before reporting the ALLHOSTES bit being set to â€˜1â€™ or may require configuration outside the
scope of this specification.
The Log Page Offset may be used to retrieve specific records. If the Discovery controller supports an index
offset for this log page (i.e., the Index Offset Supported (IOS) bit is set to â€˜1â€™ in the Supported Log Pages
log page (refer to section 5.2.12.1.1) for this log page), then the index values specified in the Log Page
Offset Lower (LPOL) field (refer to Figure 203) and Log Page Offset Upper (LPOU) field (refer to Figure
204) in the Get Log Page command shall be used to index into the header and list of entries within this log
page (e.g., specifying an index offset of 0 returns this log page starting at the header, specifying an index
offset of 1 returns this log page starting at the offset of Entry 0, etc.). The number of records is returned in
the header of the log page. The format for a Host Extended Discovery Log Page Entry is defined in Figure
315. The format for an extended attribute is defined in Figure 533. The format for the Host Discovery log
page is defined in Figure 316.
A single Get Log Page command used to read the Host Discovery log page shall be atomic. If the Host
Discovery log page is read using multiple Get Log Page commands, then the reader should validate the
Generation Counter field to ensure that there has not been a change in the contents of the data. The Host
Discovery log page contents should be processed in the following sequence:
1. read the Host Discovery log page contents in order (i.e., with increasing Log Page Offset values);
2. re-read the Generation Counter field after the entire log page is transferred; and
3. if the Generation Counter field does not match the original value read, then discard the log page
read, as the entries may be inconsistent, and restart the sequence; or
4. if the Generation Counter field does match the original value read, then process the returned data.
If the log page contents change during this command sequence, then the Discovery controller may return
a status code of Discover Restart.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_5_2_12_3_4_Host_Discovery_Log_Page_Identifier_71h
![Table_5_2_12_3_4_Host_Discovery_Log_Page_Identifier_71h](../section_images/Table_5_2_12_3_4_Host_Discovery_Log_Page_Identifier_71h.png)

| Bits | Description |
|:---|:---|
| 15:1 | Reserved |
| 0 | **All Host Entries Supported (ALLHOSTES)**: If this bit is set to '1', then the Discovery controller supports returning records for all hosts that are registered without filtering the list of returned records based upon the requesting HOSTNQN. If this bit is cleared to '0', then the Discovery controller does not support returning records for all hosts that are registered. |
| Bits | Description |
|:---|:---|
| 14:9 | Reserved |
| 08 | **All Host Entries (ALLHOSTE)**: If this bit is set to '1', then the Discovery controller shall return records for all hosts that are registered without filtering the list of returned records based upon the requesting HOSTNQN. If this bit is cleared to '0', then this bit has no effect. |
| Bytes | Description |
|:---|:---|
| | **Header** |
| 00 | **Transport Type (TRTYPE)**: This field indicates the transport type as defined in the Transport Type (TRTYPE) field in Figure 310. |
| 01 | **Address Family (ADRFAM)**: This field indicates the address family as defined in the Address Family (ADRFAM) field in Figure 310. |
| 09:02 | Reserved |
| 11:10 | **Entry Flags (EFLAGS)**: This field indicates additional information related to the current entry. |
| | | Bits | Description |
| | | 15:3 | Reserved |
| | | 2 | **No CDC Connectivity (NCC)**: If this bit is set to '1', then the host that describes this entry is not currently connected to the CDC. If this bit is cleared to '0', then the host that describes this entry is currently connected to the CDC. If the Discovery controller returning this log page is not a CDC, then this bit shall be cleared to '0' and should be ignored by the host. |
| | | 1:0 | Reserved |
| 255:12 | Reserved |
| 511:256 | **Host NVMe Qualified Name (HOSTNQN)**: This field indicates the NVMe Qualified Name (NQN) that uniquely identifies the host. Refer to section 4.7 for the formatting requirements for NQNs. |
| 767:512 | **Transport Address (TRADDR)**: This field indicates the address of the host that may be used for a Connect command as an ASCII string. The Address Family field describes the reference for parsing this field. Refer to section 1.4.2 for ASCII string requirements. For the definition of this field, refer to the appropriate NVMe Transport binding specification. |
| 1023:768 | **Transport Specific Address Subtype (TSAS)**: This field indicates NVMe Transport specific information about the address as defined in the Transport Specific Address Subtype (TSAS) field in Figure 310. |
| 1027:1024 | **Total Entry Length (TEL)**: This field indicates the length in bytes of the entire Host Extended Discovery Log Page Entry. |
| 1029:1028 | **Number of Extended Attributes (NUMEXAT)**: This field indicates the number of extended attributes contained in the Host Extended Discovery Log Page Entry. This field shall be non-zero (i.e., the Host Extended Discovery Log Page Entry contains at least one extended attribute containing a Host Identifier as described in this section). |
| 1031:1030 | Reserved |
| | **Extended Attributes List** |
| ((EXATLEN - 1) + 4) + 1032:1032 | **Extended Attribute 0**: This field contains the first extended attribute as defined in Figure 533, where EXATLEN is the size specified in the Extended Attribute Length (EXATLEN) field of the extended attribute. |
| ... | ... |
| TEL - 1:TEL - (EXATLEN + 4) | **Extended Attribute N**: This field contains the Nth extended attribute as defined in Figure 533 (if present), where EXATLEN is the size specified in the Extended Attribute Length (EXATLEN) field of the extended attribute and TEL is the size specified in the Total Entry Length (TEL) field. |
| Bytes | Description |
|:---|:---|
| | **Header** |
| 07:00 | **Generation Counter (GENCTR)**: This field indicates the version of the discovery information, starting at a value of 0h. For each change in the Host Discovery log page, this counter is incremented by one. If the value of this field is FFFFFFFF_FFFFFFh, then the field shall be cleared to 0h when incremented (i.e., rolls over to 0h). |
| 15:08 | **Number of Records (NUMREC)**: Indicates the number of records contained in the log page. |
| Bytes | Description |
|:---|:---|
| | **Record** |
| 17:16 | **Record Format (RECFTM)**: This field indicates the format of the Host Discovery log page. If a new format is defined, this value is incremented by one. The format of the record specified in this definition shall be 0h. |
| 18 | **Host Discovery Log Page Flags (HDLPF)**: This field indicates additional information related to the Host Discovery log page. |
| | | Bits | Description |
| | | 7:1 | Reserved |
| | | 0 | **All Hosts (ALLHOST)**: If this bit is set to '1', then the records contained in the log page are for all hosts. If this bit is cleared to '0', then the records contained in the log page may or may not be for all hosts. |
| 19 | Reserved |
| 23:20 | **Total Host Discovery Log Page Length (THDLPL)**: This field indicates the length in bytes of the entire Host Discovery Log page. |
| 1023:24 | Reserved |
| | **Host Extended Discovery Log Page Entry List** |
| (TEL - 1) + 1024:1024 | **Host Extended Discovery Log Page Entry 0**: This field contains the first Host Extended Discovery Log Page Entry as defined in Figure 315. TEL is the size indicated in the Total Entry Length (TEL) field of the Host Extended Discovery Log Page Entry and THDLPL is the size indicated in the Total Host Discovery Log Page Length (THDLPL) field. |
| ... | ... |
| THDLPL - 1:THDLPL | **Host Extended Discovery Log Page Entry N**: This field contains the Nth Host Extended Discovery Log Page Entry as defined in Figure 315 (if present). TEL is the size indicated in the Total Entry Length (TEL) field of the Host Extended Discovery Log Page Entry and THDLPL is the size indicated in the Total Host Discovery Log Page Length (THDLPL) field. |

