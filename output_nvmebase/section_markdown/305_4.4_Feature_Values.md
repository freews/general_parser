### 4.4 Feature Values

> **Section ID**: 4.4 | **Page**: 185-188

The Get Features command (refer to section 5.2.11) and Set Features command (refer to section 5.2.26)
may be used to read and modify operating parameters of the controller. The operating parameters are
grouped and identified by Feature Identifiers. Each Feature Identifier contains one or more attributes that
may affect the behavior of the Feature.
If the Save and Select Feature Support (SSFS) bit is set to â€˜1â€™ in the Optional NVM Command Support
(ONCS) field of the Identify Controller data structure in Figure 328, then for each Feature, there are three
settings: default, saved, and current. If the SSFS bit is cleared to â€˜0â€™, then the controller only supports a
current and default value for each Feature. In this case, the current value may be persistent across power
cycles and resets based on the information specified in Figure 403.
If the SSFS bit is set to â€˜1â€™, then each Feature has supported capabilities (refer to Figure 199), which are
discovered using the Supported Capabilities value in the Select field in Get Features (refer to Figure 196).
The default value for each Feature is vendor specific and set by the manufacturer unless otherwise
specified. The default value is not changeable.
The current value for a Feature is the value in active use by the controller for that Feature.
A Set Features command uses the value specified by the command to set:
a) the current value for that Feature; or
b) the current value for that Feature and the saved value for that Feature, if that Feature is saveable.
A Feature may be saveable. If a Feature is saveable (i.e., the controller supports the Save field in the Set
Features command and the Select field in the Get Features command), then any Feature Identifier that is
namespace specific may be saved on a per namespace basis.
If a Feature is not saveable, or does not have a saved value, then a Get Features command to read the
saved value returns the default value.
If a Feature is not saveable and is persistent as specified in Figure 403, then the current value of that
Feature shall be persistent across power cycles and resets.
The current value for a Feature, as a result of a Controller Level Reset, is indicated in Figure 125 for an
NVM subsystem that supports only a single controller (i.e., the Multiple Ports bit of the CMIC field (refer to
Figure 327) is cleared to â€˜0â€™).
The current value for a Feature, as a result of an NVM Subsystem Reset, is indicated in Figure 125, for an
NVM subsystem:
â€¢
that is able to support two or more controllers and does not support multiple domains; or
â€¢
supports multiple domains where the NVM Subsystem Reset results in a reset of the entire NVM
subsystem.
The current value for a Feature, as a result of a Controller Level Reset, is indicated in Figure 126 for an
NVM subsystem that is able to support two or more controllers (i.e., the Multiple Ports bit is set to â€˜1â€™ in the
CMIC field).
The current value for a Feature, as a result of an NVM Subsystem Reset, is indicated in Figure 126 for an
NVM subsystem that supports:
â€¢
multiple domains where an NVM Subsystem Reset does not reset the entire NVM subsystem as
defined in section 3.7.1.2.
Concurrent access to Feature values by multiple hosts, for features with a scope other than controller
scope, requires some form of coordination between hosts. The procedure used to coordinate these hosts
is outside the scope of this specification.
Feature settings apply based on the feature scope (e.g., a feature is namespace specific if that feature has
a namespace scope) as defined in Figure 403.
For feature values that apply to the controller scope:
a) if the NSID field is cleared to 0h or set to FFFFFFFFh, then:
â€¢
the Set Features command shall set the specified feature value for the controller; and
â€¢
the Get Features command shall return the current setting of the requested feature value for
the controller;
and
b) if the NSID field is set to a valid namespace identifier (refer to section 3.2.1.2), then:
â€¢
the Set Features command shall abort with a status code of Feature Not Namespace Specific;
and
â€¢
the Get Features command shall return the current setting of the requested feature value for
the controller.
For feature values that apply to the namespace scope:
a) if the NSID field is set to an active namespace identifier (refer to section 3.2.1.4), then:
â€¢
the Set Features command shall set the specified feature value of the specified namespace;
and
â€¢
the Get Features command shall return the current setting of the requested feature value for
the specified namespace;
b) if the NSID field is set to FFFFFFFFh, then:
â€¢
for the Set Features command, the controller shall:
o
if the MDS bit is set to â€˜1â€™ in the Identify Controller data structure, abort the command with
a status code of Invalid Field in Command; or
o
if the MDS bit is cleared to â€˜0â€™ in the Identify Controller data structure, unless otherwise
specified, set the specified feature value for all namespaces attached to the controller
processing the command;
and
â€¢
for the Get Features command, the controller shall, unless otherwise specified in section
5.2.26, abort the command with a status code of Invalid Namespace or Format;
and
c) if the NSID field is set to any other value, then the Set Features command and the Get Features
command is aborted by the controller as described in Figure 92.
For feature values that apply to NVM subsystem scope, Domain scope, NVM Set scope, or Endurance
Group scope:
a) the NSID field should be cleared to 0h; and
b) if the NSID field is set to a non-zero value, then the Set Features command and the Get Features
command are aborted by the controller as described in Figure 92.
There are mandatory and optional Feature Identifiers defined in section 3.1.3.6. If a Get Features command
or Set Features command is processed that specifies a Feature Identifier that is not supported, then the
controller shall abort the command with a status code of Invalid Field in Command.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_4_4_Feature_Values
![Table_4_4_Feature_Values](../section_images/Table_4_4_Feature_Values.png)

| Feature Capability | Controller scope or Namespace per controller scope | NVM subsystem scope | Endurance Group scope | NVM Set scope | Namespace scope |
| :--- | :--- | :--- | :--- | :--- | :--- |
| Saveable | Set to:<br>â€¢ the saved value if a saved value is set; or<br>â€¢ the default value if a saved value is not set,<br>unless otherwise specified. | | | | |
| Non-saveable and non-persistent | Set to the default value, unless otherwise specified. | | | | |
| Feature Capability | Controller scope or Namespace per controller scope | NVM subsystem scope | Endurance Group scope | NVM Set scope | Namespace scope |
| Saveable | Set to:<br>â€¢ the saved value if a saved value is set; or<br>â€¢ the default value if a saved value is not set,<br>unless otherwise specified. | Unchanged, unless otherwise specified. | | | |
| Non-saveable and non-persistent | Set to the default value, unless otherwise specified. | | | | |

