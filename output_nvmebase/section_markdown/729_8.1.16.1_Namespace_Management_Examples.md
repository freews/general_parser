##### 8.1.16.1 Namespace Management Examples

> **Section ID**: 8.1.16.1 | **Page**: 606-607

The following is an example of how a host creates a namespace:
1. the host requests the Identify Namespace data structure that specifies common namespace
capabilities (i.e., using an Identify command with the NSID field set to FFFFFFFFh and the CNS
field cleared to 0h);
2. if the controller supports reporting of I/O Command Set specific Namespace Management content
(refer to the Namespace Management section in the applicable NVM Express I/O Command Set
specification), the host optionally requests that information (e.g., Namespace Granularity);
3. the host determines available resources (e.g., capacity for a namespace that contains formatted
storage) (refer to section 3.8);
4. the host creates the data structure defined in Figure 385 (e.g., taking into account the common
namespace capabilities, available capacity);
5. the host issues the Namespace Management command specifying the Create operation and the
data structure. On successful completion of the command, the Namespace Identifier of the new
namespace is returned in Dword 0 of the completion queue entry. At this point, the new namespace
is not attached to any controller; and
6. if Allocated Namespace Attribute Notices are enabled on the controller, then the host requests the
Identify Namespace data structures (refer to section 1.5.50) for the new namespace to determine
all attributes of the namespace upon receiving an Allocated Namespace Attribute Changed
asynchronous event from that controller.
The following is an example of how a host attaches a namespace:
1. the host issues the Namespace Attachment command specifying the Controller Attach operation
to attach the specified namespace to one or more controllers;
2. the host receives an Attached Namespace Attribute Changed asynchronous event from each
controller that has a namespace newly attached to that controller if Attached Namespace Attribute
Notices are enabled on that controller; and
3. the host receives an Allocated Namespace Attribute Changed asynchronous event from each
controller that has Allocated Namespace Attribute Notices enabled.
The following is an example of how a host detaches a namespace:
1. the host issues the Namespace Attachment command specifying the Controller Detach operation
to detach the specified namespace from one or more controllers;
2. the host receives an Attached Namespace Attribute Changed asynchronous event from each
controller that has a namespace newly detached from that controller if Attached Namespace
Attribute Notices are enabled on that controller; and
3. the host receives an Allocated Namespace Attribute Changed asynchronous event from each
controller that has Allocated Namespace Attribute Notices enabled.
The following is an example of how a host deletes a namespace:
1. the host should detach the namespace from all controllers;
2. the host issues the Namespace Management command specifying the Delete operation for the
specified namespace. On successful completion of the command, the namespace has been
deleted;
3. if the namespace was attached to any controller(s) when deleted:
a. the host receives an Attached Namespace Attribute Changed asynchronous event from
each of those controllers that has Attached Namespace Attribute Notices enabled as
described in section 8.1.16.2; and
b. the host receives an Allocated Namespace Attribute Changed asynchronous event from
each of those controllers that has Allocated Namespace Attribute Notices enabled as
described in section 8.1.16.2;
and
4. if the namespace was not attached to any controller when deleted, the host receives an Allocated
Namespace Attribute Changed asynchronous event from each controller that has Allocated
Namespace Attribute Notices enabled as described in section 8.1.16.2.
