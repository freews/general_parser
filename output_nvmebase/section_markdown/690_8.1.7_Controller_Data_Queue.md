#### 8.1.7 Controller Data Queue

> **Section ID**: 8.1.7 | **Page**: 571-572

A Controller Data Queue (CDQ) is used to post information from the controller to the host that is specific to
the type of queue being created (refer to Figure 169) by the Controller Data Queue command that specifies
the Create Controller Data Queue management operation (refer to section 5.2.4.1.1). A CDQ is a circular
buffer with a fixed slot size with entries posted by a controller.
A CDQ is deleted:
•
by a Controller Data Queue command that specifies the Delete Controller Data Queue
management operation (refer to section 5.2.4.1.2);
•
on a Controller Level Reset on the controller that processed the Controller Data Queue command
that created the CDQ; or
•
by a Migration Send command that specifies the Suspend management operation and the Delete
User Data Migration Queue (DUDMQ) bit is set to ‘1’ (refer to section 5.2.17.1.1).
On the successful completion of a Controller Data Queue command, a Controller Data Queue Identifier
(CDQID) is returned in the completion queue entry (refer to Figure 172). A CDQID is used to identify the
created Controller Data Queue on the controller that processed the command. The returned value for that
CDQID is any value except the CDQID values for any Controller Data Queue that exists on the controller
that processed the command (i.e., a controller is permitted to return the value of a CDQID value of a
Controller Data Queue that was previously deleted). The scope of a CDQID is per controller.
The CDQ Head pointer is updated by the host by issuing a Set Features command specifying the Controller
Data Queue feature and the Controller Data Queue Identifier (refer to section 5.2.26.1.23) after processing
an entry indicating the last free CDQ slot. A Controller Data Queue Phase Tag (CDQP) bit is defined in the
CDQ entry (refer to the applicable NVM Express I/O Command Set specification) to indicate whether an
entry has been newly posted without the host relying on the Controller Data Queue Tail Pointer event (refer
to Figure 157). The Controller Data Queue Phase Tag bit enables the host to determine whether entries
are new or not.
