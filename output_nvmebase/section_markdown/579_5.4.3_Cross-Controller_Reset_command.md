#### 5.4.3 Cross-Controller Reset command

> **Section ID**: 5.4.3 | **Page**: 489-491

The host uses a Cross-Controller Reset command submitted to one controller, the Source Controller, to
cause the NVM subsystem to initiate a Cross-Controller Reset operation (refer to section 8.3.3) that causes
a Controller Level Reset (refer to section 3.7.2) on another controller, the Impacted Controller. The instance
of the Impacted Controller is identified by the combination of the controller ID, the value of the Controller
Instance Uniquifier (CIU) field in the Identify Controller data structure (refer to Figure 328), and the value of
the Controller Instance Random Number field in the Identify Controller data structure.
To complete a Cross-Controller Reset command successfully, the Source Controller shall cause the NVM
subsystem to initiate a Cross-Controller Reset operation for the Impacted Controller; and:
â€¢
if the Cross-Controller Reset operation completes successfully before the CQE for the Cross-
Controller Reset command is posted, then the Source Controller shall set the Immediate Reset
Successful (IRS) bit to â€˜1â€™ in the CQE (refer to Figure 527); and
â€¢
if the Cross-Controller Reset operation does not complete successfully before the CQE for the
Cross-Controller Reset command is posted, then the Source Controller shall clear the IRS bit to â€˜0â€™
in the CQE and shall add an entry for the Impacted Controller to the Cross-Controller Reset log
page (as described in section 5.2.12.3.1).
If the IRS bit is set to â€˜1â€™ in the CQE for the Cross-Controller Reset command, then the controller:
â€¢
shall not report a Cross-Controller Reset Completed asynchronous event (refer to Figure 154) for
the Cross-Controller Reset operation this command caused to be initiated; and
â€¢
shall not add an entry for the Cross-Controller Reset operation to the Cross-Controller Reset log
page.
If the Source Controller is unable to cause the NVM subsystem to initiate a Cross-Controller Reset
operation, then an entry shall not be added to the Cross-Controller Reset log page. If the Source Controller
is unable to add an entry to the Cross-Controller Reset log page, then the Source Controller shall not cause
the NVM subsystem to initiate a Cross-Controller Reset operation and shall abort the command with a
status code of Cross-Controller Reset Log Page Full.
If the Cross-Controller Reset command completes successfully, then the Source Controller may remove an
entry, if any, in the Lost Host Communication log page (refer to section 5.2.12.3.2) with a value in the
controller ID field and a value in the CIU field that match the value of the Impacted Controller ID field and
the value of the CIU field in the Cross-Controller Reset command.
As described in section 3.4.1, outstanding commands are able to complete in any order. This includes
situations where a Cross-Controller Reset command, a Get Log Page command for the Cross-Controller
Reset log page, and an Asynchronous Event Request command are outstanding at the same point in time.
A Cross-Controller Reset log page is able to contain:
â€¢
an entry created by a Cross-Controller Reset command for which the host has not received a
completion; or
â€¢
a completed entry for which the host has not received the completion for an Asynchronous Event
Request command,
and the host should not treat these occurrences as unexpected events.
In order to improve the efficiency of execution and the likelihood of success for a Cross-Controller Reset
operation, the host should submit the Cross-Controller Reset command causing the NVM subsystem to
initiate that operation to:
â€¢
a controller that returned a Lost Host Communication log page with an entry for the Impacted
Controller (refer to section 5.2.12.3.2), regardless of the location of either controller; or
â€¢
a controller that:
o
is in the same domain as the Impacted Controller;
o
uses a different NVM subsystem port than the Impacted Controller; and
o
is accessed via a different physical port on the host than the Impacted Controller.
If the host connected to a Discovery subsystem using the well-known Discovery Service NQN, then the
controller shall not report that the Cross-Controller Reset command is supported in the Commands
Supported and Effects log page (refer to section 5.2.12.1.6).


---
### ðŸ“Š Tables (1)

#### Table 1: Table_5_4_3_Cross_Controller_Reset_command
![Table_5_4_3_Cross_Controller_Reset_command](../section_images/Table_5_4_3_Cross_Controller_Reset_command.png)

| Bits | Description |
| :--- | :--- |
| 31:24 | Reserved |
| 23:16 | Controller Instance Uniquifier (CIU): This field specifies the value of the CIU field in the Identify Controller data structure (refer to Figure 328) |
| 15:00 | Impacted Controller ID (ICID): This field specifies the Controller ID of the controller on which to initiate a Controller Level Reset, the Impacted Controller. |
| Bits | Description |
| 31:00 | Controller Instance Random Number Lower (CIRNL): This field specifies the least-significant 32-bits of the CIRN field in the Identify Controller data structure of the Impacted Controller. |
| Bits | Description |
| 31:00 | Controller Instance Random Number Upper (CIRNU): This field specifies the most-significant 32-bits of the CIRN field in the Identify Controller data structure of the Impacted Controller. |

