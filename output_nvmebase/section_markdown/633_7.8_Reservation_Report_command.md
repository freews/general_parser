### 7.8 Reservation Report command

> **Section ID**: 7.8 | **Page**: 535-538

The Reservation Report command returns a Reservation Status data structure to memory that describes
the registration and reservation status of a namespace.
If the namespace is not a dispersed namespace, then the size of the Reservation Status data structure is
a function of the number of registrants of the namespace (i.e., there is a Registrant data structure and/or
Registrant Extended data structure for each such registrant). If the namespace is a dispersed namespace
that is able to be accessed by controllers in multiple participating NVM subsystems, then the size of the
Reservation Status data structure is a function of the number of registrants of the namespace in the NVM
subsystem containing the controller processing the command and the number of registrants of the
namespace in each separate participating NVM subsystem. The controller returns the data structure in
Figure 615 if the host has selected a 64-bit Host Identifier and the data structure in Figure 616 if the host
has selected a 128-bit Host Identifier (refer to section 5.2.26.1.32).
For controllers compliant with NVM Express Base Specification, Revision 2.0 and earlier, registrants of the
namespace that are not associated with any controller in the NVM subsystem may or may not be reported
by this command.
If a 64-bit Host Identifier has been specified and the Extended Data Structure bit is set to â€˜1â€™ in Command
Dword 11, then the controller shall abort the command with the status code of Host Identifier Inconsistent
Format. If a 128-bit Host Identifier has been specified and the Extended Data Structure bit is cleared to â€˜0â€™
in Command Dword 11, then the controller shall abort the command with the status code of Host Identifier
Inconsistent Format.
The command uses Command Dword 10 and Command Dword 11. If the command uses PRPs for the
data transfer, then PRP Entry 1 and PRP Entry 2 fields are used. If the command uses SGLs for the data
transfer, then the SGL Entry 1 field is used. All other command specific fields are reserved.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_7_8_Reservation_Report_command
![Table_7_8_Reservation_Report_command](../section_images/Table_7_8_Reservation_Report_command.png)

| Bits | Description |
| :--- | :--- |
| 127:00 | **Data Pointer (DPTR):** This field specifies the location of a data buffer where data is transferred to. Refer to Figure 92 for the definition of this field. |
| **Bits** | **Description** |
| 31:00 | **Number of Dwords (NUMD):** This field specifies the number of dwords of the Reservation Status data structure to transfer. This is a 0's based value. <br> If this field corresponds to a length that is less than the size of the Reservation Status data structure, then only that specified portion of the data structure is transferred. If this field corresponds to a length that is greater than the size of the Reservation Status data structure, then the entire contents of the data structure are transferred and no additional data is transferred. |
| **Bits** | **Description** |
| 31:02 | Reserved |
| 01 | **Dispersed Namespace Reservation Support (DISNSRS):** This bit specifies host support for reservations on dispersed namespaces for a host that supports dispersed namespaces (i.e., for a host that has set the Host Dispersed Namespaces Support (HDISNS) field to 1h in the Host Behavior Support feature. <br> If this bit is set to '1', then the host supports reservations on dispersed namespaces (i.e., the host supports receiving a value of FFFDh in the Controller ID (CNTLID) field of a Registrant data structure or Registrant Extended data structure (refer to section 8.1.10.6)). <br> If this bit is cleared to '0', then the host does not support reservations on dispersed namespaces (i.e., the host does not support receiving a value of FFFDh in the Controller ID (CNTLID) field of a Registrant data structure or Registrant Extended data structure (refer to section 8.1.10.6)). If the HDISNS field is set to 1h in the Host Behavior Support feature and the host submits the command to a dispersed namespace with this bit cleared to '0', then the controller aborts the command with a status code of Namespace Is Dispersed as described in section 8.1.10.6. |
| 00 | **Extended Data Structure (EDS):** If this bit is set to '1', then the controller returns the extended data structure defined in Figure 616. If this bit is cleared to '0', then the controller returns the data structure defined in Figure 605. |
| **Bytes** | **Description** |
| | **Header** |
| | **Generation (GEN):** This field contains a 32-bit wrapping counter that is incremented any time any one of the following occur: <br> â€¢ a Reservation Register command completes successfully on any controller associated with the namespace; <br> â€¢ a Reservation Release command with Reservation Release Action (RRELA) set to 001b (i.e., Clear) completes successfully on any controller associated with the namespace; and <br> â€¢ a Reservation Acquire command with Reservation Acquire Action (RACQA) set to 001b (Preempt) or 010b (Preempt and Abort) completes successfully on any controller associated with the namespace. <br> If the value of this field is FFFFFFFFh, then the field shall be cleared to 0h when incremented (i.e., rolls over to 0h). |
| 03:00 | |
| 04 | **Reservation Type (RTYPE):** This field indicates whether a reservation is held on the namespace. A value of 0h indicates that no reservation is held on the namespace. A non-zero value indicates a reservation is held on the namespace and the reservation type is defined in Figure 605. |
| 06:05 | **Number of Registrants (REGSTRNT):** This field indicates the number of registrants of the namespace. This indicates the number of Registrant data structures or Registrant Extended data structures contained in this data structure. <br> Note: This field was formerly named Number of Registered Controllers (REGCTL). |
| 08:07 | Reserved |
| 09 | **Persist Through Power Loss State (PTPLS):** This field indicates the Persist Through Power Loss State associated with the namespace. |
| | | **Value** | **Definition** |
| | | 0 | Reservations are released and registrants are cleared on a power on. |
| | | 1 | Reservations and registrants persist across a power loss. |
| 23:10 | Reserved |
| | **Registered Controller Data Structure List** |
| 47:24 | **Registrant Data Structure 0** <br> Note: This field was formerly named Registered Controller Data Structure 0. |
| | ... |
| | |
| 24\*n+47:24\*(n+1) | **Registrant Data Structure n** |
| **Bytes** | **Description** |
| | **Header** |
| 23:00 | **Reservation Status Header (RSHDR):** Refer to the Reservation Status Header in Figure 615 for definition. |
| 63:24 | Reserved |
| | **Registered Controller Extended Data Structure List** |
| 127:64 | **Registrant Extended Data Structure 0** <br> Note: This field was formerly named Registered Controller Extended Data Structure 0. |
| | ... |
| 64\*(n+1)+63:64\*(n+1) | **Registrant Extended Data Structure n** |
| **Bytes** | **Description** |
| 01:00 | **Controller ID (CNTLID):** If a registrant of the namespace is associated with a controller in the NVM subsystem, then this field contains the controller ID (i.e., the value of the CNTLID field in the Identify Controller data structure) of the controller that is associated with the registrant whose host identifier is indicated in the Host Identifier field of this Registrant data structure. <br> If a registrant of the namespace is not associated with any controller in the NVM subsystem, then the controller processing the command shall set this field to FFFDh. <br> If the namespace is a dispersed namespace and the controller is not contained in the same participating NVM subsystem as the controller processing the command, then the Controller ID field is set to FFFDh, as described in section 8.1.10.6. |
| 02 | **Reservation Status (RCSTS):** This field indicates the reservation status of the registrant associated with this data structure (i.e., the registrant whose host identifier is indicated in the Host Identifier field of this Registrant data structure). |
| | | **Bits** | **Description** |
| | | 7:1 | Reserved |
| | | 0 | **Association with Host Holding Reservation (AHHR):** If this bit is set to '1', then the registrant associated with this data structure holds a reservation on the namespace. If this bit is cleared to '0', then the registrant is not associated with a host that holds a reservation on the namespace. |
| 07:03 | Reserved |
| 15:08 | **Host Identifier (HOSTID):** This field contains the 64-bit Host Identifier of the registrant of the namespace described by this data structure. |
| 23:16 | **Reservation Key (RKEY):** This field contains the reservation key of the registrant described by this data structure. |
| **Bytes** | **Description** |
| 01:00 | **Controller ID (CNTLID):** Refer to Figure 617 for definition. |
| 02 | **Reservation Status (RCSTS):** Refer to Figure 617 for definition. |
| 07:03 | Reserved |
| 15:08 | **Reservation Key (RKEY):** Refer to Figure 617 for definition. |
| **Bytes** | **Description** |
| 31:16 | **Host Identifier (HOSTID):** This field contains the 128-bit Host Identifier of the registrant of the namespace described by this data structure. |
| 63:32 | Reserved |

