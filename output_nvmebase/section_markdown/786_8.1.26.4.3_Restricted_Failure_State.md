###### 8.1.26.4.3 Restricted Failure State

> **Section ID**: 8.1.26.4.3 | **Page**: 665-666

This state is entered if sanitize processing was performed in the Restricted Processing state and:
a) sanitize processing failed; or
b) a failure occurred during deallocation of media in the sanitization target that is allocated for user
data in the Post-Verification Deallocation state.
In this state:
a) all controllers and Management Endpoints in the NVM subsystem shall process commands as
described in section 8.1.26.5;
b) failure recovery requires the host to issue a subsequent Sanitize command or, for a namespace in
this state, a Sanitize Namespace command specifying the AUSE bit cleared to â€˜0â€™ (i.e., restricted
completion mode);
c) if the sanitize target is the NVM subsystem, then all controllers in the NVM subsystem shall abort
a Sanitize command, or a Sanitize Namespace command for the sanitization target associated with
this state machine, that specifies:
â€¢
the SANACT field set to 001b (i.e., Exit Failure Mode), with a status code of Sanitize Failed;
â€¢
the SANACT field set to 101b (i.e., Exit Media Verification State), with a status code of Invalid
Field in Command; or
â€¢
the AUSE bit set to â€˜1â€™ (i.e., unrestricted completion mode), with a status code of Sanitize Failed;
d) if the sanitize target is a namespace, then all controllers in the NVM subsystem shall abort a
Sanitize command, or a Sanitize Namespace command for the sanitization target associated with
this state machine, that specifies:
â€¢
the SANACT field set to 001b (i.e., Exit Failure Mode), with a status code of Sanitize
Namespace Failed;
â€¢
the SANACT field set to 101b (i.e., Exit Media Verification State), with a status code of Invalid
Field in Command; or
â€¢
the AUSE bit set to â€˜1â€™ (i.e., unrestricted completion mode), with a status code of Sanitize
Namespace Failed;
and
e) the Persistent Memory Region shall behave as described in section 8.1.26.5.
The controller shall start a sanitize operation in the Restricted Processing state. The controller shall, in the
Sanitize Status log page for the sanitization target, clear the:
a) Sanitize Progress (SPROG) field to 0h; and
b) Media Verification Canceled (MVCNCLD) bit to â€˜0â€™.


---
### ðŸ“Š Tables (1)

#### Table 1: Table_8_1_26_4_3_Restricted_Failure_State
![Table_8_1_26_4_3_Restricted_Failure_State](../section_images/Table_8_1_26_4_3_Restricted_Failure_State.png)

| State Transition | | | |
| :--- | :--- | :--- | :--- |
| **Starting** | **Ending** | **Label 1** | **Transition Condition** |
| Restricted Failure | Restricted Processing | A2 | The controller starts a sanitize operation on the sanitization target associated with this state machine in restricted completion mode (i.e., the command specified the AUSE bit cleared to '0'). |
| Notes: | | | |
| 1. | | | Refer to Figure 706. |

