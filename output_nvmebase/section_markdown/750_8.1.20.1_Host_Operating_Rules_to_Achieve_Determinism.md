##### 8.1.20.1 Host Operating Rules to Achieve Determinism

> **Section ID**: 8.1.20.1 | **Page**: 627-628

In order to achieve deterministic operation, the host is required to follow operating rules.
An NVM Set remains in the Deterministic Window while attributes do not exceed any of the typical or
maximum values indicated in the Predictable Latency Per NVM Set log page, there is not a Deterministic
Excursion, and the host does not request a transition to the Non-Deterministic Window. The attributes
specified in this specification are the number of random 4 KiB reads, the number of writes in Optimal Write
Size, and time in the Deterministic Window. Additional attributes are vendor specific.
For reads, writes, and time in the Deterministic Window, two values are provided in the Predictable Latency
Per NVM Set log page (refer to section 5.2.12.1.11):
•
A typical or maximum amount of that attribute that the host may consume during any given DTWIN;
and
•
A reliable estimate of the amount of that attribute that remains to be consumed during the current
DTWIN.
Figure 686 shows how the Typical, Maximum, and Reliable Estimates for the DTWIN attributes increase or
decrease when the associated NVM Set is in the Deterministic Window or Non-Deterministic Window.
An NVM Set may transition autonomously to the NDWIN if, since entry to the current DTWIN:
a) the number of reads is greater than the value indicated in the DTWIN Reads Typical field;
b) the number of writes is greater than the value indicated in the DTWIN Writes Typical field;
c) the amount of time indicated in the DTWIN Time Maximum field has passed; or
d)
a Deterministic Excursion occurs.
Figure 687 is an example that shows the relationship between the typical and reliable estimate values for
DTWIN Reads. DTWIN Reads Reliable Estimate begins near the DTWIN Reads Typical value at the start
of the current DTWIN at time 0. During the first time increment, the host reads x units, and the value of the
reliable estimate at time t2 is decremented by approximately x. During the second time increment, the host
reads a smaller amount consisting of y units and thus the reliable estimate at t3 is decremented by
approximately y.
The host configures the current window to be either DTWIN or NDWIN using a Set Features command with
the Predictable Latency Mode Window Feature. The host may use the reliable estimates provided in the
Predictable Latency Mode log page to ensure that the host transitions the NVM Set to the NDWIN prior to
any reliable estimates exceeding one of the typical or maximum values (e.g., DTWIN Reads Estimate = 0).
The reliable estimates provided shall have the following properties when in the Deterministic Window:
•
The estimates shall be monotonically decreasing towards 0h for the entirety of the DTWIN,
depending on the attribute. For example, DTWIN Reads Reliable Estimate is monotonically
decreasing and thus does not increase without transitioning from the DTWIN to the NDWIN; and
•
The estimates shall not change abruptly unless operating conditions have changed abruptly. The
estimate should be based on averaging or smoothing of data collected over some period of time.
