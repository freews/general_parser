##### 3.2.5.1 Overview

> **Section ID**: 3.2.5.1 | **Page**: 108-110

An NVM subsystem may be made up of a single domain or multiple domains (i.e., two or more). A domain
is the smallest indivisible unit that shares state (e.g., power state, capacity information). An NVM subsystem
that supports multiple domains shall support Asymmetric Namespace Access Reporting (refer to section
8.1.1).
A common example of a simple implementation of an NVM subsystem is one that consists of a single
domain (i.e., multiple domains are not supported).
Each domain is independent, and the boundaries between domains are communication boundaries (e.g.,
fault boundaries, management boundaries). If multiple domains are present in an NVM subsystem, then
those domains cooperate in the operation of that NVM subsystem. If a domain is unable to cooperate in the
operation of the NVM subsystem, then the NVM subsystem has become divided.
A division is an event (e.g., failure of a domain) or action (e.g., management action or reconfiguration) within
the NVM subsystem that affects communication between the domains contained in the NVM subsystem
(refer to Figure 71 and Figure 72). If a division exists, global state within the NVM subsystem may be
impacted (e.g., a controller may only have information about the state of the domains with which the
controller is able to communicate). A division event or action may:
‚Ä¢
affect access to namespaces (refer to section 8.1.1); or
‚Ä¢
impact operations that have NVM subsystem scope (e.g., TNVMCAP, sanitize, format, SMART
information).
A domain is comprised of:
‚Ä¢
zero or more controllers; and
‚Ä¢
zero or more NVM Endurance Groups.
If an NVM subsystem supports multiple domains, then all controllers in that NVM subsystem shall:
‚Ä¢
set the MDS bit to ‚Äò1‚Äô in the CTRATT field in the Identify Controller data structure (refer to Figure
328);
‚Ä¢
set the Domain Identifier in each Endurance Group descriptor, if supported, to a non-zero value;
and
‚Ä¢
set the Domain Identifier in each Identify Controller data structure to a non-zero value.
If an NVM subsystem supports multiple domains, then controllers in that NVM subsystem may:
‚Ä¢
support Endurance Groups (refer to Endurance Groups bit in the CTRATT field of Identify Controller
data structure).
For an NVM subsystem that supports multiple domains, each domain shall be assigned a domain identifier
that is unique within the NVM subsystem (refer to the Domain Identifier field in Figure 328 and section
3.2.5.4). For an NVM subsystem that does not support multiple domains, Domain Identifier fields are
cleared to 0h.
Figure 71 shows an example of an NVM subsystem that consists of three domains. Domain 1 contains two
controllers and some amount of NVM storage capacity which has been allocated to two private namespaces
(i.e., NS A and NS C) and a shared namespace (i.e., NS B). Domain 2 contains two controllers and some
amount of NVM storage capacity which has been allocated to two shared namespaces (i.e., NS D and NS
E). Domain 3 contains one controller, and no NVM storage capacity.
If, in the example shown in Figure 71, a division event occurs that results in Domain 1 no longer being able
to communicate with Domain 2 and Domain 3, then the NVM subsystem would consist of two parts. The
first part consists of Domain 1 and the second part consists of Domain 2 and Domain 3.
Figure 72 shows an example of an NVM subsystem that consists of six domains, of which, three are
domains that contain controllers. Domain 1 is a domain that contains two controllers and some amount of
NVM storage capacity from which NVM Endurance Groups have been created that contain a private
namespace (i.e., NS A) and a shared namespace (i.e., NS C). Domain 2 is a domain that contains no
controllers and contains some amount of NVM storage capacity from which NVM Endurance Groups have
been created that contain a shared namespace (i.e., NS B). Domain 3 is a domain that contains two
controllers and no NVM storage capacity. Domain 4 is a domain that contains no controllers and contains
some amount of NVM storage capacity from which NVM Endurance Groups have been created that contain
two shared namespaces (i.e., NS D and NS E). Domain 5 is a domain that contains one controller and no
NVM storage capacity. Domain 6 is a domain that contains no controllers and no NVM storage capacity
allocated to an NVM Endurance Group (i.e., an empty domain).


---
### üñºÔ∏è Figures (2)

#### Figure 1: Figure 71: Example 1 Domain Structure
![Figure 71: Example 1 Domain Structure](../section_images/Figure_3_2_5_1_Overview_1.png)


#### Figure 2: Figure 72: Example 2 Domain Structure
![Figure 72: Example 2 Domain Structure](../section_images/Figure_3_2_5_1_Overview_2.png)

