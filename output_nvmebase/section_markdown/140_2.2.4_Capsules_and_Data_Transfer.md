#### 2.2.4 Capsules and Data Transfer

> **Section ID**: 2.2.4 | **Page**: 48-49

A capsule is an NVMe unit of information exchange used in NVMe over Fabrics. A capsule may be classified
as a command capsule or a response capsule. A command capsule contains a command (formatted as a
submission queue entry) and may optionally include SGLs or data. A response capsule contains a response
(formatted as a completion queue entry) and may optionally include data. Data refers to any data transferred
at an NVMe layer between a host and an NVM subsystem (e.g., logical block data or a data structure
associated with a command). A capsule is independent of any underlying NVMe Transport unit (e.g.,
packet, message, or frame and associated headers and footers) and may consist of multiple such units.
Command capsules are transferred from a host to an NVM subsystem. The SQE contains an Admin
command, an I/O command, or a Fabrics command. The minimum size of a command capsule is NVMe
Transport binding specific, but shall be at least 64B in size. The maximum size of a command capsule is
NVMe Transport binding specific. The format of a command capsule is shown in Figure 9.
Response capsules are transferred from an NVM subsystem to a host. The CQE is associated with a
previously issued Admin command, I/O command, or Fabrics command. The size of a response capsule is
NVMe Transport binding specific, but shall be at least 16B in size. The maximum size of a response capsule
is NVMe Transport binding specific. The format of a response capsule is shown in Figure 10.
NVMe Transports using the message-only transport model and message/memory transport model require
all SGLs sent from the host to the controller be transferred within the command. NVMe Transports may
optionally support the transfer of a portion or all data within the command and response capsules.
NVMe over Fabrics requires SGLs for all commands (Fabrics, Admin, and I/O). An SGL may specify the
placement of data within a capsule or the information required to transfer data using an NVMe Transport
specific data transfer mechanism (e.g., via memory transfers as in RDMA). Each NVMe Transport binding
specification defines the SGLs used by a particular NVMe Transport and any capsule SGL and data
placement restrictions.


---
### üñºÔ∏è Figures (2)

#### Figure 1: Figure 9: Command Capsule Format
![Figure 9: Command Capsule Format](../section_images/Figure_2_2_4_Capsules_and_Data_Transfer_1.png)


#### Figure 2: Figure 10: Response Capsule Format
![Figure 10: Response Capsule Format](../section_images/Figure_2_2_4_Capsules_and_Data_Transfer_2.png)

