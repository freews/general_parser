##### 5.2.3.3 NVM Set Operations

> **Section ID**: 5.2.3.3 | **Page**: 212-212

If the Operation field specifies the Create NVM Set operation, the controller shall select a non-zero NVM
Set Identifier not assigned to an existing NVM Set in the specified Endurance Group (refer to Figure 160)
and indicate that value in the completion queue entry. If a non-zero unassigned NVM Set Identifier is
unavailable, then the controller shall abort the command with a status code of Identifier Unavailable.
If the Operation field specifies the Create NVM Set operation and the Capacity Lower and Capacity Upper
fields specify a value that requires allocation of NVM capacity that is greater than the value in the
Unallocated Endurance Group Capacity (UEGCAP) field in the Endurance Group Information log page
(refer to Figure 222) for the specified Endurance Group, then the controller:
a) if the Error Information log page is supported, shall indicate in the Command Specific Information
field in the Error Information Log Entry data structure (refer to Figure 209) the total amount of NVM
capacity in bytes of the largest NVM Set that is able to be created; and
b) shall abort the command with Insufficient Capacity status.
If the Operation field specifies the Create NVM Set operation and the Element Identifier field is cleared to
0h, then the controller shall choose an existing Endurance Group in an existing domain in which to create
the NVM Set.
If the Operation field specifies the Create NVM Set operation and Media Units are supported, then the
controller selects Media Units from the Endurance Group to be allocated to the NVM Set.
If the Operation field specifies the Create NVM Set operation and Media Units are not supported, then the
controller selects NVM capacity from the Endurance Group to be allocated to the NVM Set.
If the Operation field specifies the Delete NVM Set operation and the Element Identifier field specifies a
value of 0h or the identifier of an NVM Set that does not exist, then the controller shall abort the command
with a status code of Invalid Field in Command.
If the controller does not support NVM Sets and the Operation field specifies either the Create NVM Set
operation or the Delete NVM Set operation, then the controller shall abort the command with a status code
of Invalid Field in Command.
