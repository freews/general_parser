##### 8.1.26.1 Common Requirements For Commands Requesting Sanitize Operations

> **Section ID**: 8.1.26.1 | **Page**: 655-656

Requirements and behaviors that are common for commands requesting sanitize operations (i.e., Sanitize
commands (refer to section 5.2.22) and Sanitize Namespace commands (refer to section 5.2.23)) are
described in this section.
The Sanitize command (refer to section 5.2.22) and the Sanitize Namespace command (refer to section
5.2.23) are used to start a sanitize operation, to recover from a previously failed sanitize operation, or to
exit the Media Verification state.
All sanitize operations (i.e., Block Erase, Crypto Erase, and Overwrite) are performed in the background
(i.e., completion of the command that starts a sanitize operation does not indicate completion of that sanitize
operation). The completion of a sanitize operation, which may include an optional transition into the Media
Verification state, is indicated in the Sanitize Status log page, and with:
•
the Sanitize Operation Completed asynchronous event with the Event Specific Parameter field:
o
cleared to 0h if the sanitization target is the NVM subsystem; or
o
set to the NSID of the sanitization target if the sanitization target is a namespace;
•
the Sanitize Operation Completed With Unexpected Deallocation asynchronous event with the
NSID field cleared to 0h; or
•
the Sanitize Operation Entered Media Verification State asynchronous event with the Event
Specific Parameter field:
o
cleared to 0h if the sanitization target is the NVM subsystem; or
o
set to the NSID of the sanitization target if the sanitization target is a namespace.
If the command that started a sanitize operation was submitted to a controller’s Admin Submission Queue,
then the asynchronous event shall be reported only by that controller. If the command that started a sanitize
operation was submitted to a Management Endpoint (refer to the NVM Express Management Interface
Specification), then the asynchronous event shall not be reported by any controller in the NVM subsystem.
If a sanitize operation starts as a result of a command, then the controller shall complete the command that
requested the sanitize operation with a status code of Successful Completion. If the controller completes a
command that requested a sanitize operation with any status code other than Successful Completion, then
the controller:
•
shall not start the sanitize operation for that command;
•
shall not modify the Sanitize Status log page for the sanitization target; and
•
shall not alter any user data.
If the NVM subsystem supports multiple domains and a command requesting a sanitize operation is not
able to start a sanitize operation as a result of the NVM subsystem being divided (refer to section 3.2.5),
then the controller shall abort the command with a status code of Asymmetric Access Inaccessible or
Asymmetric Access Persistent Loss.
If a command requesting a sanitize operation specifies an unsupported value in the SANACT field (refer to
Figure 388 and Figure 391), then the controller shall abort the command with a status code of Invalid Field
in Command.
If a firmware activation with reset is pending (refer to section 5.2.8.1 and section 3.11), then the controller
shall abort the command requesting a sanitize operation as specified in section 5.2.8.1 and section 3.11.
If the Firmware Commit command that established the pending firmware activation with reset condition
returned a status code of:
a) Firmware Activation Requires Controller Level Reset;
b) Firmware Activation Requires Conventional Reset; or
c) Firmware Activation Requires NVM Subsystem Reset,
then the controller shall abort the command that requested the sanitize operation with that same status
code.
If the Firmware Commit command that established the pending firmware activation with reset condition
completed successfully or returned a status code other than:
a) Firmware Activation Requires Controller Level Reset;
b) Firmware Activation Requires Conventional Reset; or
c) Firmware Activation Requires NVM Subsystem Reset,
then the controller shall abort the command that requested the sanitize operation with a status code of
Firmware Activation Requires Controller Level Reset.
Activation of new firmware is prohibited during a sanitize operation (refer to section 8.1.26.5).
If a change to the settings of any personality is pending (refer to section 8.1.6.1), then the controller shall
abort the Sanitize command with a status code of Access Denied.
After validating the command parameters, the controller starts the sanitize operation in the background,
updates the Sanitize Status log page for the sanitization target and then completes the command that
requested the sanitize operation with Successful Completion status.
The controller shall ignore Critical Warning(s) in the SMART / Health Information log page (e.g., read only
mode) and shall attempt to complete the sanitize operation requested. Refer to section 5 for further
information about restrictions on Admin commands during the processing of a command requesting a
sanitize operation.
