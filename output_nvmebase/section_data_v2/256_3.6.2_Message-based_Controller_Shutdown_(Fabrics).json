{
  "section_index": 256,
  "section_id": "3.6.2",
  "title": "3.6.2 Message-based Controller Shutdown (Fabrics)",
  "level": 3,
  "pages": {
    "start": 138,
    "end": 139,
    "count": 2
  },
  "content": {
    "text": "To initiate a shutdown of a controller, the host should use the Property Set command (refer to section 6.6)\nto set the Shutdown Notification (CC.SHN) field to:\n•\n01b to initiate a normal shutdown operation; or\n•\n10b to initiate an abrupt shutdown operation.\nAfter the host initiates a controller shutdown, the host may either disconnect at the NVMe Transport level\nor the host may choose to poll CSTS.SHST to determine when the controller shutdown is complete (i.e.,\nthe controller should not initiate a disconnect at the NVMe Transport level). It is an implementation choice\nwhether the host aborts all outstanding commands prior to initiating the shutdown.\nIf the host is no longer able to communicate with the controller before that host receives either:\n•\ncompletions for all outstanding commands submitted to that controller (refer to section 3.4.5); or\n•\na CSTS.SHST field value that indicates that the controller shutdown is complete,\nthen it is strongly recommended that the host take the steps described in section 9.6 to avoid possible data\ncorruption caused by interaction between outstanding commands and subsequent commands submitted\nby that host to another controller.\nThe CC.EN field is not used to shutdown the controller (i.e., it is used for Controller Reset, refer to section\n3.7.2.1).\nFrom the time a controller shutdown is initiated until:\n•\na Controller Level Reset occurs; or\n•\nthe controller, if dynamic, is removed from the NVM subsystem,\nthe controller shall:\n•\nprocess only Fabrics commands (refer to Figure 574); and\n•\ndisable the Keep Alive timer, if supported.\nTo start executing commands on the controller after that controller reports controller shutdown processing\ncomplete (i.e., the CSTS.ST bit is cleared to ‘0’ and the CSTS.SHST field is set to 10b) utilizing the CC.EN\nbit:\n•\nif the CC.EN bit is set to ‘1’, then a Controller Level Reset is required to clear the CC.EN bit to ‘0’\non that controller and the CC.EN bit is subsequently required to be set to ‘1’ as part of the\ninitialization sequence (refer to section 3.5); and\n•\nif the CC.EN bit is cleared to ‘0’, then:\no\na Controller Level Reset is required and the CC.EN bit is subsequently required to be set\nto ‘1’ as part of the initialization sequence (refer to section 3.5); or\no\nthe CC.EN bit is required to be set to ‘1’ and the CC.SHN field is required to be cleared to\n00b with a single Property Set command (refer to section 6.6) that changes the CC property\n(refer to Figure 41). The controller clears the CSTS.SHST field to 00b in response to that\nwrite.\nThe initialization sequence (refer to section 3.5) should then be executed on that controller.",
    "tables": [],
    "figures": []
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 0
  }
}