{
  "section_index": 787,
  "section_id": "8.1.26.4.4",
  "title": "8.1.26.4.4 Unrestricted Processing State",
  "level": 5,
  "pages": {
    "start": 666,
    "end": 668,
    "count": 3
  },
  "content": {
    "text": "In this state, if the sanitize operation fails, then the sanitization target transitions to the Unrestricted Failure\nstate, from which it is able to transition to the Idle state without successful sanitization.\nIn this state:\na) the controller shall set the Sanitize Progress (SPROG) field, in the Sanitize Status log page for the\nsanitization target, as described in Figure 302;\nb) the controller shall perform additional media modification, if required, as described in section\n8.1.26.2;\nc) the controller should deallocate all media in the sanitization target that is allocated for user data, if\npermitted, as described in section 8.1.26.2;\nd) if a change in the composition of the NVM subsystem occurs, then the MVCNCLD bit shall be set\nto ‘1’ in the Sanitize Status log page for the sanitization target;\ne) if the sanitization target is the NVM subsystem and a Controller Level Reset of any controller in the\nNVM subsystem occurs that is caused by:\n•\na transport-specific reset type (refer to the applicable NVM Express Transport specification\napplicable NVM Express Transport specification); or\n•\nan NVM Subsystem Reset,\nthen the MVCNCLD bit shall be set to ‘1’;\n;\nf)\nif the sanitization target is a namespace and a Controller Level Reset on any controller that is\nattached to the sanitization target occurs that is caused by:\n•\na transport-specified reset type (refer to the applicable NVM Express Transport specification\napplicable NVM Express Transport specification); or\n•\nan NVM Subsystem Reset,\nthen the MVCNCLD bit shall be set to ‘1’;\n;\ng) all controllers and Management Endpoints in the NVM subsystem shall process commands as\ndescribed in section 8.1.26.5;\nh) if the sanitization target is the NVM subsystem, then all controllers in the NVM subsystem shall\nabort a:\n•\nSanitize command; and\nwith a status code of Sanitize In Progress; and\ni)\nif the sanitization target is a namespace, then all controllers in the NVM subsystem shall abort a:\n•\nSanitize command; and\n•\nSanitize Namespace command for the sanitization target associated with this state machine,\nwith a status code of Sanitize Namespace In Progress.\nThe controller shall:\na) if the sanitization target is the NVM subsystem:\nif the Sanitize Namespace command is not supported:\ni. set the Global Data Erased (GDE) bit to ‘1’ in the Sanitize Status log page for the\nNVM subsystem; and\nii. set the Sanitize State (SANS) field to 0h (i.e., Idle state) in the Sanitize Status log\npage for the NVM subsystem;\nif the Sanitize Namespace command is supported:\ni.\nset the Global Data Erased (GDE) bit to ‘1’ in every Sanitize Status log page\nii.\nset the Namespace Data Erased (NDE) bit to ‘1’ in the Sanitize Status log page\nfor each namespace that exists in the NVM subsystem; and\niii.\nset the SANS field to 0h (i.e., Idle state) in the Sanitize Status log page for the\nNVM subsystem and each namespace that exists in the NVM subsystem;\nb) if the sanitization target is a namespace:\nset the Namespace Data Erased (NDE) bit to ‘1’ in the Sanitize Status log page for that\nnamespace; and\nset the SANS field to 0h (i.e., Idle state) in the Sanitize Status log page for that namespace;\nc) report the Sanitize Operation Completed asynchronous event or the Sanitize Operation Completed\nWith Unexpected Deallocation asynchronous event as described in section 8.1.26.1.\nThe controller shall:\na) set the FAILS field to 3h in the Sanitize Status log page for the sanitization target (i.e., Unrestricted\nProcessing state); and\nb) report the Sanitize Operation Completed asynchronous event or the Sanitize Operation Completed\nWith Unexpected Deallocation asynchronous event as described in section 8.1.26.1.\nThe controller shall:\n1. report the Sanitize Operation Entered Media Verification State asynchronous event as described\nin section 8.1.26.1.",
    "tables": [
      {
        "id": "table_667_128",
        "page": 667,
        "bbox": [
          115.0,
          128.0,
          882.0,
          377.0
        ],
        "image_path": "Table_8_1_26_4_4_Unrestricted_Processing_State.png",
        "title": "Table_8_1_26_4_4_Unrestricted_Processing_State",
        "table_md": "| State Transition | | | |\n| :--- | :--- | :--- | :--- |\n| **Starting** | **Ending** | **Label**¹ | **Transition Condition** |\n| Unrestricted Processing | Idle | C2 | The sanitize processing completes successfully and the EMVS bit was:<br>a) cleared to '0' in the command that started the sanitize operation; or<br>b) set to '1' in the command that started the sanitize operation, the MVCNCLD bit is set to '1', and deallocation of all media in the sanitization target that is allocated for user data completes successfully. |\n| | Unrestricted Failure | D2 | The sanitize processing fails. |\n| | Media Verification | F2 | The EMVS bit is set to '1' in the command that started the sanitize operation, the sanitize processing completes successfully, and the MVCNCLD bit is cleared to '0' in the Sanitize Status log page for the sanitization target. |\n| Notes: | | | |\n| | | | 1. Refer to Figure 706. |"
      }
    ],
    "figures": []
  },
  "statistics": {
    "table_count": 1,
    "figure_count": 0
  }
}