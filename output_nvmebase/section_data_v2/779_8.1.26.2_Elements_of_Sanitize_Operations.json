{
  "section_index": 779,
  "section_id": "8.1.26.2",
  "title": "8.1.26.2 Elements of Sanitize Operations",
  "level": 4,
  "pages": {
    "start": 656,
    "end": 657,
    "count": 2
  },
  "content": {
    "text": "A sanitize operation consists of:\n•\nsanitize processing, which may include:\ndeallocation of all media in the sanitization target that is allocated for user data, if permitted;\nand\nadditional media modification;\n•\noptional verification of media in the sanitization target that is allocated for user data; and\n•\npost-verification deallocation of all media in the sanitization target that is allocated for user data\nfollowing media verification, if any.\nSanitize processing is performed in either restricted completion mode (i.e., in the Restricted Processing\nstate) or in unrestricted completion mode (i.e., in the Unrestricted Processing state), as specified by the\nAllow Unrestricted Sanitize Exit (AUSE) bit in the Sanitize command (refer to Figure 388) or in the Sanitize\nNamespace command (refer to Figure 391).\nAdditional media modification may be performed as part of sanitize processing (i.e., in the Restricted\nProcessing state or the Unrestricted Processing state) to prevent commands that access media after\ncompletion of sanitize processing from encountering data integrity errors caused by that sanitize\nprocessing.\nFor a sanitization target of NVM subsystem, additional media modification shall be performed if the\nNODMMAS field is set to 10b (refer to Figure 328) and the Sanitize command that started the sanitize\noperation specifies:\n•\nthe Enter Media Verification State (EMVS) bit cleared to ‘0’; and\n•\nthe No-Deallocate After Sanitize (NDAS) bit set to ‘1’.\nVerification of media in the sanitization target that is allocated for user data is able to be performed by the\nhost if the Sanitize Operation State Machine is in the Media Verification state. A Block Erase sanitize\noperation or Crypto Erase sanitize operation may invalidate error correction codes on the media, causing\nsubsequent reads to fail because of media errors. In the Media Verification state, reads are successful\nregardless of such invalid error correction codes which enables the host to perform an audit (refer to section\n1.5.11) to verify that the media was sanitized. Refer to the applicable NVM Express I/O Command Set\nspecification for details. Media verification is performed if the command that starts a sanitize operation\nspecified the EMVS bit set to ‘1’ and sanitize processing completed successfully.\nIf a sanitize operation includes deallocation of all media in the sanitization target that is allocated for user\ndata, then that deallocation shall be performed in exactly one of the following states:\n•\nRestricted Processing state;\n•\nUnrestricted Processing state; or\n•\nPost-Verification Deallocation state.\nIf the command (refer to Figure 388 and Figure 391) that starts a sanitize operation specified:\n•\nthe Enter Media Verification State (EMVS) bit cleared to ‘0’;\n•\nthe AUSE bit cleared to ‘0’; and\n•\nthe No-Deallocate After Sanitize (NDAS) bit, if any:\ncleared to ‘0’; or\nset to ‘1’ and the controller encounters a condition that results in unexpected deallocation\nof all media in the sanitization target that is allocated for user data (refer to section\n5.2.26.1.15),\nthen deallocation of all media in the sanitization target that is allocated for user data shall be performed in\nthe Restricted Processing state. If that deallocation fails, then sanitize processing fails.\nIf Media Verification state is canceled (i.e., the MVCNCLD bit is set to ‘1’) during the Restricted Processing\nstate, then deallocation of all media in the sanitization target that is allocated for user data shall be\nperformed in the Restricted Processing state.\nIf the command that starts a sanitize operation specifies:\n•\nthe Enter Media Verification State (EMVS) bit cleared to ‘0’;\n•\nthe AUSE bit set to ‘1’; and\n•\nthe No-Deallocate After Sanitize (NDAS) bit, if any:\ncleared to ‘0’; or\nset to ‘1’ and the controller encounters a condition that results in unexpected deallocation\nof all media in the sanitization target that is allocated for user data (refer to section\n5.2.26.1.15),\nthen deallocation of all media in the sanitization target that is allocated for user data shall be performed in\nthe Unrestricted Processing state. If that deallocation fails, then sanitize processing fails.\nIf the Media Verification state is canceled (i.e., the MVCNCLD bit is set to ‘1’) during the Unrestricted\nProcessing state, then deallocation of all media in the sanitization target that is allocated for user data shall\nbe performed in the Unrestricted Processing state.\nIn the Post-Verification Deallocation state the controller deallocates all user data.\nIn the Post-Verification Deallocation state, if the controller:\n•\nsuccessfully completes deallocating all media in the sanitization target that is allocated for user\ndata, then the sanitization target enters the Idle state; or\n•\nfails to deallocate all media in the sanitization target that is allocated for user data, then the\nsanitization target enters the Restricted Failure state or the Unrestricted Failure state, as described\nin section 8.1.26.4.7.\nA Controller Level Reset may cause the sanitize operation not to include the Media Verification state and\nthe Post-Verification Deallocation state, as described in section 8.1.26.4.",
    "tables": [],
    "figures": []
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 0
  }
}