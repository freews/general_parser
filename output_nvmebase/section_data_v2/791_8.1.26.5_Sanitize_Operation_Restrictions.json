{
  "section_index": 791,
  "section_id": "8.1.26.5",
  "title": "8.1.26.5 Sanitize Operation Restrictions",
  "level": 4,
  "pages": {
    "start": 672,
    "end": 673,
    "count": 2
  },
  "content": {
    "text": "In the following states:\n•\nRestricted Processing;\n•\nRestricted Failure;\n•\nUnrestricted Processing;\n•\nUnrestricted Failure;\n•\nMedia Verification; and\n•\nPost-Verification Deallocation,\nall enabled controllers in the NVM subsystem have restrictions in the set of actions that they are allowed to\nperform.\nWhen a sanitize operation starts on any controller (i.e., a transition into the Restricted Processing state\noccurs or a transition into the Unrestricted Processing state occurs), all controllers in the NVM subsystem\nshall:\n•\nupdate the Sanitize Status log page for the sanitization target (refer to section 5.2.12.1.36);\n•\nsuspend autonomous power state management activities as described in section 8.1.18.2;\n•\nfor NVM subsystem sanitize operations:\no\nclear all of the following outstanding asynchronous events:\n▪\nSanitize Operation Completed asynchronous event, if any;\n▪\nSanitize Operation Completed With Unexpected Deallocation asynchronous event, if any;\nand\n▪\nSanitize Operation Entered Media Verification State asynchronous event, if any;\no\nabort any command (submitted or in progress) not allowed during an NVM subsystem sanitize\noperation (refer to Figure 143) with a status code of Sanitize In Progress, unless otherwise\nspecified (e.g., a media verification Read command);\no\nabort any in progress device self-test operations; and\no\nrelease stream identifiers for any open streams;\nand\n•\nfor namespace sanitize operations:\n•\nfor namespace sanitize operations:\no\nabort any I/O command (submitted or in progress) specifying the NSID of the namespace,\nunless otherwise specified (e.g., a media verification Read command);\no\nprocess any Admin command as specified in section 5.1.2;\no\nabort any in progress device self-test operations specifying the NSID of the namespace or\nspecifying the NSID set to FFFFFFFFh; and\no\nrelease stream identifiers allocated for exclusive use by the namespace for any open streams.\nIf a sanitize operation is in any of the following states (i.e., is in progress):\n•\nRestricted Processing;\n•\nUnrestricted Processing;\n•\nMedia Verification; or\n•\nPost-Verification Deallocation,\nthen for each controller in the NVM subsystem:\n•\nprocessing of a Flush command is specified in section 7.2;\n•\nactivation of new firmware is prohibited;\n•\nif the sanitization target is the NVM subsystem:\no\nall I/O commands other than a Flush command shall be aborted with a status code of\nSanitize In Progress, unless otherwise specified;\no\nany command or command option that is not explicitly permitted in Figure 143 shall be\naborted with a status code of Sanitize In Progress if processed by the controller;\no\nthe Persistent Memory Region shall be prevented from being enabled (i.e., setting\nPMRCTL.EN to ‘1’ does not result in PMRSTS.NRDY being cleared to ‘0’); and\no\nSet Features commands for the CDP feature (refer to section 8.1.6.1) shall be aborted with\na status code of Sanitize In Progress;\nand\n•\nif the sanitization target is a namespace, then for each controller in the NVM subsystem:\no\nif the sanitize operation is in the Media Verification state, then the Sanitize Namespace\ncommand is permitted with access restrictions (refer to section 8.1.26.3);\no\nall I/O commands specifying the NSID of the namespace, other than a Flush command,\nshall be aborted with a status code of Sanitize Namespace In Progress, unless otherwise\nspecified; and\no\nall Admin commands shall be processed by the controller as specified in section 5.1.2.\nWhile the sanitization target is in the Restricted Failure state or the Unrestricted Failure state, then for each\ncontroller in the NVM subsystem:\n•\nthe Sanitize command is permitted with action restrictions (refer to section 5.2.22);\n•\nif the sanitization target is the NVM subsystem, then:\no\nany command or command option that is not explicitly permitted in Figure 143 shall be\naborted with a status code of Sanitize In Progress if processed by the controller;\no\nall I/O commands other than a Flush command (refer to section 7.2), shall be aborted with\na status code of Sanitize Failed; and\no\nthe Persistent Memory Region shall be prevented from being enabled (i.e., setting\nPMRCTL.EN to ‘1’ does not result in PMRSTS.NRDY being cleared to ‘0’);\nand\n•\nif the sanitization target is a namespace, then:\no\nthe Sanitize command is permitted with access restrictions (refer to section 8.1.26.3);\no\nthe Sanitize Namespace command is permitted with access restrictions (refer to section\n8.1.26.3);\no\nall Admin commands other than a Sanitize command or a Sanitize Namespace command\nshall be processed by the controller as specified in section 5.1.2; and\no\nall I/O commands that specify the NSID of the namespace, other than a Flush command\n(refer to section 7.2), shall be aborted with a status code of Sanitize Namespace Failed;\nWhen a sanitize operation starts on any controller in an NVM subsystem (i.e., a transition into the Restricted\nProcessing state occurs or a transition into the Unrestricted Processing state occurs), all Management\nEndpoints in the NVM subsystem shall perform the sanitize operation as described in the NVM Express\nManagement Interface Specification.",
    "tables": [],
    "figures": []
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 0
  }
}