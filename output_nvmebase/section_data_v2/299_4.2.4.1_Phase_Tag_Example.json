{
  "section_index": 299,
  "section_id": "4.2.4.1",
  "title": "4.2.4.1 Phase Tag Example",
  "level": 4,
  "pages": {
    "start": 176,
    "end": 177,
    "count": 2
  },
  "content": {
    "text": "Figure 108 shows an example of how the Phase Tag bit changes over time as a memory-based controller\ncompletes commands and the host processes those completions. This example shows a Completion\nQueue consisting of 6 entries.\nAt time 0, the host initializes the Completion queue (i.e., clearing the Phase Tag bit to ‘0’ in each completion\nqueue entry in the completion queue). For the Admin Completion Queue, the host then sets CC.EN to ‘1’\nto enable the controller. For an I/O Completion Queue, the host then sends the Create I/O Completion\nQueue command. The queue, at this time, is in the Empty condition (refer to section 3.3.1.4).\nAt time 1, the controller has completed a command, but the host has not consumed that completion queue\nentry. As a result of the command completion, the Phase Tag bit in completion queue entry 0 has been\ninverted to ‘1’. Since no completion queue entries have been consumed, the Completion Queue Head\npointer still indicates completion queue entry 0. The controller has updated the internal Completion Queue\nTail Pointer to indicate that completion queue slot 1 is the next completion queue slot into which the\ncontroller posts a completion queue entry.\nAt time 2, the controller has completed 5 additional commands (i.e., 6 commands have been completed)\nand the host has consumed 2 of the completion queue entries. As a result of the 5 additional commands\nhaving been completed, the Phase Tag bit has been inverted to ‘1’ in completion queue entry 1 through\ncompletion queue entry 5. As a result of 2 completion queue entries having been consumed, the host has\nupdated the Completion Queue Head Pointer to indicate that completion queue entry 0 and completion\nqueue entry 1 have been consumed (i.e., completion queue entry 2 is the next completion queue entry for\nthe host to consume). The controller has updated the internal Completion Queue Tail Pointer to indicate\nthat completion queue slot 0 is the next completion queue slot into which the controller posts a completion\nqueue entry.\nAt time 3, the controller has completed 1 additional command (i.e., 7 commands have been completed) and\nno additional completion queue entries have been consumed by the host (i.e., 2 completion queue entries\nhave been consumed). As a result of the additional command having been completed, the Phase Tag bit\nhas been inverted to ‘0’ in completion queue entry 0 (i.e., accounting for the queue wrap condition). The\ncontroller has updated the internal Completion Queue Tail Pointer to indicate that completion queue slot 1\nis the next completion queue slot into which the controller posts a completion queue entry. The queue, at\nthis time, is in the Full condition (refer to section 3.3.1.5).\nAt time 4, the controller has completed no additional commands (i.e., 7 commands have been completed)\nand the host has consumed 2 additional completion queue entries (i.e., 4 completion queue entries have\nbeen consumed). As a result of 2 additional completion queue entries having been consumed, the host has\nupdated the Completion Queue Head Pointer to indicate that completion queue entry 2 and completion\nqueue entry 3 have now been consumed (i.e., completion queue entry 4 is the next completion queue entry\nfor the host to consume). The controller internal Completion Queue Tail Pointer has not changed.\nAt time 5, the controller has completed 11 commands and the host has consumed 8 of the completion\nqueue entries. As a result of the 4 additional commands having been completed, the Phase Tag bit has\nbeen inverted to ‘0’ in completion queue entry 1 through completion queue entry 4. As a result of the 4\nadditional completion queue entries having been consumed, the host has updated the Completion Queue\nHead Pointer to indicate that completion queue entry 5 through completion queue entry 1 (i.e., accounting\nfor the queue wrap condition) have now been consumed (i.e., completion queue entry 2 is the next\ncompletion queue entry for the host to consume). The controller has updated the internal Completion Queue\nTail Pointer to indicate that completion queue slot 5 is the next completion queue slot into which the\ncontroller posts a completion queue entry.\nAt time 6, the controller has completed 11 commands and the host has consumed all 11 of the completion\nqueue entries. As a result of no new command completions, there are no changes to the Phase Tag bit\nvalues. As a result of the 3 additional completion queue entries having been consumed, the host has\nupdated the Completion Queue Head Pointer to indicate that completion queue entry 2 through completion\nqueue entry 4 have now been consumed (i.e., completion queue slot 5 is the next completion queue slot\nfrom which the host consumes a completion queue entry). The queue, at this time, is in the Empty condition\n(refer to section 3.3.1.4).",
    "tables": [],
    "figures": [
      {
        "id": "figure_176_195",
        "page": 176,
        "bbox": [
          104.0,
          195.0,
          894.0,
          682.0
        ],
        "detected_title": "Figure 108 shows an example of how the Phase Tag bit changes over time as a memory-based controller\ncompletes commands and the host processes those completions. This example shows a Completion\nQueue consisting of 6 entries.",
        "title": "Figure 108 shows an example of how the Phase Tag bit changes over time as a memory-based controller\ncompletes commands and the host processes those completions. This example shows a Completion\nQueue consisting of 6 entries.",
        "image_path": "Figure_4_2_4_1_Phase_Tag_Example.png"
      }
    ]
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 1
  }
}