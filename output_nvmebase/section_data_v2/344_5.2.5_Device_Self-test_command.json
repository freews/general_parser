{
  "section_index": 344,
  "section_id": "5.2.5",
  "title": "5.2.5 Device Self-test command",
  "level": 3,
  "pages": {
    "start": 216,
    "end": 218,
    "count": 3
  },
  "content": {
    "text": "The Device Self-test command is used to start a device self-test operation or abort a device self-test\noperation (refer to section 8.1.8). The Device Self-test command is used specifically to:\na) start a short device self-test operation;\nb) start an extended device self-test operation;\nc) start a Host-Initiated Refresh operation;\nd) start a vendor specific device self-test operation; or\ne) abort a device self-test operation already in process.\nA Host-Initiated Refresh operation is a device self-test operation.\nThe device self-test operation is performed by the controller that the Device Self-test command was\nsubmitted to. The Namespace Identifier field controls which namespaces are included in the device self-\ntest operation as specified in Figure 174. For a Host-Initiated Refresh operation, the Namespace Identifier\nfield shall be ignored by the controller.\nThe Device Self-test command uses the Command Dword 10 field and the Command Dword 15 field. All\nother command specific fields are reserved.\nThe processing of a Device Self-test command and interactions with a device self-test operation already in\nprogress is defined in Figure 177.",
    "tables": [
      {
        "id": "table_216_765",
        "page": 216,
        "bbox": [
          115.0,
          765.0,
          881.0,
          890.0
        ],
        "image_path": "Table_5_2_5_Device_Self_test_command_1.png",
        "title": "Table_5_2_5_Device_Self_test_command_1",
        "table_md": "| NSID Value | Definition |\n|---|---|\n| 00000000h | Specifies that the device self-test operation shall not include any namespaces, and only the controller is included as part of the device self-test operation. |\n| 00000001h to FFFFFFFFh | Specifies that the device self-test operation shall include the specified namespace. If this field specifies an invalid namespace ID, then the controller shall abort the command with a status code of Invalid Namespace or Format. If this field specifies an inactive namespace ID, then the controller shall abort the command with a status code of Invalid Field in Command. |\n| FFFFFFFFh | Specifies that the device self-test operation shall include all attached namespaces accessible through the controller at the time the device self-test operation is started. |"
      },
      {
        "id": "table_217_157",
        "page": 217,
        "bbox": [
          114.0,
          157.0,
          881.0,
          348.0
        ],
        "has_intervening_text": true,
        "image_path": "Table_5_2_5_Device_Self_test_command_2.png",
        "title": "Table_5_2_5_Device_Self_test_command_2",
        "merged_count": 2,
        "table_md": "| Bits | Description |\n| :--- | :--- |\n| 31:04 | Reserved |\n| | **Self-test Code (STC):** This field specifies the action taken by the Device Self-test command. |\n| | <table><tbody><tr><th>Value</th><th>Definition</th></tr><tr><td>0h</td><td>Reserved</td></tr><tr><td>1h</td><td>Start a short device self-test operation</td></tr><tr><td>2h</td><td>Start an extended device self-test operation</td></tr><tr><td>3h</td><td>Start a Host-Initiated Refresh operation</td></tr><tr><td>4h to Dh</td><td>Reserved</td></tr><tr><td>Eh</td><td>Vendor specific. Additional information may be provided in Command Dword 15 (refer to Figure 176).</td></tr><tr><td>Fh</td><td>Abort device self-test operation</td></tr></tbody></table> |\n| 03:00 | |\n| | |\n| | |\n| | |\n| | |\n| | |\n| | |\n| | |\n| | |\n| | |\n| |"
      },
      {
        "id": "table_217_522",
        "page": 217,
        "bbox": [
          114.0,
          522.0,
          881.0,
          832.0
        ],
        "has_intervening_text": true,
        "image_path": "Table_5_2_5_Device_Self_test_command_3.png",
        "title": "Table_5_2_5_Device_Self_test_command_3",
        "merged_count": 2,
        "table_md": "| Self-test in Progress ¹ | Self-test Code value in new Drive Self-test command | Controller Action |\n| :--- | :--- | :--- |\n| | 1h – Short device self-test | Abort the new Device Self-test command with a status code of Device Self-test in Progress. |\n| | 2h – Extended device self-test | |\n| | 3h – Host-Initiated Refresh | |\n| | Eh – Vendor specific | Vendor specific |\n| Yes | Fh – Abort device self-test | The controller takes the following actions in order:<br>1. Abort device self-test operation in progress;<br>2. Create log entry in the Newest Self-test Result Data Structure in the Device Self-test Result log page;<br>3. Set the Device Self-test Result field of the current Device Self-test Status field in the Device Self-test log page to 0h; and<br>4. Completes command successfully. |\n| | | |\n| No | 1h – Short device self-test | The controller takes the following actions in order:<br>1. Validate the command parameters;<br>2. Set the Device Self-test Result field of the current Device Self-test Status field in the Device Self-test log page to 1h;<br>3. Start a device self-test operation; and<br>4. Completes command successfully. |\n| | | |\n| Self-test in Progress ¹ | Self-test Code value in new Drive Self-test command | Controller Action |\n| | 2h – Extended device self-test | The controller takes the following actions in order:<br>1. Validate the command parameters;<br>2. Set the Device Self-test Result field of the current Device Self-test Status field in the Device Self-test log page to 2h;<br>3. Start a device self-test operation; and<br>4. Complete the command successfully. |\n| | 3h – Host-Initiated Refresh | The controller takes the following actions in order:<br>1. Validate the command parameters;<br>2. Set the Device Self-test Result field of the current Device Self-test Status field in the Device Self-test log page to 3h;<br>3. Start a device self-test Refresh operation; and<br>4. Complete the command successfully. |\n| | Eh – Vendor specific | Vendor specific |\n| | Fh – Abort device self-test | Completes command successfully. The Device Self-test log page is not modified. |\n| Notes: | | |\n| 1. | | If the Single Device Self-test Operation (SDSO) bit is cleared to '0' in the Device Self-test Options (DSTO) of the Identify Controller data structure (refer to Figure 328), then the Self-test in Progress column represents that a device self-test operation is in progress on the controller that the new Device Self-test command was received on. If the SDSO bit is set to '1', then the Self-test in Progress column represents that a device self-test operation was in progress on the controller that the new Device Self-test command was received on. |"
      }
    ],
    "figures": []
  },
  "statistics": {
    "table_count": 3,
    "figure_count": 0
  }
}