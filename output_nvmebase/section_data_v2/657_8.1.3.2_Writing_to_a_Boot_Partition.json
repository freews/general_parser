{
  "section_index": 657,
  "section_id": "8.1.3.2",
  "title": "8.1.3.2 Writing to a Boot Partition",
  "level": 4,
  "pages": {
    "start": 548,
    "end": 549,
    "count": 2
  },
  "content": {
    "text": "Boot Partition contents may be modified by the host using the Firmware Image Download and Firmware\nCommit commands while the controller is enabled (CC.EN set to ‘1’).\nThe process for updating a Boot Partition is:\n1. The host issues a Firmware Image Download command to download the contents of the Boot\nPartition to a controller. There may be multiple portions of the Boot Partition to download, thus the\noffset for each portion of the Boot Partition being downloaded is specified in the Firmware Image\nDownload command. A host shall send the Boot Partition image in order starting with the beginning\nof the Boot Partition;\n2. The host transitions the Boot Partition that is to be updated to the Write Unlocked State (refer to\nsection 8.1.3.3);\n3. The host submits a Firmware Commit command (refer to section 5.2.8) on that controller with a\nCommit Action of 110b which specifies that the downloaded image replaces the contents of the\nBoot Partition specified in the Boot Partition ID field;\n4. The controller completes the Firmware Commit command. The following actions are taken in\ncertain error scenarios:\na. If the firmware activation was not successful because the Boot Partition could not be written,\nthen the controller reports an error of Boot Partition Write Prohibited;\n5. (Optional) The host reads the contents of the Boot Partition to verify they are correct (refer to section\n8.1.3.1). A host updates the active Boot Partition ID by issuing a Firmware Commit command with\na Commit Action of 111b; and\n6. The host transitions the Boot Partition to either the Write Locked State or Write Locked Until Power\nCycle State to prevent further modification (refer to section 8.1.3.3).\nIf an internal error, reset, or power loss condition occurs while committing the downloaded image to a Boot\nPartition, the contents of the Boot Partition may contain the old contents, new contents, or a mixture of both.\nA host should verify the contents of a Boot Partition before marking that Boot Partition active to ensure the\nactive Boot Partition is stable.\nA host should not read the contents of a Boot Partition while writing to the Boot Partition. The controller\nmay return a combination of new and old data if the host attempts to perform a Boot Partition read operation\nwhile overwriting the contents.\nA host should not overlap firmware/boot partition image update command sequences (refer to section\n1.5.42). During a boot partition image update command sequence, if a Firmware Image Download\ncommand or a Firmware Commit command is submitted for another firmware/boot partition image update\ncommand sequence, the results of both that command and the in-progress firmware image update are\nundefined.\nA host should use the same controller or Management Endpoint (refer to the NVM Express Management\nInterface Specification) for all commands that are part of a boot partition image update command sequence.\nIf the commands for a single firmware/boot partition image update command sequence are submitted to\nmore than one controller and/or Management Endpoint, the controller may abort the Firmware Commit\ncommand with Invalid Firmware Image status.",
    "tables": [],
    "figures": []
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 0
  }
}