{
  "section_index": 331,
  "section_id": "5.2.2",
  "title": "5.2.2 Asynchronous Event Request command",
  "level": 3,
  "pages": {
    "start": 202,
    "end": 203,
    "count": 2
  },
  "content": {
    "text": "Asynchronous events are used to notify a host of status, error, and health information as these events\noccur. To enable asynchronous events to be reported by the controller, a host needs to submit one or more\nAsynchronous Event Request commands to the controller. The controller specifies an event to the host by\ncompleting an Asynchronous Event Request command. A host should expect that the controller may or\nmay not execute the command immediately; the command should be completed when there is an event to\nbe reported.\nThe Asynchronous Event Request command is submitted by a host to enable the reporting of asynchronous\nevents from the controller. The host should not place a timeout on this command. The controller posts a\ncompletion queue entry for this command when there is an asynchronous event to report to the host. If\nAsynchronous Event Request commands are outstanding when the controller is reset, then each of those\ncommands is aborted and shall not return a CQE.\nAll command specific fields are reserved.\nA host may submit multiple Asynchronous Event Request commands to reduce event reporting latency.\nThe total number of simultaneously outstanding Asynchronous Event Request commands is limited by the\nvalue indicated in the Asynchronous Event Request Limit field in the Identify Controller data structure in\nFigure 328.\nAsynchronous events are grouped into event types. The event type shall be indicated in the Asynchronous\nEvent Type field in Dword 0 of the completion queue entry for the Asynchronous Event Request command.\nWhen the controller posts a completion queue entry for an outstanding Asynchronous Event Request\ncommand and thus reports an asynchronous event, then, except for immediate events, subsequent events\nof that event type are automatically masked by the controller until the host clears that event. Unless\notherwise stated (e.g., for immediate events), an event is cleared by reading the log page associated with\nthat event (refer to section 5.2.12). If that log page is not accessible because media is not ready (i.e., the\ncontroller aborts the Get Log Page command with a status code of Admin Command Media Not Ready),\nthen the controller shall not post a completion queue entry for that asynchronous event until the controller\nis able to successfully return the log page that is required to be read to clear the asynchronous event.\nThe following event types are defined:\na) Error event: Indicates a general error that is not associated with a specific command (refer to\nFigure 152). The controller shall set the Log Page Identifier field to the identifier of the Error\nInformation log page (i.e., 01h). To clear this event, a host reads that log page (i.e., the Error\nInformation log page (refer to section 5.2.12.1.2)) using the Get Log Page command with the Retain\nAsynchronous Event bit cleared to ‘0’;\nb) SMART / Health Status event: Indicates a SMART or health status event (refer to Figure 153).\nThe controller shall set the Log Page Identifier field to the identifier of the SMART / Health\nInformation log page (i.e., 02h). To clear this event, a host reads the SMART / Health Information\nlog (refer to section 5.2.12.1.3) using the Get Log Page command with the Retain Asynchronous\nEvent bit cleared to ‘0’. The SMART / Health conditions that trigger asynchronous events may be\nconfigured in the Asynchronous Event Configuration feature using the Set Features command\n(refer to section 5.2.26.1.5);\nc) Notice event: Indicates a general event (refer to Figure 154). The controller shall set the Log Page\nIdentifier field to the log page identifier of the appropriate log page as described in Figure 154. To\nclear this event, a host reads that log page (i.e., the appropriate log page as described in Figure\n154). The conditions that trigger asynchronous events may be configured in the Asynchronous\nEvent Configuration feature using the Set Features command (refer to section 5.2.26.1.5);\nd) I/O Command Specific Status event: Indicates an event that is specific to an I/O command (refer\nto Figure 155);\ne) Immediate event: Indicates an event that is only reported when an outstanding Asynchronous\nEvent Request command exists at the time the event occurs (refer to Figure 156). If the event\noccurs and there is no outstanding Asynchronous Event Request command, then the event shall\nnot be reported;\nf)\nOne-Shot event: Indicates an event that is only reported once and the event is cleared by the\ncontroller when that event is reported in the completion of an Asynchronous Event Request\ncommand. Refer to the description of each event to determine how to clear any pending events\n(e.g., refer to the Controller Data Queue feature in section 5.2.26.1.23); and\ng) Vendor Specific event: Indicates a vendor specific event. To clear this event, a host reads the\nindicated vendor specific log page using the Get Log Page command with the Retain Asynchronous\nEvent bit cleared to ‘0’.\nThe Sanitize Operation Completed With Unexpected Deallocation asynchronous event shall be supported\nif the controller supports the Sanitize Config feature (refer to section 5.2.26.1.15).\nAsynchronous events are reported due to a new entry being added to a log page (e.g., Error Information\nlog page), a status change (e.g., status in the SMART / Health log page), or occurrence of a defined\ncondition (e.g., Firmware Activation Starting, NVM Subsystem Normal Shutdown). A status change may be\npermanent (e.g., the media has become read only) or transient (e.g., the temperature reached or exceeded\na threshold for a period of time). A host should modify the event threshold or mask the event for transient\nand permanent status changes before clearing that event to avoid repeated reporting of asynchronous\nevents caused by clearing an asynchronous event in the absence of change to the status that caused that\nevent to be reported.\nIf an event occurs for which reporting is enabled and there are no Asynchronous Event Request commands\noutstanding, the controller should retain the event information for that Asynchronous Event Type (i.e., a\npending event) and use that information as a response to the next Asynchronous Event Request command\nthat is received. If a Get Log Page command clears the event prior to receiving the Asynchronous Event\nRequest command or if a Controller Level Reset occurs, then a notification is not sent. If multiple events of\nthe same type occur that have identical responses to the Asynchronous Event Request command, then\nthose events may be reported as a single response to an Asynchronous Event Request command. If\nmultiple events occur that are of different types or have different responses to the Asynchronous Event\nRequest command, then the controller should retain a queue of those events for reporting in responses to\nsubsequent Asynchronous Event Request commands.",
    "tables": [],
    "figures": []
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 0
  }
}