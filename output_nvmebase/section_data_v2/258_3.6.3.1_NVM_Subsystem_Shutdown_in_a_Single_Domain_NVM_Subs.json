{
  "section_index": 258,
  "section_id": "3.6.3.1",
  "title": "3.6.3.1 NVM Subsystem Shutdown in a Single Domain NVM Subsystem",
  "level": 4,
  "pages": {
    "start": 140,
    "end": 141,
    "count": 2
  },
  "content": {
    "text": "A normal shutdown on all controllers within the NVM subsystem (i.e., normal NVM Subsystem Shutdown)\nis initiated by:\n•\na host writing the value 4E726D6Ch (\"Nrml\") to NSSD.NSSC when CAP.CPS is set to 11b; or\n•\nissuing an NVMe-MI Shutdown command to a Management Endpoint (refer to the NVM Express\nManagement Interface Specification) specifying a normal shutdown.\nFor each controller in the NVM subsystem for this normal NVM Subsystem Shutdown, if:\n•\nCSTS.SHST is set to 00b; and\n•\nAn outstanding Asynchronous Event Request command exists,\nthen the controller shall issue a Normal NVM Subsystem Shutdown event prior to shutting down the\ncontroller.\nAn abrupt shutdown on all controllers within the NVM subsystem (i.e., abrupt NVM Subsystem Shutdown)\nis initiated by:\n•\na host writing the value 41627074h (\"Abpt\") to NSSD.NSSC when CAP.CPS is set to 11b; or\n•\nissuing an NVMe-MI Shutdown command to a Management Endpoint (refer to the NVM Express\nManagement Interface Specification) specifying an abrupt shutdown.\nWhile NVM Subsystem Shutdown processing is in progress, any controller in the NVM subsystem may\nabort any command with a status code of Commands Aborted due to Power Loss Notification.\nIt is recommended that the host wait a minimum of the NVM Subsystem Shutdown Latency reported in the\nIdentify Controller data structure (refer to Figure 328) for NVM Subsystem Shutdown processing to\ncomplete; if the reported NVM Subsystem Shutdown Latency value is 0h, then the host should wait for a\nminimum of 30 seconds. While an NVM Subsystem Shutdown is reported as in progress, it is not\nrecommended to reset the NVM subsystem via an NVM Subsystem Reset or a power cycle (which causes\nan NVM Subsystem Reset). This aborts the NVM Subsystem Shutdown which may impact the subsequent\ntime required for the NVM subsystem to become ready to perform I/O (e.g., after power is reapplied\nfollowing a power cycle).\nFor either a normal or an abrupt NVM Subsystem Shutdown, the NVM subsystem is ready to be powered\noff (e.g., the media is in the shutdown state (refer to Figure 85)) when the CSTS.ST bit is set to ‘1’ and the\nCSTS.SHST field indicates that shutdown processing is complete (i.e., the CSTS.SHST field is set to 10b)\non any controller in the NVM subsystem. The NVM subsystem shall not set the CSTS.SHST field to 10b on\nany controller in the NVM subsystem until the entire NVM subsystem is ready to be powered off. The NVM\nSubsystem shall indicate that NVM Subsystem Shutdown processing is complete by setting the\nCSTS.SHST field to 10b on all controllers in the NVM subsystem. The NVM subsystem remains ready to\nbe powered off (e.g., the media remains in the shutdown state) until:\nA. an NVM Subsystem Reset; or\nB. an Admin command that requires access to the media (refer to Figure 84) and specifies the Ignore\nShutdown bit set to ‘1’ is processed by any controller via the out-of-band mechanism (refer to the\nNVM Express Management Interface Specification).\nIf a normal or an abrupt NVM Subsystem Shutdown is reported as in progress or is reported as complete\nwithin the NVM subsystem (i.e., the CSTS.ST bit is set to ‘1’ and the CSTS.SHST field is set to either 01b\nor 10b on all controllers in the NVM subsystem, indicating that an NVM Subsystem Reset has not occurred\nsince initiation of that NVM Subsystem Shutdown), then:\n•\nan NVM Subsystem Reset:\nshall abort any in progress NVM Subsystem Shutdown;\nclears the CSTS.SHST field to 00b in all controllers in the NVM subsystem; and\nclears the CSTS.ST bit to ‘0’ in all controllers in the NVM subsystem;\nand\n•\na Controller Level Reset of any controller in the NVM subsystem that is initiated by any other\nmethod (refer to section 3.7.2):\nshall not abort any in progress NVM Subsystem Shutdown;\ndoes not change the values of the CSTS.ST bit and the CSTS.SHST field, as described in\nFigure 42; and\nshall not cause that NVM subsystem to cease being ready to be powered off (e.g., shall\nnot transition the media out of the shutdown state) if that NVM Subsystem was ready to be\npowered off when that Controller Level Reset was initiated.\nTo start executing commands on the controller after that controller reports NVM Subsystem Shutdown\nprocessing complete (i.e., the CSTS.ST bit is set to ‘1’ and the CSTS.SHST field is set to 10b):\n•\nregardless of the value of the CC.EN bit, an NVM Subsystem Reset is required; and\n•\nthe CC.EN bit is subsequently required to be set to ‘1’ as part of the initialization sequence (refer\nto section 3.5).\nThe initialization sequence (refer to section 3.5) should then be executed on that controller.",
    "tables": [],
    "figures": []
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 0
  }
}