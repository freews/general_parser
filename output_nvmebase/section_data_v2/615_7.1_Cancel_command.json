{
  "section_index": 615,
  "section_id": "7.1",
  "title": "7.1 Cancel command",
  "level": 2,
  "pages": {
    "start": 524,
    "end": 526,
    "count": 3
  },
  "content": {
    "text": "The Cancel command is used to request an abort for specified commands submitted on the same I/O\nSubmission Queue to which the Cancel command is submitted. The Cancel command may apply to a single\nnamespace or to multiple namespaces. The Cancel command may be deeply queued. Some of the\ncommands to abort may have already completed, currently be processing, or be deeply queued. As a result,\nthe performance of the Cancel command may be impacted.\nTo abort an Admin command, the host uses the Abort command (refer to section 5.2.1). To abort a Cancel\ncommand, the host may:\n•\nuse the Abort command;\n•\nuse a second Cancel command with a Cancel Action set to Single Command Cancel (i.e., 00b) that\nspecifies the CID of the Cancel command to abort; or\n•\nfollow the procedure described in section 3.3.1.3 to delete the I/O Submission Queue and recreate\nthe I/O Submission Queue.\nThe controller applies the specified Cancel Action (refer to Figure 591) to all outstanding commands that\nhave been fetched prior to the processing of the Cancel command. The controller may or may not apply\nthe specified Cancel Action to commands that are fetched:\n•\nafter the start of processing of the Cancel command; and\n•\nbefore the completion of the Cancel command.\nThere is no requirement to apply the specified Cancel Action to commands that have not been fetched by\nthe controller.\nIf an abort action is performed on a command to abort, that action may be:\n•\nan immediate abort (i.e., the abort action occurs prior to posting the completion queue entry for the\nCancel command); or\n•\na deferred abort (i.e., the abort action may or may not occur prior to posting the completion queue\nentry for the Cancel command).\nFor each command on which an immediate abort is performed, the controller shall meet the immediate\nabort requirements (refer to section 5.2.1.1) for that command before posting the completion queue entry\nfor the Cancel command.\nFor each command on which a deferred abort is performed, there are no requirements on the ordering of\nposting of the completion queue entry for the Cancel command (refer to section 7.1.1).\nFor each command on which an abort action is performed (i.e., immediate abort or deferred abort) the\nstatus code shall be set to Command Abort Requested in the completion queue entry for that command.\nIf the Cancel command is supported, then the Commands Supported and Effects log page shall be\nsupported.\nThe Cancel command uses the Command Dword 10 and Command Dword 11 fields. All other command\nspecific fields are reserved.",
    "tables": [
      {
        "id": "table_525_660",
        "page": 525,
        "bbox": [
          115.0,
          660.0,
          881.0,
          845.0
        ],
        "image_path": "Table_7_1_Cancel_command.png",
        "title": "Table_7_1_Cancel_command",
        "merged_count": 2,
        "table_md": "| Bits | Description |\n| :--- | :--- |\n| 31:16 | **Command Identifier (CID):** This field specifies the command identifier of the command to be aborted (i.e., the CDW0.CID field within the command to be aborted).<br><br>If the Action Code field is set to Single Command Cancel and this field is set to the CID for this Cancel command, then the controller shall abort the command with a status code of Invalid Command ID.<br><br>If the Action Code field is set to Multiple Command Cancel and this field is not set to FFFFh, then the controller shall abort the command with a status code of Invalid Field in Command. |\n| 15:00 | **Submission Queue Identifier (SQID):** This field specifies the identifier of the Submission Queue that the Cancel command is associated with.<br><br>If the SQID does not match the Submission Queue Identifier of the submission queue to which the Cancel command is submitted, then the controller shall abort the command with a status code of Invalid Field in Command. |\n| | |\n| Bits | Description |\n| 31:02 | Reserved |\n| 01:00 | **Action Code (ACODE):** |\n| | <table><tbody><tr><th>Value</th><th>Cancel Action</th></tr><tr><td>00b</td><td>Single Command Cancel: The hosts requests that the controller abort the specific command submitted to the specified namespace with the specified CID.<br><br>If the NSID field is set to FFFFFFh then, the host requests that the controller abort the specific command submitted to any NSID with the specified NSID.<br><br>If the NSID is not set to FFFFFFh and the specified CID is not associated with the specified NSID then, the controller shall abort the Cancel command with a status code of Invalid Field in Command.<br><br>If the specified CID is not found, then the controller shall complete the Cancel command with the Commands Eligible for Deferred Abort field cleared to 0h and the Commands Aborted field cleared to 0h.</td></tr><tr><td>01b</td><td>Multiple Command Cancel: The hosts requests that the controller abort all commands, other than this Cancel command, on the I/O Submission Queue to which the Cancel command was submitted, that were submitted for the specified NSID.<br><br>If the NSID is set to FFFFFFh then the host requests that the controller abort all commands, other than this Cancel command, submitted to the I/O Submission Queue to which the Cancel command was submitted for all namespaces.</td></tr><tr><td>All others</td><td>Reserved</td></tr></tbody></table> |"
      }
    ],
    "figures": []
  },
  "statistics": {
    "table_count": 1,
    "figure_count": 0
  }
}