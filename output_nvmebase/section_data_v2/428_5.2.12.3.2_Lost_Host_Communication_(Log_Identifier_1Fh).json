{
  "section_index": 428,
  "section_id": "5.2.12.3.2",
  "title": "5.2.12.3.2 Lost Host Communication (Log Identifier 1Fh)",
  "level": 5,
  "pages": {
    "start": 328,
    "end": 330,
    "count": 3
  },
  "content": {
    "text": "The Lost Host Communication log page for a controller reports a list of other controllers in the same NVM\nsubsystem that have lost communication with the host that submitted the Get Log Page command for this\nlog page without the NVM subsystem observing a host action that terminated the association. That list of\ncontrollers shall not include the controller that processes that Get Log Page command.\nEntries in this log page inform the host of communication losses detected by the NVM subsystem as a\ncomplement to other host communication loss detection mechanisms. The host is able to use this log page\nto:\n•\ndetect communication loss (refer to section 9.6.1);\n•\nselect the controller for submission of the Cross-Controller Reset command (refer to section 5.4.3)\nas part of Cross-Controller Reset Recovery (refer to section 8.3.3); and\n•\nshorten Time-Based Recovery (refer to section 9.6.2.1).\nFor purposes of this log page, a Lost Host Communication (LHC) Controller is a controller that has lost\ncommunication with the host:\n•\nwithout the NVM subsystem observing a host action that terminated the association (e.g., as a\nresult of a Cross-Controller Reset command); and\n•\nwithout an NVM subsystem action that terminated the association and that was sent to the host\n(e.g., an authentication failure, refer to section 8.3.5.2).\nSome message-based transports do not enable the NVM subsystem to distinguish between a host\nterminating an NVMe Transport connection and the fabric terminating the NVMe Transport connection (e.g.,\nsome firewalls reset TCP connections). For such a transport, the NVM subsystem should treat the\ntermination of an NVMe Transport connection as not resulting from a host action.\nAs a result of a controller becoming an LHC Controller, the NVM subsystem should add an entry to this log\npage for one or more other controllers that are associated with the same host. The NVM subsystem shall\nnot add an entry to this log page for a controller that is not associated with the host that is associated with\nthe controller that became an LHC Controller.\nThis log page is not required to include entries for all loss of communication events detected by the NVM\nsubsystem. Addition of entries to this log page may be limited by implementation restrictions (e.g., security\nconsiderations such as secure channel configuration differences between the two controllers, internal\ncommunication boundaries, or other internal resource limits). If the host is associated with many controllers,\naddition of entries to this log page should be limited to a subset of these controllers, limiting the number of\nCross Controller Reset commands sent by the host for a given loss of communication event.\nIf Lost Host Communication Notices are enabled and the NVM subsystem adds an entry to this log page\nthen the controller shall report a Lost Host Communication Notice asynchronous event (refer to Figure 154)\nThis log page consists of a header followed by a list of up to 511 Lost Host Communication Entries. The list\nis ordered from the oldest (i.e., least recently added) entry to the newest (i.e., most recently added) entry\nwith the oldest entry in the lowest numbered index. If this log page has 511 entries and an entry is added,\nthen the oldest entry shall be removed. If an entry with a controller ID exists and an entry with the same\ncontroller ID is added to this log page, then:\n•\nthat existing entry shall be removed from this log page; and\n•\nthe Loss Count field in the new entry shall be set to:\none more than the value of the older entry, if the value of the Loss Count field in the older\nentry is less than FFh; and\nFFh, if the value of the Loss Count field in the older entry is FFh.\nIf an entry is added to this log page and no entry with the same controller ID exists, then the value of the\nLoss Count field of the new entry shall be set to 1h.\nThe controller should remove any entry from this log page that has been present for longer than an\nimplementation specific amount of time (e.g., entries older than one hour).\nAll entries are removed from this log page if the controller processes:\n•\na Get Log Page command for this log page with the RAE bit cleared to ‘0’; or\n•\na Controller Level Reset.\nIf the host connected to a Discovery subsystem using the well-known Discovery Service NQN, then the\ncontroller shall not report that this log page is supported in the Supported Log Pages log page (refer to\nsection 5.2.12.1.1).\nThe log page is defined in Figure 306.\nThe format of the Lost Host Communication Entry is defined in Figure 307.\nFor each controller indicated by an entry in this log page, if a host has not received completions for all\noutstanding commands submitted to that controller (refer to section 3.4.5), then it is strongly recommended\nthat the host takes steps described in section 9.6 to avoid possible data corruption caused by interaction\nbetween outstanding commands and subsequent commands submitted by that host to another controller.\nA host may have already detected a loss of communication with the LHC Controller indicated by an entry\nin this log page. To avoid performing recovery from a loss of communication (as described in section 9.6)\nwhen recovery is not necessary:\n•\nif the NVM subsystem uses the dynamic controller model or the NVM subsystem supports the host\nspecifying a controller ID of FFFEh in the Connect command, then the NVM subsystem should not\naggressively reuse controller IDs, as described in section 6.3;\n•\nif the value of the Controller Instance Uniquifier (CIU) field of an entry in the log page is not the\nsame as the CIU field in the Identify Controller data structure of the controller indicated by that\nentry, then the host should ignore that entry because that entry identifies an older controller\ninstance that is no longer processing commands (e.g., because the controller instance no longer\nexists); and\n•\nif the host is already in process of recovery from a loss of communication with a controller indicated\nby an entry in the log page, then the host should ignore that log page entry and not restart that\nrecovery.",
    "tables": [],
    "figures": [
      {
        "id": "figure_329_253",
        "page": 329,
        "bbox": [
          114.0,
          253.0,
          882.0,
          446.0
        ],
        "detected_title": "Figure 306: Lost Host Communication Log Page",
        "title": "Figure 306: Lost Host Communication Log Page",
        "image_path": "Figure_5_2_12_3_2_Lost_Host_Communication_Log_Identifier_1Fh.png",
        "merged_count": 2
      }
    ]
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 1
  }
}