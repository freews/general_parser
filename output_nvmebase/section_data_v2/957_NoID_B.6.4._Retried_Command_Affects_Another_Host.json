{
  "section_index": 957,
  "section_id": "",
  "title": "B.6.4. Retried Command Affects Another Host",
  "level": 3,
  "pages": {
    "start": 781,
    "end": 782,
    "count": 2
  },
  "content": {
    "text": "In the example shown in Figure 820, two hosts use Location X in a namespace for coordination. Writing the\nvalue A to Location X indicates that step A in a processing sequence has been completed, and writing the\nvalue B indicates that step B in the processing sequence has been completed, where higher-level software\nrequires that step B follow step A.\nHost 1 indicates completion of step A by writing the value A to Location X, but loss of communication\nprevents Host 1 from receiving the completion of that command. Host 2 observes that step A is complete,\nquickly performs step B, and indicates completion of step B by writing the value B to Location X.\nIn the absence of receiving a completion for the original command, Host 1 retries writing the value A to\nLocation X, overwriting the completion of step B reported by Host 2. This example shows that retry of\ncommands that are able to affect the behavior of other hosts is problematic. In this example, higher-level\nsoftware needs a mechanism to indicate that the writes to Location X are not safe to retry after a delay.\nThis sort of higher-level software usage of ordinary NVMe commands (e.g., NVM Command Set Write\ncommands) for coordination and synchronization among multiple hosts is strongly discouraged because\nretry of these commands after communication loss is problematic. Higher-level software should instead use\nmechanisms intended for coordination among multiple hosts. Two examples of such mechanisms are:\n•\nReservations (refer to section 8.1.24); and\n•\nCompare and Write fused operations (refer to the Fused Operation section of the NVM Express\nNVM Command Set Specification).\nIn addition, command retries that modify NVM subsystem state (e.g., a Set Features command that modifies\na feature that has any scope that is visible to other hosts as described in Figure 403) are able to affect the\nbehavior of other hosts. Use of commands that modify NVM subsystem state for coordination and\nsynchronization among multiple hosts is likewise strongly discouraged.",
    "tables": [],
    "figures": [
      {
        "id": "figure_782_123",
        "page": 782,
        "bbox": [
          127.0,
          123.0,
          843.0,
          393.0
        ],
        "title": "Figure 820: Retried Command Affects Another Host",
        "image_path": "Figure__B_6_4_Retried_Command_Affects_Another_Host.png"
      }
    ]
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 1
  }
}