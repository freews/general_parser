{
  "section_index": 481,
  "section_id": "5.2.20",
  "title": "5.2.20 Namespace Attachment command",
  "level": 3,
  "pages": {
    "start": 411,
    "end": 412,
    "count": 2
  },
  "content": {
    "text": "The Namespace Attachment command is used to attach and detach controllers from a namespace. The\nattach and detach operations (refer to section 8.1.16) are persistent across all reset events. Namespace\nattach and detach operations are persistent across Virtualization Management commands that set a\nsecondary controller offline.\nThe Namespace Attachment command uses the Data Pointer and Command Dword 10 fields. All other\ncommand specific fields are reserved.\nThe Select field determines the data structure used as part of the command. The data structure is 4,096\nbytes in size. The data structure used for Controller Attach and Controller Detach is a Controller List (refer\nto section 4.6.1). The controllers that are to be attached or detached, respectively, are described in the data\nstructure.\nIf the SEL field specifies the Controller Attach value, then:\n•\nIf the Maximum Domain Namespace Attachments (MAXDNA) field in the Identify Controller data\nstructure (refer to Figure 328) is non-zero, then:\nFor each controller specified in the controller list, if attaching the namespace to that I/O\ncontroller causes the sum of the number of namespaces attached to each I/O controller in\nthe Domain to be greater than the value specified in the MAXDNA field, then the controller\nshall abort the command with a status code of Namespace Attachment Limit Exceeded;\nand\n•\nFor each I/O controller specified in the controller list, if the Maximum I/O Controller Namespace\nAttachments (MAXCNA) field in the Identify Controller data structure for that controller is non-zero,\nthen:\nIf attaching the namespace to that I/O controller causes that I/O controller to have the\nnumber of attached namespaces to be greater than the value specified in the MAXCNA\nfield, then the controller shall abort the command with a status code of Namespace\nAttachment Limit Exceeded.\nIf an attempt is made to attach a namespace to a controller that does not support the corresponding I/O\nCommand Set, then the command shall be aborted with a status code of I/O Command Set Not Supported.\nIf an attempt is made to attach a namespace to a controller that supports the corresponding I/O Command\nSet and the corresponding I/O Command Set is not enabled by the I/O Command Set profile feature, then\nthe command shall be aborted with a status code of I/O Command Set Not Enabled.",
    "tables": [
      {
        "id": "table_412_412",
        "page": 412,
        "bbox": [
          115.0,
          412.0,
          883.0,
          470.0
        ],
        "image_path": "Table_5_2_20_Namespace_Attachment_command.png",
        "title": "Table_5_2_20_Namespace_Attachment_command",
        "merged_count": 2,
        "table_md": "| Bits | Description |\n| :--- | :--- |\n| 127:00 | **Data Pointer (DPTR):** This field specifies the start of the data buffer. Refer to Figure 92 for the definition of this field. If using PRPs, this field shall not be a pointer to a PRP List as the data buffer may not cross more than one page boundary. |\n| 31:04 | Reserved |\n| 03:00 | **Select (SEL):** This field selects the type of attachment to perform. <br> <table> <tr> <th>Value</th> <th>Definition</th> </tr> <tr> <td>0h</td> <td>Controller Attach</td> </tr> <tr> <td>1h</td> <td>Controller Detach</td> </tr> <tr> <td>2h to Fh</td> <td>Reserved</td> </tr> </table> |"
      }
    ],
    "figures": []
  },
  "statistics": {
    "table_count": 1,
    "figure_count": 0
  }
}