{
  "section_index": 728,
  "section_id": "8.1.16",
  "title": "8.1.16 Namespace Management",
  "level": 3,
  "pages": {
    "start": 605,
    "end": 606,
    "count": 2
  },
  "content": {
    "text": "The Namespace Management capability consists of the Namespace Management command (refer to\nsection 5.2.21) and the Namespace Attachment command (refer to section 5.2.20). The Namespace\nManagement command is used to create a namespace or delete a namespace. The Namespace\nAttachment command is used to attach and detach controllers from a namespace. The Namespace\nManagement capability is intended for use during manufacturing or by a system administrator.\nIn addition to the Namespace Management capability, there are other events and capabilities that are able\nto affect the number of namespaces that exist within an NVM subsystem (e.g., the Capacity Management\ncapability as described in section 8.1.4).\nIf the Namespace Management capability is supported, then the controller:\na) shall support the Namespace Management command and the Namespace Attachment\ncommand;\nb) shall set the NMS bit to ‘1’ in the OACS field (refer to Figure 328);\nc) shall support the Attached Namespace Attribute Changed asynchronous event (refer to Figure\n154 and section 5.2.26.1.5);\nd) should support the Allocated Namespace Attribute Changed asynchronous event (refer to\nFigure 154 and section 5.2.26.1.5); and\ne) may support Namespace Granularity (refer to the NVM Express NVM Command Set\nSpecification).\nA controller may support the Namespace Attachment command without supporting the Namespace\nManagement command. Such a controller:\na) shall not set the Namespace Management Supported (NMS) bit to ‘1’ in the OACS field (refer\nto Figure 328); and\nb) should support the Namespace Attribute Change asynchronous event.\nIf a namespace is detached from a controller, then the NSID that referred to that namespace becomes an\ninactive NSID (refer to section 3.2.1.4) on that controller. If a namespace is deleted from the NVM\nsubsystem, then the NSID that referred to that namespace becomes an unallocated NSID (refer to section\n3.2.1.3) in the NVM subsystem. Previously submitted but uncompleted or subsequently submitted\ncommands to the affected NSID are handled by the controller as if they were issued to an inactive NSID\n(refer to Figure 92).\nThe size of a namespace that contains formatted storage is based on the size requested in a create\noperation, the format of the namespace, and any characteristics (e.g., endurance). The controller\ndetermines the NVM capacity allocated for that namespace. Namespaces may be created with different\nusage characteristics (e.g., endurance) that utilize differing amounts of NVM capacity. Namespace\ncharacteristics and the mapping of these characteristics to NVM capacity usage are outside the scope of\nthis specification.\nReporting of capacity information for the NVM subsystem, Domain, Endurance Group, and NVM Set are\ndescribed in section 3.8. For each namespace that contains formatted storage, the NVM Set and the\nEndurance Group that contain the namespace are reported in the Identify Namespace data structure. The\nNVM Set to be used for a namespace that contains formatted storage is based on the value in the NVM\nSet Identifier field in a create operation. If the NVM Set Identifier field is cleared to 0h in a create operation\nfor a namespace that contains formatted storage, then the controller shall choose the NVM Set from which\nto allocate capacity to create that namespace.\nIf the NVM Set Identifier field and the Endurance Group Identifier field are both cleared to 0h in a create\noperation for a namespace that contains formatted storage, then the controller shall choose the Endurance\nGroup and the NVM Set from which to allocate capacity to create that namespace.\nIf the NVM Set Identifier field is cleared to 0h and the Endurance Group Identifier field is set to a non-zero\nvalue in a create operation for a namespace that contains formatted storage, then the controller shall\nchoose the NVM Set in the specified Endurance Group from which to allocate capacity to create that\nnamespace.\nIf the NVM Set Identifier field is set to a non-zero value and the Endurance Group Identifier field is cleared\nto 0h in a create operation for a namespace that contains formatted storage, then the controller shall abort\nthe command with a status code of Invalid Field in Command.\nIf the NVM Set Identifier field and the Endurance Group Identifier field are both set to non-zero values in a\ncreate operation for a namespace that contains formatted storage and the specified NVM Set exists in the\nspecified Endurance Group, then the controller shall allocate capacity for that created namespace from the\nspecified NVM Set.\nIf the NVM Set Identifier field and the Endurance Group Identifier field are both set to non-zero values in a\ncreate operation for a namespace that contains formatted storage and the specified NVM Set does not exist\nin the specified Endurance Group, then the controller shall abort the command with a status code of Invalid\nField in Command.\nFor each namespace that contains formatted storage, the NVM capacity used for that namespace is\nreported in the Identify Namespace data structure (refer to the applicable NVM Express I/O Command Set\nspecification). The controller may allocate NVM capacity in units such that the requested size for a\nnamespace that contains formatted storage may be rounded up to the next unit boundary. The units in\nwhich NVM capacity is allocated are reported in the Namespace Granularity List (refer to the NVM Express\nNVM Command Set Specification), if supported. For example, when using the NVM Command Set, if the\nhost requests a namespace of 32 logical blocks with a logical block size of 4 KiB for a total size of 128 KiB\nand the allocation unit for the implementation is 1 MiB, then the NVM capacity consumed may be rounded\nup to 1 MiB. The NVM capacity fields may not correspond to the logical block size multiplied by the total\nnumber of logical blocks.\nThe method of allocating ANA Group identifiers is outside the scope of this specification. If the ANA Group\nIdentifier (refer to Figure 335 and the Identify Namespace data structure in the NVM Express NVM\nCommand Set Specification) is cleared to 0h, then the controller shall determine the ANAGRPID that is\nassigned to that namespace.",
    "tables": [],
    "figures": []
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 0
  }
}