{
  "section_index": 721,
  "section_id": "8.1.11.2",
  "title": "8.1.11.2 Enabling Flexible Data Placement (Informative)",
  "level": 4,
  "pages": {
    "start": 596,
    "end": 598,
    "count": 3
  },
  "content": {
    "text": "The host prepares an Endurance Group for operation in Flexible Data Placement using the following\nprocess:\n1) Validate that the Flexible Data Placement capability is supported by issuing an Identify command\nto access the Identify Controller data structure and checking that the Flexible Data Placement\nSupport (FDPS) bit is set to ‘1’.\n2) Delete any existing namespaces that exist in the Endurance Group where Flexible Data Placement\nis to be enabled.\n3) Issue a Get Log Page command specifying the FDP Configurations log page (refer to section\n5.2.12.1.29). Parse the FDP Configurations List in the returned log page to determine the desired\nFDP configuration.\n4) Enable Flexible Data Placement utilizing that desired FDP configuration by issuing a Set Features\ncommand specifying:\na. the Flexible Data Placement feature;\nb. the Endurance Group Identifier field set to the ENDGID of the Endurance Group in which\nFlexible Data Placement is to be enabled;\nc. the FDPE bit set to ‘1’ (i.e., enabling Flexible Data Placement); and\nd. the Flexible Data Placement Configuration Index field set to the index of the desired FDP\n5) Issue an Identify command specifying the Identify Namespace data structure (i.e., CNS 00h as\ndefined in Figure 326) to identify which LBA formats are supported.\n6) For each namespace to be created in the Endurance Group, issue a Namespace Management\ncommand (refer to section 5.2.21) specifying:\na. the Select field set to the Create operation;\nb. the User Data Format; and\nc. the Placement Handle List used to define the Reclaim Unit Handle associated with each\nPlacement Handle of the namespace (refer to the Namespace Management section of the\napplicable NVM Express I/O Command Set specification)\n7) Issue Get Features commands for the FDP Events feature (refer to section 5.2.26.1.21) to acquire\nthe list of supported FDP events and the enabled state of each supported FDP event.\n8) Issue Set Features commands for the FDP Events feature (refer to section 5.2.26.1.21) to specify\nif FDP events are required for Reclaim Unit Handles.\n9) For each namespace created in an Endurance Group in which the Data Placement Directive is to\nbe utilized by the host by write commands specifying that namespace:\na. Issue a Directive Send command specifying:\ni. the Directive Operation field set to Enable Directive (i.e., 01h);\nii. the NSID of that namespace;\niii. the DTYPE field in Command Dword 11 set to Identify (i.e., 00h);\niv. the DTYPE field in Command Dword 12 set to Data Placement (i.e., 02h); and\nv. the Enable Directive bit set to ‘1’ (i.e., to enable the Data Placement Directive).\nb. Issue an Identify command with CNS value 08h (i.e., the I/O Command Set Independent\nIdentify Namespace data structure) to determine if a volatile write cache is present for the\nnamespace.\nFollowing a Controller Level Reset, the host performs the following actions before resuming use of Flexible\nData Placement in an Endurance Group:\n1) Determine the FDP configuration:\na. Issue a Get Feature command specifying the Flexible Data Placement feature (i.e., 1Dh)\nand the ENDGID for the Endurance Group to determine if Flexible Data Placement is\nenabled and the Flexible Data Placement Configuration Index.\nb. Issue a Get Log Page command specifying the FDP Configurations log page (i.e., Log\nPage Identifier 20h).\n2) Issue Get Features commands for the FDP Events feature (refer to section 5.2.26.1.21) to acquire\nthe list of supported FDP events and the enabled state of each supported FDP event.\n3) Issue Set Features commands for the FDP Events feature (refer to section 5.2.26.1.21) to specify\nif supported FDP events are required for Reclaim Unit Handles.\n4) For each namespace in the Endurance Group that the Data Placement Directive is to be utilized\nby the host by write commands specifying that namespace:\na. Issue an I/O Management Receive command to determine the Placement Handles for that\nnamespace; and\nb. Issue an Identify command with CNS value 08h (i.e., the I/O Command Set Independent\nIdentify Namespace data structure) to determine if a volatile write cache is present for the\nnamespace.",
    "tables": [],
    "figures": []
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 0
  }
}