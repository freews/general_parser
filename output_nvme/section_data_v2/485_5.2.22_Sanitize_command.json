{
  "section_index": 485,
  "section_id": "5.2.22",
  "title": "5.2.22 Sanitize command",
  "level": 3,
  "pages": {
    "start": 415,
    "end": 417,
    "count": 3
  },
  "content": {
    "text": "The Sanitize command is used to start an NVM subsystem sanitize operation (refer to section 1.5.70) or to\nrecover from a previously failed NVM subsystem sanitize operation. The NVM subsystem sanitize operation\ntypes that may be supported are Block Erase, Crypto Erase, and Overwrite.\nAn NVM subsystem sanitize operation consists of:\n•\nsanitize processing (refer to section 8.1.26), which may include:\no\ndeallocation of all media in the NVM subsystem that is allocated for user data; and\no\nadditional media modification;\n•\noptional verification of media in the NVM subsystem that is allocated for user data; and\n•\npost-verification deallocation of all media in the NVM subsystem that is allocated for user data\nfollowing media verification, if any, as described in section 8.1.26.\nRefer to section 8.1.26.1 for command processing requirements that are common to the Sanitize command\nand the Sanitize Namespace command.\nThe Sanitize command shall not be supported by Exported NVM Subsystems (refer to section 8.1.26.6).\nThe Sanitize Capabilities (SANICAP) field in the Identify Controller data structure (refer to Figure 328)\nindicates:\na) the NVM subsystem sanitize operation types supported for the Sanitize command;\nb) whether setting the No-Deallocate After Sanitize (NDAS) bit (refer to Figure 388) causes media to\nbe modified as part of sanitize processing;\nc) whether the controller inhibits the functionality of the No-Deallocation After Sanitize bit in the\nSanitize command; and\nd) whether the controller supports the Media Verification state and the Post-Verification Deallocation\nstate (refer to the Verification Support (VERS) bit in the SANICAP field in Figure 328).\nIf the Verification Support (VERS) bit is cleared to ‘0’ and a Sanitize command specifies the Enter Media\nVerification State (EMVS) bit set to ‘1’ (refer to Figure 388), then the controller shall abort the command\nwith a status code of Invalid Field in Command.\nIf the Verification Support (VERS) bit is set to ‘1’ and a Sanitize command is processed that specifies:\na) the Enter Media Verification State (EMVS) bit set to ‘1’, the SANACT field set to a value of 010b\n(i.e., Block Erase) or a value of 100b (i.e., Crypto Erase), and the No-Deallocate After Sanitize\n(NDAS) bit cleared to ‘0’, then successful sanitize processing is followed by entry to the Media\nVerification state;\nb) the Enter Media Verification State (EMVS) bit set to ‘1’ and:\na) the SANACT field set to 011b (i.e., Overwrite); or\nb) the No-Deallocate After Sanitize (NDAS) bit set to ‘1’;\nthen the controller shall abort the command with a status code of Invalid Field in Command;\nc) the SANACT field set to 101b (i.e., Exit Media Verification State) and the sanitization target is in\nthe Media Verification state, then:\n•\nthe controller does not start a new NVM subsystem sanitize operation; and\n•\nthe sanitization target transitions from the Media Verification state to the Post-Verification\nDeallocation state, in which all media allocated for user data in the NVM subsystem is\ndeallocated;\nor\nthe SANACT field set to 101b (i.e., Exit Media Verification State) and the sanitization target is not\nin the Media Verification state, then the controller shall abort the command with a status code of\nInvalid Field in Command\nIf any Persistent Memory Region is enabled in an NVM subsystem, then the controller shall abort any\nSanitize command with a status code of Sanitize Prohibited While Persistent Memory Region is Enabled.\nIf any namespace is write protected in an NVM subsystem (refer to section 8.1.17), then the controller\naborts any Sanitize command with a status code of Namespace is Write Protected.\nIf one or more controllers in the NVM subsystem is suspended (refer to section 5.2.17.1.1), then the\ncontroller shall abort the command with a status code of Controller Suspended.\nSupport for Sanitize commands in a Controller Memory Buffer (i.e., submitted to an Admin Submission\nQueue in a Controller Memory Buffer or specifying an Admin Completion Queue in a Controller Memory\nBuffer) is implementation specific. If an implementation does not support Sanitize commands in a Controller\nMemory Buffer and a controller’s Admin Submission Queue or Admin Completion Queue is in the Controller\nMemory Buffer, then the controller shall abort all Sanitize commands with a status code of Command Not\nSupported for Queue in CMB.\nThe Sanitize command uses Command Dword 10 and Command Dword 11. All other command specific\nfields are reserved.",
    "tables": [
      {
        "id": "table_416_691",
        "page": 416,
        "bbox": [
          115.0,
          691.0,
          882.0,
          817.0
        ],
        "table_md": "| Value | Definition |\n| :--- | :--- |\n| 000b | Reserved |\n| 001b | Exit Failure Mode |\n| 010b | Start a Block Erase NVM subsystem sanitize operation |\n| 011b | Start an Overwrite NVM subsystem sanitize operation |\n| 100b | Start a Crypto Erase NVM subsystem sanitize operation |\n| 101b | Exit Media Verification State |\n| 110b to 111b | Reserved |"
      },
      {
        "id": "table_417_127",
        "page": 417,
        "bbox": [
          114.0,
          127.0,
          883.0,
          623.0
        ],
        "table_md": "(Continuation of Untitled Table - see first part)"
      },
      {
        "id": "table_417_660",
        "page": 417,
        "bbox": [
          114.0,
          660.0,
          881.0,
          739.0
        ],
        "table_md": "(Continuation of Untitled Table - see first part)"
      }
    ],
    "figures": []
  },
  "statistics": {
    "table_count": 3,
    "figure_count": 0
  }
}