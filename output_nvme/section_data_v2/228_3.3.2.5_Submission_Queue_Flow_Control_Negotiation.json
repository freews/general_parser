{
  "section_index": 228,
  "section_id": "3.3.2.5",
  "title": "3.3.2.5 Submission Queue Flow Control Negotiation",
  "level": 4,
  "pages": {
    "start": 121,
    "end": 122,
    "count": 2
  },
  "content": {
    "text": "Use of Submission Queue (SQ) flow control is negotiated for each queue pair by the Connect command\nand the controller response to the Connect command. SQ flow control shall be used unless it is disabled\nas a result of that negotiation. If SQ flow control is disabled, then the Submission Queue Head Pointer\n(SQHD) field is reserved in all Fabrics response capsules for that queue pair after the response to the\nConnect command (i.e., in all subsequent response capsules for that queue pair, the controller shall clear\nthe SQHD field to 0h and the host should ignore the SQHD field).\nIf the host requests that SQ flow control be disabled for a queue pair, then the host should size each\nSubmission Queue to support the maximum number of commands that the host could have outstanding at\none time for that Submission Queue.\nThe maximum size of the Admin Submission Queue is specified in the Admin Max SQ Size (ASQSZ) field\nof the Discovery Log Page Entry for the NVM subsystem (refer to section 5.2.12.3.3).\nThe maximum size of an I/O Submission Queue is specified in the Maximum Queue Entries Supported\n(MQES) field of the Controller Capabilities (CAP) property for the controller (refer to section 3.1.4.1).\nThe value of the Maximum Outstanding Commands (MAXCMD) field in the Identify Controller data structure\nindicates the maximum number of commands that the controller processes at one time for a particular I/O\nQueue. The host may use this value to size I/O Submission Queues and optimize the number of commands\nsubmitted at one time per queue to achieve the best performance.\nIf SQ flow control is disabled, then the host should limit the number of outstanding commands for a queue\npair to be less than the size of the Submission Queue. If the controller detects that the number of\noutstanding commands for a queue pair is greater than or equal to the size of the Submission Queue, then\nthe controller shall:\na) stop processing commands and set the Controller Fatal Status (CSTS.CFS) bit to ‘1’ (refer to\nsection 9.5); and\nb) terminate the NVMe Transport connection and end the association between the host and the\ncontroller.",
    "tables": [],
    "figures": []
  },
  "statistics": {
    "table_count": 0,
    "figure_count": 0
  }
}