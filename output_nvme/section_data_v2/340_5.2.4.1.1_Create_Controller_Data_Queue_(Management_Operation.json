{
  "section_index": 340,
  "section_id": "5.2.4.1.1",
  "title": "5.2.4.1.1 Create Controller Data Queue (Management Operation 0h)",
  "level": 5,
  "pages": {
    "start": 213,
    "end": 215,
    "count": 3
  },
  "content": {
    "text": "The Create Controller Data Queue management operation of the Controller Data Queue command is used\nto create a queue in host memory to which a controller posts the information specified by the Queue Type\nfield (refer to Figure 169).\nThe Create Controller Data Queue management operation uses the PRP Entry 1 field, Command Dword\n11 field, and Command Dword 12 field.\nIf a PRP List is provided to describe the Controller Data Queue, then the PRP List shall be maintained by\nthe host at the same location in host physical memory and the values in the PRP List shall not be modified\nuntil the Controller Data Queue is deleted (refer to section 5.2.4.1.2) or the controller is reset. If the PRP\nList values are modified, then the behavior is undefined.\nIf the number of memory ranges specified by the PRP Entry 1 field is greater than the value defined by the\nMaximum CDQ Memory Ranges (MCMR) field in the Identify Controller data structure (refer to Figure 328),\nthen the controller shall abort the command with a status code of Invalid Field in Command.\nIf the number of memory ranges specified by the PRP Entry 1 field plus the number of memory ranges that\nexists for all of the Controller Data Queues in the NVM subsystem is greater than the value defined by the\nNVM Subsystem Maximum Controller CDQ Memory Ranges (NMCMR) field in the Identify Controller data\nstructure (refer to Figure 328), then the controller shall abort the command with a status code of Invalid\nField in Command.\nIf the current number of User Data Migration Queues that exist in the controller is equal to the value in the\nMaximum Controller User Data Migration Queues (MCUDMQ) field in the Identify Controller data structure,\nthen the controller shall abort the command with a status code of Invalid Field in Command.\nIf the current number of User Data Migration Queues that exist in the NVM subsystem is equal to the value\nin the Maximum NVM Subsystem User Data Migration Queues (MNSUDMQ) field in the Identify Controller\ndata structure, then the controller shall abort the command with a status code of Invalid Field in Command.\nIf the Controller Data Queue Size field value is not a multiple of the size of the entries for the type of\nController Data Queue as specified by the Queue Type field (refer to Figure 169), then the controller shall\nabort the command with a status code of Invalid Field in Command.\nThe Management Operation Specific field (refer to Figure 165) for the Create Controller Data Queue\nmanagement operation is specified in Figure 169.\nIf the PRP Entry 1 field has a non-zero PRP offset, then the controller shall abort the command with a status\ncode of PRP Offset Invalid.",
    "tables": [
      {
        "id": "table_214_267",
        "page": 214,
        "bbox": [
          115.0,
          267.0,
          881.0,
          435.0
        ],
        "table_md": "| Value | Definition | Reference Section |\n| :--- | :--- | :--- |\n| 0h | User Data Migration Queue | 5.2.4.1.1.1 |\n| 1h to BFh | Reserved | |\n| C0h to FFh | Vendor Specific | |"
      },
      {
        "id": "table_214_481",
        "page": 214,
        "bbox": [
          115.0,
          481.0,
          881.0,
          590.0
        ],
        "table_md": "(Continuation of Untitled Table - see first part)"
      },
      {
        "id": "table_214_644",
        "page": 214,
        "bbox": [
          115.0,
          644.0,
          881.0,
          674.0
        ],
        "table_md": "(Continuation of Untitled Table - see first part)"
      },
      {
        "id": "table_214_816",
        "page": 214,
        "bbox": [
          115.0,
          816.0,
          881.0,
          845.0
        ],
        "table_md": "(Continuation of Untitled Table - see first part)"
      },
      {
        "id": "table_215_128",
        "page": 215,
        "bbox": [
          115.0,
          128.0,
          881.0,
          234.0
        ],
        "table_md": "(Continuation of Untitled Table - see first part)"
      }
    ],
    "figures": []
  },
  "statistics": {
    "table_count": 5,
    "figure_count": 0
  }
}