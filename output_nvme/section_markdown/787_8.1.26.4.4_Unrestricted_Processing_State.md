###### 8.1.26.4.4 Unrestricted Processing State

> **Section ID**: 8.1.26.4.4 | **Page**: 666-668

In this state, if the sanitize operation fails, then the sanitization target transitions to the Unrestricted Failure
state, from which it is able to transition to the Idle state without successful sanitization.
In this state:
a) the controller shall set the Sanitize Progress (SPROG) field, in the Sanitize Status log page for the
sanitization target, as described in Figure 302;
b) the controller shall perform additional media modification, if required, as described in section
8.1.26.2;
c) the controller should deallocate all media in the sanitization target that is allocated for user data, if
permitted, as described in section 8.1.26.2;
d) if a change in the composition of the NVM subsystem occurs, then the MVCNCLD bit shall be set
to â€˜1â€™ in the Sanitize Status log page for the sanitization target;
e) if the sanitization target is the NVM subsystem and a Controller Level Reset of any controller in the
NVM subsystem occurs that is caused by:
â€¢
a transport-specific reset type (refer to the applicable NVM Express Transport specification
applicable NVM Express Transport specification); or
â€¢
an NVM Subsystem Reset,
then the MVCNCLD bit shall be set to â€˜1â€™;
;
f)
if the sanitization target is a namespace and a Controller Level Reset on any controller that is
attached to the sanitization target occurs that is caused by:
â€¢
a transport-specified reset type (refer to the applicable NVM Express Transport specification
applicable NVM Express Transport specification); or
â€¢
an NVM Subsystem Reset,
then the MVCNCLD bit shall be set to â€˜1â€™;
;
g) all controllers and Management Endpoints in the NVM subsystem shall process commands as
described in section 8.1.26.5;
h) if the sanitization target is the NVM subsystem, then all controllers in the NVM subsystem shall
abort a:
â€¢
Sanitize command; and
with a status code of Sanitize In Progress; and
i)
if the sanitization target is a namespace, then all controllers in the NVM subsystem shall abort a:
â€¢
Sanitize command; and
â€¢
Sanitize Namespace command for the sanitization target associated with this state machine,
with a status code of Sanitize Namespace In Progress.
The controller shall:
a) if the sanitization target is the NVM subsystem:
o
if the Sanitize Namespace command is not supported:
i. set the Global Data Erased (GDE) bit to â€˜1â€™ in the Sanitize Status log page for the
NVM subsystem; and
ii. set the Sanitize State (SANS) field to 0h (i.e., Idle state) in the Sanitize Status log
page for the NVM subsystem;
o
if the Sanitize Namespace command is supported:
i.
set the Global Data Erased (GDE) bit to â€˜1â€™ in every Sanitize Status log page
ii.
set the Namespace Data Erased (NDE) bit to â€˜1â€™ in the Sanitize Status log page
for each namespace that exists in the NVM subsystem; and
iii.
set the SANS field to 0h (i.e., Idle state) in the Sanitize Status log page for the
NVM subsystem and each namespace that exists in the NVM subsystem;
b) if the sanitization target is a namespace:
o
set the Namespace Data Erased (NDE) bit to â€˜1â€™ in the Sanitize Status log page for that
namespace; and
o
set the SANS field to 0h (i.e., Idle state) in the Sanitize Status log page for that namespace;
d
c) report the Sanitize Operation Completed asynchronous event or the Sanitize Operation Completed
With Unexpected Deallocation asynchronous event as described in section 8.1.26.1.
The controller shall:
a) set the FAILS field to 3h in the Sanitize Status log page for the sanitization target (i.e., Unrestricted
Processing state); and
b) report the Sanitize Operation Completed asynchronous event or the Sanitize Operation Completed
With Unexpected Deallocation asynchronous event as described in section 8.1.26.1.
The controller shall:
1. report the Sanitize Operation Entered Media Verification State asynchronous event as described
in section 8.1.26.1.


---
### ðŸ“Š Tables (1)

#### Table 1: Untitled Table
![Untitled Table](../section_images/table_667_128.png)

| | Ending | Label | |
|---|---|---|---|
| | Idle | C2 | The sanitize processing completes successfully and the EMVS bit was:<br>a) cleared to '0' in the command that started the sanitize operation;<br>or<br>b) set to '1' in the command that started the sanitize operation, the MVCNCLD bit is set to '1', and deallocation of all media in the sanitization target that is allocated for user data completes successfully. |
| | Unrestricted Failure | D2 | The sanitize processing fails. |
| | Media Verification | F2 | The EMVS bit was set to '1' in the command that started the sanitize operation, the sanitize processing completes successfully, and the MVCNCLD bit is cleared to '0' in the Sanitize Status log page for the sanitization target. |

