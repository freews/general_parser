###### 8.1.26.4.7 Post-Verification Deallocation State

> **Section ID**: 8.1.26.4.7 | **Page**: 670-672

In this state:
a) the controller shall deallocate all media allocated for user data in the sanitization target;
b) the Sanitize Progress (SPROG) field in the Sanitize Status log page for the sanitization target shall
be set as described in Figure 302;
c) all controllers and Management Endpoints in the NVM subsystem shall process commands as
described in section 8.1.26.5;
d) if the sanitization target is the NVM subsystem, then all controllers in the NVM subsystem shall
abort a:
â€¢
Sanitize command; and
â€¢
Sanitize Namespace command
with a status code of Sanitize In Progress; and
e) if the sanitization target is a namespace, then all controllers in the NVM subsystem shall abort a:
â€¢
Sanitize command; and
â€¢
Sanitize Namespace command for the sanitization target associated with this state
machine,
with a status code of Sanitize Namespace In Progress.
The controller shall:
a) if the sanitization target is the NVM subsystem:
o
if the Sanitize Namespace command is not supported:
i.
set the Global Data Erased (GDE) bit to â€˜1â€™ in the Sanitize Status log page for the NVM
subsystem; and
ii.
set the Sanitize State (SANS) field to 0h (i.e., Idle state) in the Sanitize Status log page
for the NVM subsystem;
r
o
if the Sanitize Namespace command is supported:
i.
set the Global Data Erased (GDE) bit to â€˜1â€™ in every Sanitize Status log page;
ii.
set the Namespace Data Erased (NDE) bit to â€˜1â€™ in the Sanitize Status log page for
each namespace that exists in the NVM subsystem; and
iii.
set the SANS field to 0h (i.e., Idle state) in the Sanitize Status log page for the NVM
subsystem and each namespace that exists in the NVM subsystem;
b) if the sanitization target is a namespace:
o
set the Namespace Data Erased (NDE) bit to â€˜1â€™ in the Sanitize Status log page for that
namespace; and
o
set the SANS field to 0h (i.e., Idle state) in the Sanitize Status log page for that namespace;
and
c) report the Sanitize Operation Completed asynchronous event as described in section 8.1.26.1.
Transition Post-Verification Deallocation:Restricted Failure:
The controller shall:
a) report the Sanitize Operation Completed asynchronous event as described in section 8.1.26.1; and
b) set the FAILS field in the Sanitize Status log page for the sanitization target to 6h (i.e., Post-
Verification Deallocation state).
The controller shall:
a) report the Sanitize Operation Completed asynchronous event as described in section 8.1.26.1; and
b) set the FAILS field in the Sanitize Status log page for the sanitization target to 6h (i.e., Post-
Verification Deallocation state).


---
### ðŸ“Š Tables (1)

#### Table 1: Untitled Table
![Untitled Table](../section_images/table_671_269.png)

| | Restricted Failure | I1 | The sanitize operation was started by a command specifying the AUSE bit cleared to '0' (i.e., restricted completion mode), and a failure occurs during deallocation of all media in the sanitization target that is allocated for user data. |
|---|---|---|---|
| | Unrestricted Failure | I2 | The sanitize operation was started by a command specifying the AUSE bit set to '1' (i.e., unrestricted completion mode), and a failure occurs during deallocation of all media in the sanitization target that is allocated for user data. |

