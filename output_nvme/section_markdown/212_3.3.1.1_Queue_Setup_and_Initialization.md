##### 3.3.1.1 Queue Setup and Initialization

> **Section ID**: 3.3.1.1 | **Page**: 111-112

To setup and initialize I/O Submission Queues and I/O Completion Queues for use, a host follows these
steps:
1. Configures the Admin Submission Queue and the Admin Completion Queues by initializing the
Admin Queue Attributes (AQA), Admin Submission Queue Base Address (ASQ), and Admin
Completion Queue Base Address (ACQ) properties appropriately;
2. Configures the size of the I/O Submission Queues (CC.IOSQES) and I/O Completion Queues
(CC.IOCQES);
3. Submits a Set Features command with the Number of Queues attribute set to the requested
number of I/O Submission Queues and I/O Completion Queues. The completion queue entry for
this Set Features command indicates the number of I/O Submission Queues and I/O Completion
Queues allocated by the controller;
4. Determines the maximum number of entries supported per queue (CAP.MQES) and whether the
queues are required to be physically contiguous (CAP.CQR);
5. Creates I/O Completion Queues within the limitations of the number allocated by the controller and
the queue attributes supported (maximum entries and physically contiguous requirements) by using
the Create I/O Completion Queue command; and
6. Creates I/O Submission Queues within the limitations of the number allocated by the controller and
the queue attributes supported (maximum entries and physically contiguous requirements) by using
the Create I/O Submission Queue command.
At the end of this process, I/O Submission Queues and I/O Completion Queues have been setup and
initialized and may be used to complete I/O commands.
