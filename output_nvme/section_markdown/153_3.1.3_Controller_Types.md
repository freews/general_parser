#### 3.1.3 Controller Types

> **Section ID**: 3.1.3 | **Page**: 62-63

As shown in Figure 23Figure 23, there are three types of controllers. An I/O controller (refer to section
3.1.3.1) is a controller that supports commands that provide access to user data stored on an NVM
subsystem’s non-volatile storage medium and may support commands that provide management
capabilities. An Administrative controller (refer to section 3.1.3.2) is a controller that supports commands
that provide management capabilities, but does not support I/O commands that access to user data stored
on an NVM subsystem’s non-volatile storage medium. A Discovery controller (refer to section 3.1.3.3) is a
controller used in NVMe over Fabrics to provide access to a Discovery log page.
The Controller Type (CNTRLTYPE) field in the Identify Controller data structure indicates a controller’s
type. Regardless of controller type, all controllers implement one Admin Submission Queue and one Admin
Completion Queue. Depending on the controller type, a controller may also support one or more I/O
Submission Queues and I/O Completion Queues.
When using a memory-based transport implementation (e.g., PCIe), a host submits commands to a
controller through pre-allocated Submission Queues. A controller is alerted to newly submitted commands
through SQ Tail Doorbell register (refer to the NVMe over PCIe Transport Specification) writes. The
difference between the previous doorbell register value and the current register write indicates the number
of commands that were submitted.
A controller fetches commands from the Submission Queue(s) and processes them. Except for fused
operations, there are no ordering restrictions for processing of commands within or across Submission
Queues (i.e., a controller may arbitrarily order the processing of commands that have been fetched). Data
associated with the processing of a command may or may not be committed to the NVM subsystem non-
volatile storage medium in the order that commands are submitted. If a host has ordering requirements for
the processing of commands, then that host is responsible for enforcing the ordering requirements.
A host submits commands of higher priorities to the appropriate Submission Queues. Priority is associated
with the Submission Queue itself, thus the priority of the command is based on the Submission Queue to
which that command was submitted. The controller arbitrates across the Submission Queues based on
fairness and priority according to the arbitration scheme specified in section 3.4.4.
Upon completion of the command execution by the NVM subsystem, the controller presents completion
queue entries to the host through the appropriate Completion Queues. Transport specific methods (e.g.,
PCIe interrupts) are used to notify the host of completion queue entries to process (refer to the applicable
NVM Express Transport specification).
There are no ordering restrictions for completions to the host. Each completion queue entry identifies the
Submission Queue Identifier and Command Identifier of the associated command. A host uses this
information to correlate the completions with the commands submitted to the Submission Queue(s).
A host is responsible for creating I/O Submission Queues and I/O Completion Queues prior to using those
queue pairs to submit commands to the controller. I/O Submission Queues and I/O Completion Queues
are created using the Create I/O Submission Queue command (refer to section 5.3.2) and the Create I/O
Completion Queue command (refer to section 5.3.1).
