###### 8.3.2.2.2.1 Kickstart Discovery Pull Registration Requests

> **Section ID**: 8.3.2.2.2.1 | **Page**: 708-709

Figure 736 illustrates the process used during a kickstart discovery request and response sequence. The
first step is to establish a TCP connection between a Direct Discovery controller (DDC) and a Centralized
Discovery controller (CDC). For kickstart discovery, the CDC acts as the passive side of the TCP connection
and is set to “listen” for DDC-initiated TCP connection establishment requests. The IP address used by the
DDC to establish the TCP connection with the CDC may be obtained from the A or AAAA record provided
in an mDNS response from the CDC, as described in section 8.3.1.3.4.
Once a TCP connection has been established, if an ICReq NVMe/TCP PDU (refer to the Initialize
Connection Request PDU section in the NVMe over TCP Transport Specification) from a DDC with the
Kickstart Discovery Connection (KDCONN) bit set to ‘1’ in the FLAGS field is received by a CDC, then the
CDC shall respond with an ICResp NVMe/TCP PDU (refer to the Initialize Connection Response PDU
section in the NVMe over TCP Transport Specification) to establish a kickstart discovery NVMe/TCP
connection.
Once a kickstart discovery NVMe/TCP connection has been established, if a KDReq NVMe/TCP PDU (refer
to the Kickstart Discovery Request PDU section in the NVMe over TCP Transport Specification) from a
DDC is received by a CDC, then the CDC shall respond with a KDResp NVMe/TCP PDU (refer to the
Kickstart Discovery Response PDU section in the NVMe over TCP Transport Specification) to accept the
pull registration request and connection parameters. The KDResp NVMe/TCP PDU sent by the CDC shall
include the NQN of that CDC in the CDC NVMe Qualified Name (CDCNQN) field. After sending a KDResp
NVMe/TCP PDU to the DDC where the Kickstart Status (KSSTAT) field is set to SUCCESS, the kickstart
discovery NVMe/TCP connection should be torn down, and the CDC performs a pull registration with the
DDC as described in section 8.3.2.2.2 using the connection parameters obtained from the KDReq
NVMe/TCP PDU.
If the total number of discovery information entries being registered by the pull registration (i.e., as specified
by the Number of Discovery Information Entries (NUMDIE) field in the KDReq NVMe/TCP PDU) exceeds
the available capacity for new discovery information entries on the CDC, then the CDC shall send a KDResp
NVMe/TCP PDU to the DDC where the KSSTAT field is set to FAILURE and the Failure Reason (FAILRSN)
field is set to Insufficient Discovery Resources.
