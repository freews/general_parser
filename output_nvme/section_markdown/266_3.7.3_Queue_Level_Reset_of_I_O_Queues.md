#### 3.7.3 Queue Level Reset of I/O Queues

> **Section ID**: 3.7.3 | **Page**: 145-146

The host may reset and/or reconfigure the I/O Submission and I/O Completion Queues by resetting them.
A queue level reset is performed by deleting and then recreating the queue. In this process, the host should
wait for all pending commands to the appropriate I/O Submission Queue(s) to complete.
To perform the queue level reset on a controller using the memory-based transport model, the host submits
the Delete I/O Submission Queue or Delete I/O Completion Queue command to the Admin Queue
specifying the identifier of the queue to be deleted. After successful command completion of the queue
delete operation, the host then recreates the queue by submitting the Create I/O Submission Queue or
Create I/O Completion Queue command. As part of the creation operation, the host may modify the
attributes of the queue. Note that if a queue level reset is performed on an I/O Completion Queue, the I/O
Submission Queues that are utilizing the I/O Completion Queue should be deleted before the I/O
Completion Queue is reset and recreated after the I/O Completion Queue is recreated. The behavior of an
I/O Submission Queue without a corresponding I/O Completion Queue is undefined.
To perform the queue level reset on a controller using the message-based transport model, the host sends
a Disconnect command to the I/O Queue which is to be deleted. After successful completion of the
Disconnect command, the host then recreates the I/O Submission Queue and I/O Completion Queue by
submitting the Connect command with a QID specified that is not 00h. As part of the Connect command,
the host may modify the attributes of the I/O Queues. If the Disconnect command is not supported by a
controller that uses the message-based transport model, then that controller does not support queue level
reset of I/O Queues.
The host should ensure that the appropriate I/O Submission Queue or I/O Completion Queue is idle before
deleting that queue. Submitting a queue deletion command causes any pending commands to be aborted
by the controller; this may or may not result in a completion queue entry being posted for the aborted
command(s).
